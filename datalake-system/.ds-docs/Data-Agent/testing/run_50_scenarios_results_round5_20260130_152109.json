{
  "summary": {
    "total": 50,
    "passed": 50,
    "failed": 0
  },
  "results": [
    {
      "scenario_id": "T2S-001",
      "category": "簡單 WHERE 條件查詢",
      "passed": true,
      "duration_sec": 7.091,
      "expected_success": true,
      "actual_success": true,
      "error": null,
      "generated_sql": "SELECT * FROM img_file WHERE img01 = '10-0001'",
      "result_summary": {
        "success": true,
        "action": "text_to_sql",
        "result": {
          "sql_query": "SELECT * FROM img_file WHERE img01 = '10-0001'",
          "parameters": [],
          "confidence": 0.7999999999999999,
          "explanation": "將自然語言查詢「查詢料號為 10-0001 的庫存記錄。」轉換為 SQL: SELECT * FROM img_file WHERE img01 = '10-0001'...",
          "warnings": [
            "SQL 缺少 SELECT 子句",
            "SQL 缺少 FROM 子句",
            "建議使用參數化查詢以防止 SQL 注入"
          ],
          "conversion_log": {
            "timestamp": "2026-01-30T15:19:11.762133",
            "natural_language": "查詢料號為 10-0001 的庫存記錄。",
            "database_type": "postgresql",
            "schema_info_provided": true,
            "steps": [
              {
                "step": "semantic_classification",
                "status": "success",
                "query_type": "簡單查詢",
                "handling": "執行",
                "similarity": 1.0,
                "matched": true
              },
              {
                "step": "llm_client_init",
                "status": "success",
                "provider": "None"
              },
              {
                "step": "build_prompt",
                "status": "success",
                "duration_ms": 0.02,
                "prompt_length": 4229
              },
              {
                "step": "llm_generate",
                "status": "success",
                "duration_ms": 6909.41,
                "raw_output_length": 69,
                "raw_output_preview": "查詢料號為 10-0001 的庫存記錄。\n\nSELECT * FROM img_file WHERE img01 = '10-0001';"
              },
              {
                "step": "extract_sql",
                "status": "success",
                "extracted_sql": "SELECT * FROM img_file WHERE img01 = '10-0001'"
              },
              {
                "step": "validate_sql",
                "status": "success",
                "validated_sql": "SELECT * FROM img_file WHERE img01 = '10-0001'",
                "warnings": [
                  "SQL 缺少 SELECT 子句",
                  "SQL 缺少 FROM 子句",
                  "建議使用參數化查詢以防止 SQL 注入"
                ]
              },
              {
                "step": "extract_parameters",
                "status": "success",
                "parameters": []
              },
              {
                "step": "calculate_confidence",
                "status": "success",
                "confidence": 0.7999999999999999
              }
            ],
            "total_duration_ms": 6914.51,
            "success": true
          }
        },
        "error": null,
        "metadata": null
      },
      "notes": []
    },
    {
      "scenario_id": "T2S-002",
      "category": "AND 條件查詢",
      "passed": true,
      "duration_sec": 4.002,
      "expected_success": true,
      "actual_success": true,
      "error": null,
      "generated_sql": "SELECT *\nFROM img_file\nWHERE img01 = '10-0001' AND img02 = 'W01'",
      "result_summary": {
        "success": true,
        "action": "text_to_sql",
        "result": {
          "sql_query": "SELECT *\nFROM img_file\nWHERE img01 = '10-0001' AND img02 = 'W01'",
          "parameters": [],
          "confidence": 0.7999999999999999,
          "explanation": "將自然語言查詢「查詢料號 10-0001 且倉庫為 W01 的庫存。」轉換為 SQL: SELECT *\nFROM img_file\nWHERE img01 = '10-0001' AND img02 = 'W01'...",
          "warnings": [
            "SQL 缺少 SELECT 子句",
            "SQL 缺少 FROM 子句",
            "建議使用參數化查詢以防止 SQL 注入"
          ],
          "conversion_log": {
            "timestamp": "2026-01-30T15:19:18.853299",
            "natural_language": "查詢料號 10-0001 且倉庫為 W01 的庫存。",
            "database_type": "postgresql",
            "schema_info_provided": true,
            "steps": [
              {
                "step": "semantic_classification",
                "status": "success",
                "query_type": "簡單查詢",
                "handling": "執行",
                "similarity": 1.0,
                "matched": true
              },
              {
                "step": "llm_client_init",
                "status": "success",
                "provider": "None"
              },
              {
                "step": "build_prompt",
                "status": "success",
                "duration_ms": 0.03,
                "prompt_length": 4235
              },
              {
                "step": "llm_generate",
                "status": "success",
                "duration_ms": 3905.83,
                "raw_output_length": 93,
                "raw_output_preview": "查詢料號 10-0001 且倉庫為 W01 的庫存。\n\nSELECT *\nFROM img_file\nWHERE img01 = '10-0001' AND img02 = 'W01';"
              },
              {
                "step": "extract_sql",
                "status": "success",
                "extracted_sql": "SELECT *\nFROM img_file\nWHERE img01 = '10-0001' AND img02 = 'W01'"
              },
              {
                "step": "validate_sql",
                "status": "success",
                "validated_sql": "SELECT *\nFROM img_file\nWHERE img01 = '10-0001' AND img02 = 'W01'",
                "warnings": [
                  "SQL 缺少 SELECT 子句",
                  "SQL 缺少 FROM 子句",
                  "建議使用參數化查詢以防止 SQL 注入"
                ]
              },
              {
                "step": "extract_parameters",
                "status": "success",
                "parameters": []
              },
              {
                "step": "calculate_confidence",
                "status": "success",
                "confidence": 0.7999999999999999
              }
            ],
            "total_duration_ms": 3906.25,
            "success": true
          }
        },
        "error": null,
        "metadata": null
      },
      "notes": []
    },
    {
      "scenario_id": "T2S-003",
      "category": "OR 條件查詢",
      "passed": true,
      "duration_sec": 4.19,
      "expected_success": true,
      "actual_success": true,
      "error": null,
      "generated_sql": "SELECT *\nFROM img_file\nWHERE img01 = '10-0001' OR img01 = '10-0002'",
      "result_summary": {
        "success": true,
        "action": "text_to_sql",
        "result": {
          "sql_query": "SELECT *\nFROM img_file\nWHERE img01 = '10-0001' OR img01 = '10-0002'",
          "parameters": [],
          "confidence": 0.7999999999999999,
          "explanation": "將自然語言查詢「查詢料號為 10-0001 或 10-0002 的庫存。」轉換為 SQL: SELECT *\nFROM img_file\nWHERE img01 = '10-0001' OR img01 = '10-0002'...",
          "warnings": [
            "SQL 缺少 SELECT 子句",
            "SQL 缺少 FROM 子句",
            "建議使用參數化查詢以防止 SQL 注入"
          ],
          "conversion_log": {
            "timestamp": "2026-01-30T15:19:22.855397",
            "natural_language": "查詢料號為 10-0001 或 10-0002 的庫存。",
            "database_type": "postgresql",
            "schema_info_provided": true,
            "steps": [
              {
                "step": "semantic_classification",
                "status": "success",
                "query_type": "簡單查詢",
                "handling": "執行",
                "similarity": 1.0,
                "matched": true
              },
              {
                "step": "llm_client_init",
                "status": "success",
                "provider": "None"
              },
              {
                "step": "build_prompt",
                "status": "success",
                "duration_ms": 0.03,
                "prompt_length": 4237
              },
              {
                "step": "llm_generate",
                "status": "success",
                "duration_ms": 4098.48,
                "raw_output_length": 98,
                "raw_output_preview": "查詢料號為 10-0001 或 10-0002 的庫存。\n\nSELECT *\nFROM img_file\nWHERE img01 = '10-0001' OR img01 = '10-0002';"
              },
              {
                "step": "extract_sql",
                "status": "success",
                "extracted_sql": "SELECT *\nFROM img_file\nWHERE img01 = '10-0001' OR img01 = '10-0002'"
              },
              {
                "step": "validate_sql",
                "status": "success",
                "validated_sql": "SELECT *\nFROM img_file\nWHERE img01 = '10-0001' OR img01 = '10-0002'",
                "warnings": [
                  "SQL 缺少 SELECT 子句",
                  "SQL 缺少 FROM 子句",
                  "建議使用參數化查詢以防止 SQL 注入"
                ]
              },
              {
                "step": "extract_parameters",
                "status": "success",
                "parameters": []
              },
              {
                "step": "calculate_confidence",
                "status": "success",
                "confidence": 0.7999999999999999
              }
            ],
            "total_duration_ms": 4098.87,
            "success": true
          }
        },
        "error": null,
        "metadata": null
      },
      "notes": []
    },
    {
      "scenario_id": "T2S-004",
      "category": "IN 條件查詢",
      "passed": true,
      "duration_sec": 4.59,
      "expected_success": true,
      "actual_success": true,
      "error": null,
      "generated_sql": "SELECT *\nFROM img_file\nWHERE img01 IN ('10-0001', '10-0002', '10-0003')",
      "result_summary": {
        "success": true,
        "action": "text_to_sql",
        "result": {
          "sql_query": "SELECT *\nFROM img_file\nWHERE img01 IN ('10-0001', '10-0002', '10-0003')",
          "parameters": [],
          "confidence": 0.7999999999999999,
          "explanation": "將自然語言查詢「查詢料號在 10-0001、10-0002、10-0003 中的庫存。」轉換為 SQL: SELECT *\nFROM img_file\nWHERE img01 IN ('10-0001', '10-0002', '10-0003')...",
          "warnings": [
            "SQL 缺少 SELECT 子句",
            "SQL 缺少 FROM 子句",
            "建議使用參數化查詢以防止 SQL 注入"
          ],
          "conversion_log": {
            "timestamp": "2026-01-30T15:19:27.045192",
            "natural_language": "查詢料號在 10-0001、10-0002、10-0003 中的庫存。",
            "database_type": "postgresql",
            "schema_info_provided": true,
            "steps": [
              {
                "step": "semantic_classification",
                "status": "success",
                "query_type": "簡單查詢",
                "handling": "執行",
                "similarity": 1.0,
                "matched": true
              },
              {
                "step": "llm_client_init",
                "status": "success",
                "provider": "None"
              },
              {
                "step": "build_prompt",
                "status": "success",
                "duration_ms": 0.04,
                "prompt_length": 4244
              },
              {
                "step": "llm_generate",
                "status": "success",
                "duration_ms": 4492.35,
                "raw_output_length": 109,
                "raw_output_preview": "查詢料號在 10-0001、10-0002、10-0003 中的庫存。\n\nSELECT *\nFROM img_file\nWHERE img01 IN ('10-0001', '10-0002', '10-0003');"
              },
              {
                "step": "extract_sql",
                "status": "success",
                "extracted_sql": "SELECT *\nFROM img_file\nWHERE img01 IN ('10-0001', '10-0002', '10-0003')"
              },
              {
                "step": "validate_sql",
                "status": "success",
                "validated_sql": "SELECT *\nFROM img_file\nWHERE img01 IN ('10-0001', '10-0002', '10-0003')",
                "warnings": [
                  "SQL 缺少 SELECT 子句",
                  "SQL 缺少 FROM 子句",
                  "建議使用參數化查詢以防止 SQL 注入"
                ]
              },
              {
                "step": "extract_parameters",
                "status": "success",
                "parameters": []
              },
              {
                "step": "calculate_confidence",
                "status": "success",
                "confidence": 0.7999999999999999
              }
            ],
            "total_duration_ms": 4492.76,
            "success": true
          }
        },
        "error": null,
        "metadata": null
      },
      "notes": []
    },
    {
      "scenario_id": "T2S-005",
      "category": "SUM 聚合",
      "passed": true,
      "duration_sec": 2.984,
      "expected_success": true,
      "actual_success": true,
      "error": null,
      "generated_sql": "SELECT SUM(img10)\nFROM img_file\nWHERE img01 = '10-0001'",
      "result_summary": {
        "success": true,
        "action": "text_to_sql",
        "result": {
          "sql_query": "SELECT SUM(img10)\nFROM img_file\nWHERE img01 = '10-0001'",
          "parameters": [],
          "confidence": 0.7999999999999999,
          "explanation": "將自然語言查詢「計算料號 10-0001 的總庫存量。」轉換為 SQL: SELECT SUM(img10)\nFROM img_file\nWHERE img01 = '10-0001'...",
          "warnings": [
            "SQL 缺少 SELECT 子句",
            "SQL 缺少 FROM 子句",
            "建議使用參數化查詢以防止 SQL 注入"
          ],
          "conversion_log": {
            "timestamp": "2026-01-30T15:19:31.634865",
            "natural_language": "計算料號 10-0001 的總庫存量。",
            "database_type": "postgresql",
            "schema_info_provided": true,
            "steps": [
              {
                "step": "semantic_classification",
                "status": "success",
                "query_type": "聚合查詢",
                "handling": "執行",
                "similarity": 1.0000000000000002,
                "matched": true
              },
              {
                "step": "llm_client_init",
                "status": "success",
                "provider": "None"
              },
              {
                "step": "build_prompt",
                "status": "success",
                "duration_ms": 0.03,
                "prompt_length": 4228
              },
              {
                "step": "llm_generate",
                "status": "success",
                "duration_ms": 2886.7,
                "raw_output_length": 56,
                "raw_output_preview": "SELECT SUM(img10)\nFROM img_file\nWHERE img01 = '10-0001';"
              },
              {
                "step": "extract_sql",
                "status": "success",
                "extracted_sql": "SELECT SUM(img10)\nFROM img_file\nWHERE img01 = '10-0001'"
              },
              {
                "step": "validate_sql",
                "status": "success",
                "validated_sql": "SELECT SUM(img10)\nFROM img_file\nWHERE img01 = '10-0001'",
                "warnings": [
                  "SQL 缺少 SELECT 子句",
                  "SQL 缺少 FROM 子句",
                  "建議使用參數化查詢以防止 SQL 注入"
                ]
              },
              {
                "step": "extract_parameters",
                "status": "success",
                "parameters": []
              },
              {
                "step": "calculate_confidence",
                "status": "success",
                "confidence": 0.7999999999999999
              }
            ],
            "total_duration_ms": 2887.42,
            "success": true
          }
        },
        "error": null,
        "metadata": null
      },
      "notes": []
    },
    {
      "scenario_id": "T2S-006",
      "category": "AVG 聚合",
      "passed": true,
      "duration_sec": 3.343,
      "expected_success": true,
      "actual_success": true,
      "error": null,
      "generated_sql": "SELECT img02, AVG(img10)\nFROM img_file\nWHERE img01 = '10-0001'\nGROUP BY img02",
      "result_summary": {
        "success": true,
        "action": "text_to_sql",
        "result": {
          "sql_query": "SELECT img02, AVG(img10)\nFROM img_file\nWHERE img01 = '10-0001'\nGROUP BY img02",
          "parameters": [],
          "confidence": 0.7999999999999999,
          "explanation": "將自然語言查詢「查詢料號 10-0001 在各倉庫的平均庫存量。」轉換為 SQL: SELECT img02, AVG(img10)\nFROM img_file\nWHERE img01 = '10-0001'\nGROUP BY img02...",
          "warnings": [
            "SQL 缺少 SELECT 子句",
            "SQL 缺少 FROM 子句",
            "建議使用參數化查詢以防止 SQL 注入"
          ],
          "conversion_log": {
            "timestamp": "2026-01-30T15:19:34.619306",
            "natural_language": "查詢料號 10-0001 在各倉庫的平均庫存量。",
            "database_type": "postgresql",
            "schema_info_provided": true,
            "steps": [
              {
                "step": "semantic_classification",
                "status": "success",
                "query_type": "聚合查詢",
                "handling": "執行",
                "similarity": 1.0000000000000002,
                "matched": true
              },
              {
                "step": "llm_client_init",
                "status": "success",
                "provider": "None"
              },
              {
                "step": "build_prompt",
                "status": "success",
                "duration_ms": 0.03,
                "prompt_length": 4233
              },
              {
                "step": "llm_generate",
                "status": "success",
                "duration_ms": 3229.07,
                "raw_output_length": 78,
                "raw_output_preview": "SELECT img02, AVG(img10)\nFROM img_file\nWHERE img01 = '10-0001'\nGROUP BY img02;"
              },
              {
                "step": "extract_sql",
                "status": "success",
                "extracted_sql": "SELECT img02, AVG(img10)\nFROM img_file\nWHERE img01 = '10-0001'\nGROUP BY img02"
              },
              {
                "step": "validate_sql",
                "status": "success",
                "validated_sql": "SELECT img02, AVG(img10)\nFROM img_file\nWHERE img01 = '10-0001'\nGROUP BY img02",
                "warnings": [
                  "SQL 缺少 SELECT 子句",
                  "SQL 缺少 FROM 子句",
                  "建議使用參數化查詢以防止 SQL 注入"
                ]
              },
              {
                "step": "extract_parameters",
                "status": "success",
                "parameters": []
              },
              {
                "step": "calculate_confidence",
                "status": "success",
                "confidence": 0.7999999999999999
              }
            ],
            "total_duration_ms": 3229.55,
            "success": true
          }
        },
        "error": null,
        "metadata": null
      },
      "notes": []
    },
    {
      "scenario_id": "T2S-007",
      "category": "MAX 聚合",
      "passed": true,
      "duration_sec": 3.154,
      "expected_success": true,
      "actual_success": true,
      "error": null,
      "generated_sql": "SELECT MAX(img10), img01 FROM img_file GROUP BY img01 ORDER BY MAX(img10) DESC LIMIT 1",
      "result_summary": {
        "success": true,
        "action": "text_to_sql",
        "result": {
          "sql_query": "SELECT MAX(img10), img01 FROM img_file GROUP BY img01 ORDER BY MAX(img10) DESC LIMIT 1",
          "parameters": [],
          "confidence": 0.7,
          "explanation": "將自然語言查詢「查詢庫存量最高的單筆記錄的數量。」轉換為 SQL: SELECT MAX(img10), img01 FROM img_file GROUP BY img01 ORDER BY MAX(img10) DESC LIMIT 1...",
          "warnings": [
            "SQL 缺少 SELECT 子句",
            "SQL 缺少 FROM 子句"
          ],
          "conversion_log": {
            "timestamp": "2026-01-30T15:19:37.962708",
            "natural_language": "查詢庫存量最高的單筆記錄的數量。",
            "database_type": "postgresql",
            "schema_info_provided": true,
            "steps": [
              {
                "step": "semantic_classification",
                "status": "success",
                "query_type": "聚合查詢",
                "handling": "執行",
                "similarity": 1.0000000000000002,
                "matched": true
              },
              {
                "step": "llm_client_init",
                "status": "success",
                "provider": "None"
              },
              {
                "step": "build_prompt",
                "status": "success",
                "duration_ms": 0.03,
                "prompt_length": 4225
              },
              {
                "step": "llm_generate",
                "status": "success",
                "duration_ms": 3043.92,
                "raw_output_length": 87,
                "raw_output_preview": "SELECT MAX(img10), img01 FROM img_file GROUP BY img01 ORDER BY MAX(img10) DESC LIMIT 1;"
              },
              {
                "step": "extract_sql",
                "status": "success",
                "extracted_sql": "SELECT MAX(img10), img01 FROM img_file GROUP BY img01 ORDER BY MAX(img10) DESC LIMIT 1"
              },
              {
                "step": "validate_sql",
                "status": "success",
                "validated_sql": "SELECT MAX(img10), img01 FROM img_file GROUP BY img01 ORDER BY MAX(img10) DESC LIMIT 1",
                "warnings": [
                  "SQL 缺少 SELECT 子句",
                  "SQL 缺少 FROM 子句"
                ]
              },
              {
                "step": "extract_parameters",
                "status": "success",
                "parameters": []
              },
              {
                "step": "calculate_confidence",
                "status": "success",
                "confidence": 0.7
              }
            ],
            "total_duration_ms": 3044.89,
            "success": true
          }
        },
        "error": null,
        "metadata": null
      },
      "notes": []
    },
    {
      "scenario_id": "T2S-008",
      "category": "MIN 聚合",
      "passed": true,
      "duration_sec": 3.1,
      "expected_success": true,
      "actual_success": true,
      "error": null,
      "generated_sql": "SELECT MIN(img10) FROM img_file",
      "result_summary": {
        "success": true,
        "action": "text_to_sql",
        "result": {
          "sql_query": "SELECT MIN(img10) FROM img_file",
          "parameters": [],
          "confidence": 0.7,
          "explanation": "將自然語言查詢「查詢庫存量最低的單筆記錄的數量。」轉換為 SQL: SELECT MIN(img10) FROM img_file...",
          "warnings": [
            "SQL 缺少 SELECT 子句",
            "SQL 缺少 FROM 子句"
          ],
          "conversion_log": {
            "timestamp": "2026-01-30T15:19:41.116639",
            "natural_language": "查詢庫存量最低的單筆記錄的數量。",
            "database_type": "postgresql",
            "schema_info_provided": true,
            "steps": [
              {
                "step": "semantic_classification",
                "status": "success",
                "query_type": "聚合查詢",
                "handling": "執行",
                "similarity": 1.0,
                "matched": true
              },
              {
                "step": "llm_client_init",
                "status": "success",
                "provider": "None"
              },
              {
                "step": "build_prompt",
                "status": "success",
                "duration_ms": 0.03,
                "prompt_length": 4225
              },
              {
                "step": "llm_generate",
                "status": "success",
                "duration_ms": 3011.73,
                "raw_output_length": 50,
                "raw_output_preview": "查詢庫存量最低的單筆記錄的數量。\n\nSELECT MIN(img10) FROM img_file;"
              },
              {
                "step": "extract_sql",
                "status": "success",
                "extracted_sql": "SELECT MIN(img10) FROM img_file"
              },
              {
                "step": "validate_sql",
                "status": "success",
                "validated_sql": "SELECT MIN(img10) FROM img_file",
                "warnings": [
                  "SQL 缺少 SELECT 子句",
                  "SQL 缺少 FROM 子句"
                ]
              },
              {
                "step": "extract_parameters",
                "status": "success",
                "parameters": []
              },
              {
                "step": "calculate_confidence",
                "status": "success",
                "confidence": 0.7
              }
            ],
            "total_duration_ms": 3012.04,
            "success": true
          }
        },
        "error": null,
        "metadata": null
      },
      "notes": []
    },
    {
      "scenario_id": "T2S-009",
      "category": "COUNT 聚合",
      "passed": true,
      "duration_sec": 2.926,
      "expected_success": true,
      "actual_success": true,
      "error": null,
      "generated_sql": "SELECT COUNT(*)\nFROM img_file\nWHERE img01 = '10-0001'",
      "result_summary": {
        "success": true,
        "action": "text_to_sql",
        "result": {
          "sql_query": "SELECT COUNT(*)\nFROM img_file\nWHERE img01 = '10-0001'",
          "parameters": [],
          "confidence": 0.7999999999999999,
          "explanation": "將自然語言查詢「統計料號 10-0001 的庫存記錄筆數。」轉換為 SQL: SELECT COUNT(*)\nFROM img_file\nWHERE img01 = '10-0001'...",
          "warnings": [
            "SQL 缺少 SELECT 子句",
            "SQL 缺少 FROM 子句",
            "建議使用參數化查詢以防止 SQL 注入"
          ],
          "conversion_log": {
            "timestamp": "2026-01-30T15:19:44.217136",
            "natural_language": "統計料號 10-0001 的庫存記錄筆數。",
            "database_type": "postgresql",
            "schema_info_provided": true,
            "steps": [
              {
                "step": "semantic_classification",
                "status": "success",
                "query_type": "聚合查詢",
                "handling": "執行",
                "similarity": 0.9999999999999998,
                "matched": true
              },
              {
                "step": "llm_client_init",
                "status": "success",
                "provider": "None"
              },
              {
                "step": "build_prompt",
                "status": "success",
                "duration_ms": 0.05,
                "prompt_length": 4230
              },
              {
                "step": "llm_generate",
                "status": "success",
                "duration_ms": 2821.74,
                "raw_output_length": 54,
                "raw_output_preview": "SELECT COUNT(*)\nFROM img_file\nWHERE img01 = '10-0001';"
              },
              {
                "step": "extract_sql",
                "status": "success",
                "extracted_sql": "SELECT COUNT(*)\nFROM img_file\nWHERE img01 = '10-0001'"
              },
              {
                "step": "validate_sql",
                "status": "success",
                "validated_sql": "SELECT COUNT(*)\nFROM img_file\nWHERE img01 = '10-0001'",
                "warnings": [
                  "SQL 缺少 SELECT 子句",
                  "SQL 缺少 FROM 子句",
                  "建議使用參數化查詢以防止 SQL 注入"
                ]
              },
              {
                "step": "extract_parameters",
                "status": "success",
                "parameters": []
              },
              {
                "step": "calculate_confidence",
                "status": "success",
                "confidence": 0.7999999999999999
              }
            ],
            "total_duration_ms": 2822.39,
            "success": true
          }
        },
        "error": null,
        "metadata": null
      },
      "notes": []
    },
    {
      "scenario_id": "T2S-010",
      "category": "GROUP BY 分組",
      "passed": true,
      "duration_sec": 2.841,
      "expected_success": true,
      "actual_success": true,
      "error": null,
      "generated_sql": "SELECT img02, SUM(img10)\nFROM img_file\nGROUP BY img02",
      "result_summary": {
        "success": true,
        "action": "text_to_sql",
        "result": {
          "sql_query": "SELECT img02, SUM(img10)\nFROM img_file\nGROUP BY img02",
          "parameters": [],
          "confidence": 0.7,
          "explanation": "將自然語言查詢「按倉庫統計總庫存量。」轉換為 SQL: SELECT img02, SUM(img10)\nFROM img_file\nGROUP BY img02...",
          "warnings": [
            "SQL 缺少 SELECT 子句",
            "SQL 缺少 FROM 子句"
          ],
          "conversion_log": {
            "timestamp": "2026-01-30T15:19:47.143108",
            "natural_language": "按倉庫統計總庫存量。",
            "database_type": "postgresql",
            "schema_info_provided": true,
            "steps": [
              {
                "step": "semantic_classification",
                "status": "success",
                "query_type": "分組查詢",
                "handling": "執行",
                "similarity": 1.0000000000000002,
                "matched": true
              },
              {
                "step": "llm_client_init",
                "status": "success",
                "provider": "None"
              },
              {
                "step": "build_prompt",
                "status": "success",
                "duration_ms": 0.03,
                "prompt_length": 4219
              },
              {
                "step": "llm_generate",
                "status": "success",
                "duration_ms": 2741.96,
                "raw_output_length": 54,
                "raw_output_preview": "SELECT img02, SUM(img10)\nFROM img_file\nGROUP BY img02;"
              },
              {
                "step": "extract_sql",
                "status": "success",
                "extracted_sql": "SELECT img02, SUM(img10)\nFROM img_file\nGROUP BY img02"
              },
              {
                "step": "validate_sql",
                "status": "success",
                "validated_sql": "SELECT img02, SUM(img10)\nFROM img_file\nGROUP BY img02",
                "warnings": [
                  "SQL 缺少 SELECT 子句",
                  "SQL 缺少 FROM 子句"
                ]
              },
              {
                "step": "extract_parameters",
                "status": "success",
                "parameters": []
              },
              {
                "step": "calculate_confidence",
                "status": "success",
                "confidence": 0.7
              }
            ],
            "total_duration_ms": 2742.61,
            "success": true
          }
        },
        "error": null,
        "metadata": null
      },
      "notes": []
    },
    {
      "scenario_id": "T2S-011",
      "category": "ORDER BY ASC 排序",
      "passed": true,
      "duration_sec": 3.187,
      "expected_success": true,
      "actual_success": true,
      "error": null,
      "generated_sql": "SELECT * FROM img_file ORDER BY img10 ASC",
      "result_summary": {
        "success": true,
        "action": "text_to_sql",
        "result": {
          "sql_query": "SELECT * FROM img_file ORDER BY img10 ASC",
          "parameters": [],
          "confidence": 0.7,
          "explanation": "將自然語言查詢「查詢庫存記錄，按庫存量由小到大排序。」轉換為 SQL: SELECT * FROM img_file ORDER BY img10 ASC...",
          "warnings": [
            "SQL 缺少 SELECT 子句",
            "SQL 缺少 FROM 子句"
          ],
          "conversion_log": {
            "timestamp": "2026-01-30T15:19:49.984246",
            "natural_language": "查詢庫存記錄，按庫存量由小到大排序。",
            "database_type": "postgresql",
            "schema_info_provided": true,
            "steps": [
              {
                "step": "semantic_classification",
                "status": "success",
                "query_type": "排序查詢",
                "handling": "執行",
                "similarity": 1.0,
                "matched": true
              },
              {
                "step": "llm_client_init",
                "status": "success",
                "provider": "None"
              },
              {
                "step": "build_prompt",
                "status": "success",
                "duration_ms": 0.04,
                "prompt_length": 4227
              },
              {
                "step": "llm_generate",
                "status": "success",
                "duration_ms": 3092.95,
                "raw_output_length": 61,
                "raw_output_preview": "查詢庫存記錄，按庫存量由小到大排序。\n\nSELECT * FROM img_file ORDER BY img10 ASC"
              },
              {
                "step": "extract_sql",
                "status": "success",
                "extracted_sql": "SELECT * FROM img_file ORDER BY img10 ASC"
              },
              {
                "step": "validate_sql",
                "status": "success",
                "validated_sql": "SELECT * FROM img_file ORDER BY img10 ASC",
                "warnings": [
                  "SQL 缺少 SELECT 子句",
                  "SQL 缺少 FROM 子句"
                ]
              },
              {
                "step": "extract_parameters",
                "status": "success",
                "parameters": []
              },
              {
                "step": "calculate_confidence",
                "status": "success",
                "confidence": 0.7
              }
            ],
            "total_duration_ms": 3093.41,
            "success": true
          }
        },
        "error": null,
        "metadata": null
      },
      "notes": []
    },
    {
      "scenario_id": "T2S-012",
      "category": "ORDER BY DESC 排序",
      "passed": true,
      "duration_sec": 3.194,
      "expected_success": true,
      "actual_success": true,
      "error": null,
      "generated_sql": "SELECT * FROM img_file ORDER BY img10 DESC",
      "result_summary": {
        "success": true,
        "action": "text_to_sql",
        "result": {
          "sql_query": "SELECT * FROM img_file ORDER BY img10 DESC",
          "parameters": [],
          "confidence": 0.7,
          "explanation": "將自然語言查詢「查詢庫存記錄，按庫存量由大到小排序。」轉換為 SQL: SELECT * FROM img_file ORDER BY img10 DESC...",
          "warnings": [
            "SQL 缺少 SELECT 子句",
            "SQL 缺少 FROM 子句"
          ],
          "conversion_log": {
            "timestamp": "2026-01-30T15:19:53.170886",
            "natural_language": "查詢庫存記錄，按庫存量由大到小排序。",
            "database_type": "postgresql",
            "schema_info_provided": true,
            "steps": [
              {
                "step": "semantic_classification",
                "status": "success",
                "query_type": "排序查詢",
                "handling": "執行",
                "similarity": 1.0000000000000002,
                "matched": true
              },
              {
                "step": "llm_client_init",
                "status": "success",
                "provider": "None"
              },
              {
                "step": "build_prompt",
                "status": "success",
                "duration_ms": 0.04,
                "prompt_length": 4227
              },
              {
                "step": "llm_generate",
                "status": "success",
                "duration_ms": 3078.12,
                "raw_output_length": 63,
                "raw_output_preview": "查詢庫存記錄，按庫存量由大到小排序。\n\nSELECT * FROM img_file ORDER BY img10 DESC;"
              },
              {
                "step": "extract_sql",
                "status": "success",
                "extracted_sql": "SELECT * FROM img_file ORDER BY img10 DESC"
              },
              {
                "step": "validate_sql",
                "status": "success",
                "validated_sql": "SELECT * FROM img_file ORDER BY img10 DESC",
                "warnings": [
                  "SQL 缺少 SELECT 子句",
                  "SQL 缺少 FROM 子句"
                ]
              },
              {
                "step": "extract_parameters",
                "status": "success",
                "parameters": []
              },
              {
                "step": "calculate_confidence",
                "status": "success",
                "confidence": 0.7
              }
            ],
            "total_duration_ms": 3078.57,
            "success": true
          }
        },
        "error": null,
        "metadata": null
      },
      "notes": []
    },
    {
      "scenario_id": "T2S-013",
      "category": "LIMIT 限制",
      "passed": true,
      "duration_sec": 2.492,
      "expected_success": true,
      "actual_success": true,
      "error": null,
      "generated_sql": "SELECT * FROM img_file LIMIT 10",
      "result_summary": {
        "success": true,
        "action": "text_to_sql",
        "result": {
          "sql_query": "SELECT * FROM img_file LIMIT 10",
          "parameters": [],
          "confidence": 0.7,
          "explanation": "將自然語言查詢「查詢前 10 筆庫存記錄。」轉換為 SQL: SELECT * FROM img_file LIMIT 10...",
          "warnings": [
            "SQL 缺少 SELECT 子句",
            "SQL 缺少 FROM 子句"
          ],
          "conversion_log": {
            "timestamp": "2026-01-30T15:19:56.365099",
            "natural_language": "查詢前 10 筆庫存記錄。",
            "database_type": "postgresql",
            "schema_info_provided": true,
            "steps": [
              {
                "step": "semantic_classification",
                "status": "success",
                "query_type": "限制查詢",
                "handling": "執行",
                "similarity": 1.0,
                "matched": true
              },
              {
                "step": "llm_client_init",
                "status": "success",
                "provider": "None"
              },
              {
                "step": "build_prompt",
                "status": "success",
                "duration_ms": 0.03,
                "prompt_length": 4222
              },
              {
                "step": "llm_generate",
                "status": "success",
                "duration_ms": 2403.11,
                "raw_output_length": 32,
                "raw_output_preview": "SELECT * FROM img_file LIMIT 10;"
              },
              {
                "step": "extract_sql",
                "status": "success",
                "extracted_sql": "SELECT * FROM img_file LIMIT 10"
              },
              {
                "step": "validate_sql",
                "status": "success",
                "validated_sql": "SELECT * FROM img_file LIMIT 10",
                "warnings": [
                  "SQL 缺少 SELECT 子句",
                  "SQL 缺少 FROM 子句"
                ]
              },
              {
                "step": "extract_parameters",
                "status": "success",
                "parameters": []
              },
              {
                "step": "calculate_confidence",
                "status": "success",
                "confidence": 0.7
              }
            ],
            "total_duration_ms": 2403.52,
            "success": true
          }
        },
        "error": null,
        "metadata": null
      },
      "notes": []
    },
    {
      "scenario_id": "T2S-014",
      "category": ">= 範圍過濾",
      "passed": true,
      "duration_sec": 2.678,
      "expected_success": true,
      "actual_success": true,
      "error": null,
      "generated_sql": "SELECT * FROM img_file WHERE img10 >= 100",
      "result_summary": {
        "success": true,
        "action": "text_to_sql",
        "result": {
          "sql_query": "SELECT * FROM img_file WHERE img10 >= 100",
          "parameters": [],
          "confidence": 0.7999999999999999,
          "explanation": "將自然語言查詢「查詢庫存量大於等於 100 的記錄。」轉換為 SQL: SELECT * FROM img_file WHERE img10 >= 100...",
          "warnings": [
            "SQL 缺少 SELECT 子句",
            "SQL 缺少 FROM 子句"
          ],
          "conversion_log": {
            "timestamp": "2026-01-30T15:19:58.857385",
            "natural_language": "查詢庫存量大於等於 100 的記錄。",
            "database_type": "postgresql",
            "schema_info_provided": true,
            "steps": [
              {
                "step": "semantic_classification",
                "status": "success",
                "query_type": "範圍查詢",
                "handling": "執行",
                "similarity": 1.0000000000000002,
                "matched": true
              },
              {
                "step": "llm_client_init",
                "status": "success",
                "provider": "None"
              },
              {
                "step": "build_prompt",
                "status": "success",
                "duration_ms": 0.03,
                "prompt_length": 4227
              },
              {
                "step": "llm_generate",
                "status": "success",
                "duration_ms": 2569.99,
                "raw_output_length": 42,
                "raw_output_preview": "SELECT * FROM img_file WHERE img10 >= 100;"
              },
              {
                "step": "extract_sql",
                "status": "success",
                "extracted_sql": "SELECT * FROM img_file WHERE img10 >= 100"
              },
              {
                "step": "validate_sql",
                "status": "success",
                "validated_sql": "SELECT * FROM img_file WHERE img10 >= 100",
                "warnings": [
                  "SQL 缺少 SELECT 子句",
                  "SQL 缺少 FROM 子句"
                ]
              },
              {
                "step": "extract_parameters",
                "status": "success",
                "parameters": []
              },
              {
                "step": "calculate_confidence",
                "status": "success",
                "confidence": 0.7999999999999999
              }
            ],
            "total_duration_ms": 2570.51,
            "success": true
          }
        },
        "error": null,
        "metadata": null
      },
      "notes": []
    },
    {
      "scenario_id": "T2S-015",
      "category": "<= 範圍過濾",
      "passed": true,
      "duration_sec": 3.333,
      "expected_success": true,
      "actual_success": true,
      "error": null,
      "generated_sql": "SELECT *\nFROM img_file\nWHERE img10 <= 500",
      "result_summary": {
        "success": true,
        "action": "text_to_sql",
        "result": {
          "sql_query": "SELECT *\nFROM img_file\nWHERE img10 <= 500",
          "parameters": [],
          "confidence": 0.7999999999999999,
          "explanation": "將自然語言查詢「查詢庫存量小於等於 500 的記錄。」轉換為 SQL: SELECT *\nFROM img_file\nWHERE img10 <= 500...",
          "warnings": [
            "SQL 缺少 SELECT 子句",
            "SQL 缺少 FROM 子句"
          ],
          "conversion_log": {
            "timestamp": "2026-01-30T15:20:01.535776",
            "natural_language": "查詢庫存量小於等於 500 的記錄。",
            "database_type": "postgresql",
            "schema_info_provided": true,
            "steps": [
              {
                "step": "semantic_classification",
                "status": "success",
                "query_type": "範圍查詢",
                "handling": "執行",
                "similarity": 1.0,
                "matched": true
              },
              {
                "step": "llm_client_init",
                "status": "success",
                "provider": "None"
              },
              {
                "step": "build_prompt",
                "status": "success",
                "duration_ms": 0.05,
                "prompt_length": 4227
              },
              {
                "step": "llm_generate",
                "status": "success",
                "duration_ms": 3215.75,
                "raw_output_length": 62,
                "raw_output_preview": "查詢庫存量小於等於 500 的記錄。\n\nSELECT *\nFROM img_file\nWHERE img10 <= 500;"
              },
              {
                "step": "extract_sql",
                "status": "success",
                "extracted_sql": "SELECT *\nFROM img_file\nWHERE img10 <= 500"
              },
              {
                "step": "validate_sql",
                "status": "success",
                "validated_sql": "SELECT *\nFROM img_file\nWHERE img10 <= 500",
                "warnings": [
                  "SQL 缺少 SELECT 子句",
                  "SQL 缺少 FROM 子句"
                ]
              },
              {
                "step": "extract_parameters",
                "status": "success",
                "parameters": []
              },
              {
                "step": "calculate_confidence",
                "status": "success",
                "confidence": 0.7999999999999999
              }
            ],
            "total_duration_ms": 3216.27,
            "success": true
          }
        },
        "error": null,
        "metadata": null
      },
      "notes": []
    },
    {
      "scenario_id": "T2S-016",
      "category": "BETWEEN 範圍過濾",
      "passed": true,
      "duration_sec": 2.911,
      "expected_success": true,
      "actual_success": true,
      "error": null,
      "generated_sql": "SELECT * FROM img_file WHERE img10 BETWEEN 100 AND 500",
      "result_summary": {
        "success": true,
        "action": "text_to_sql",
        "result": {
          "sql_query": "SELECT * FROM img_file WHERE img10 BETWEEN 100 AND 500",
          "parameters": [],
          "confidence": 0.7999999999999999,
          "explanation": "將自然語言查詢「查詢庫存量在 100 到 500 之間的記錄。」轉換為 SQL: SELECT * FROM img_file WHERE img10 BETWEEN 100 AND 500...",
          "warnings": [
            "SQL 缺少 SELECT 子句",
            "SQL 缺少 FROM 子句"
          ],
          "conversion_log": {
            "timestamp": "2026-01-30T15:20:04.868942",
            "natural_language": "查詢庫存量在 100 到 500 之間的記錄。",
            "database_type": "postgresql",
            "schema_info_provided": true,
            "steps": [
              {
                "step": "semantic_classification",
                "status": "success",
                "query_type": "範圍查詢",
                "handling": "執行",
                "similarity": 1.0,
                "matched": true
              },
              {
                "step": "llm_client_init",
                "status": "success",
                "provider": "None"
              },
              {
                "step": "build_prompt",
                "status": "success",
                "duration_ms": 0.04,
                "prompt_length": 4232
              },
              {
                "step": "llm_generate",
                "status": "success",
                "duration_ms": 2805.73,
                "raw_output_length": 55,
                "raw_output_preview": "SELECT * FROM img_file WHERE img10 BETWEEN 100 AND 500;"
              },
              {
                "step": "extract_sql",
                "status": "success",
                "extracted_sql": "SELECT * FROM img_file WHERE img10 BETWEEN 100 AND 500"
              },
              {
                "step": "validate_sql",
                "status": "success",
                "validated_sql": "SELECT * FROM img_file WHERE img10 BETWEEN 100 AND 500",
                "warnings": [
                  "SQL 缺少 SELECT 子句",
                  "SQL 缺少 FROM 子句"
                ]
              },
              {
                "step": "extract_parameters",
                "status": "success",
                "parameters": []
              },
              {
                "step": "calculate_confidence",
                "status": "success",
                "confidence": 0.7999999999999999
              }
            ],
            "total_duration_ms": 2806.3,
            "success": true
          }
        },
        "error": null,
        "metadata": null
      },
      "notes": []
    },
    {
      "scenario_id": "T2S-017",
      "category": "當月數據查詢",
      "passed": true,
      "duration_sec": 3.158,
      "expected_success": true,
      "actual_success": true,
      "error": null,
      "generated_sql": "SELECT * FROM tlf_file WHERE EXTRACT(MONTH FROM tlf06) = EXTRACT(MONTH FROM CURRENT_DATE)",
      "result_summary": {
        "success": true,
        "action": "text_to_sql",
        "result": {
          "sql_query": "SELECT * FROM tlf_file WHERE EXTRACT(MONTH FROM tlf06) = EXTRACT(MONTH FROM CURRENT_DATE)",
          "parameters": [],
          "confidence": 0.7999999999999999,
          "explanation": "將自然語言查詢「查詢當月的交易記錄。」轉換為 SQL: SELECT * FROM tlf_file WHERE EXTRACT(MONTH FROM tlf06) = EXTRACT(MONTH FROM CURRENT_DATE)...",
          "warnings": [
            "SQL 缺少 SELECT 子句",
            "SQL 缺少 FROM 子句"
          ],
          "conversion_log": {
            "timestamp": "2026-01-30T15:20:07.779560",
            "natural_language": "查詢當月的交易記錄。",
            "database_type": "postgresql",
            "schema_info_provided": true,
            "steps": [
              {
                "step": "semantic_classification",
                "status": "success",
                "query_type": "日期查詢",
                "handling": "執行",
                "similarity": 1.0000000000000002,
                "matched": true
              },
              {
                "step": "llm_client_init",
                "status": "success",
                "provider": "None"
              },
              {
                "step": "build_prompt",
                "status": "success",
                "duration_ms": 0.04,
                "prompt_length": 4219
              },
              {
                "step": "llm_generate",
                "status": "success",
                "duration_ms": 3049.83,
                "raw_output_length": 90,
                "raw_output_preview": "SELECT * FROM tlf_file WHERE EXTRACT(MONTH FROM tlf06) = EXTRACT(MONTH FROM CURRENT_DATE);"
              },
              {
                "step": "extract_sql",
                "status": "success",
                "extracted_sql": "SELECT * FROM tlf_file WHERE EXTRACT(MONTH FROM tlf06) = EXTRACT(MONTH FROM CURRENT_DATE)"
              },
              {
                "step": "validate_sql",
                "status": "success",
                "validated_sql": "SELECT * FROM tlf_file WHERE EXTRACT(MONTH FROM tlf06) = EXTRACT(MONTH FROM CURRENT_DATE)",
                "warnings": [
                  "SQL 缺少 SELECT 子句",
                  "SQL 缺少 FROM 子句"
                ]
              },
              {
                "step": "extract_parameters",
                "status": "success",
                "parameters": []
              },
              {
                "step": "calculate_confidence",
                "status": "success",
                "confidence": 0.7999999999999999
              }
            ],
            "total_duration_ms": 3050.75,
            "success": true
          }
        },
        "error": null,
        "metadata": null
      },
      "notes": []
    },
    {
      "scenario_id": "T2S-018",
      "category": "大數據量查詢（1000 筆）",
      "passed": true,
      "duration_sec": 2.618,
      "expected_success": true,
      "actual_success": true,
      "error": null,
      "generated_sql": "SELECT * FROM img_file LIMIT 1000",
      "result_summary": {
        "success": true,
        "action": "text_to_sql",
        "result": {
          "sql_query": "SELECT * FROM img_file LIMIT 1000",
          "parameters": [],
          "confidence": 0.7,
          "explanation": "將自然語言查詢「查詢庫存表前 1000 筆記錄。」轉換為 SQL: SELECT * FROM img_file LIMIT 1000...",
          "warnings": [
            "SQL 缺少 SELECT 子句",
            "SQL 缺少 FROM 子句"
          ],
          "conversion_log": {
            "timestamp": "2026-01-30T15:20:10.937297",
            "natural_language": "查詢庫存表前 1000 筆記錄。",
            "database_type": "postgresql",
            "schema_info_provided": true,
            "steps": [
              {
                "step": "semantic_classification",
                "status": "success",
                "query_type": "限制查詢",
                "handling": "執行",
                "similarity": 1.0,
                "matched": true
              },
              {
                "step": "llm_client_init",
                "status": "success",
                "provider": "None"
              },
              {
                "step": "build_prompt",
                "status": "success",
                "duration_ms": 0.04,
                "prompt_length": 4225
              },
              {
                "step": "llm_generate",
                "status": "success",
                "duration_ms": 2500.13,
                "raw_output_length": 34,
                "raw_output_preview": "SELECT * FROM img_file LIMIT 1000;"
              },
              {
                "step": "extract_sql",
                "status": "success",
                "extracted_sql": "SELECT * FROM img_file LIMIT 1000"
              },
              {
                "step": "validate_sql",
                "status": "success",
                "validated_sql": "SELECT * FROM img_file LIMIT 1000",
                "warnings": [
                  "SQL 缺少 SELECT 子句",
                  "SQL 缺少 FROM 子句"
                ]
              },
              {
                "step": "extract_parameters",
                "status": "success",
                "parameters": []
              },
              {
                "step": "calculate_confidence",
                "status": "success",
                "confidence": 0.7
              }
            ],
            "total_duration_ms": 2500.53,
            "success": true
          }
        },
        "error": null,
        "metadata": null
      },
      "notes": []
    },
    {
      "scenario_id": "T2S-019",
      "category": "複雜查詢（WHERE + GROUP BY + ORDER BY）",
      "passed": true,
      "duration_sec": 3.703,
      "expected_success": true,
      "actual_success": true,
      "error": null,
      "generated_sql": "SELECT img01, SUM(img10)\nFROM img_file\nWHERE img10 >= 100\nGROUP BY img01\nORDER BY SUM(img10) DESC\nLIMIT 5",
      "result_summary": {
        "success": true,
        "action": "text_to_sql",
        "result": {
          "sql_query": "SELECT img01, SUM(img10)\nFROM img_file\nWHERE img10 >= 100\nGROUP BY img01\nORDER BY SUM(img10) DESC\nLIMIT 5",
          "parameters": [],
          "confidence": 0.7999999999999999,
          "explanation": "將自然語言查詢「查詢庫存量≥100 的料號，按料號分組加總庫存，再按總量由高到低排序取前 5 筆。」轉換為 SQL: SELECT img01, SUM(img10)\nFROM img_file\nWHERE img10 >= 100\nGROUP BY img01\nORDER BY SUM(img10) DESC\nLI...",
          "warnings": [
            "SQL 缺少 SELECT 子句",
            "SQL 缺少 FROM 子句"
          ],
          "conversion_log": {
            "timestamp": "2026-01-30T15:20:13.554936",
            "natural_language": "查詢庫存量≥100 的料號，按料號分組加總庫存，再按總量由高到低排序取前 5 筆。",
            "database_type": "postgresql",
            "schema_info_provided": true,
            "steps": [
              {
                "step": "semantic_classification",
                "status": "success",
                "query_type": "複雜查詢",
                "handling": "執行",
                "similarity": 1.0,
                "matched": true
              },
              {
                "step": "llm_client_init",
                "status": "success",
                "provider": "None"
              },
              {
                "step": "build_prompt",
                "status": "success",
                "duration_ms": 0.04,
                "prompt_length": 4250
              },
              {
                "step": "llm_generate",
                "status": "success",
                "duration_ms": 3595.58,
                "raw_output_length": 106,
                "raw_output_preview": "SELECT img01, SUM(img10)\nFROM img_file\nWHERE img10 >= 100\nGROUP BY img01\nORDER BY SUM(img10) DESC\nLIMIT 5;"
              },
              {
                "step": "extract_sql",
                "status": "success",
                "extracted_sql": "SELECT img01, SUM(img10)\nFROM img_file\nWHERE img10 >= 100\nGROUP BY img01\nORDER BY SUM(img10) DESC\nLIMIT 5"
              },
              {
                "step": "validate_sql",
                "status": "success",
                "validated_sql": "SELECT img01, SUM(img10)\nFROM img_file\nWHERE img10 >= 100\nGROUP BY img01\nORDER BY SUM(img10) DESC\nLIMIT 5",
                "warnings": [
                  "SQL 缺少 SELECT 子句",
                  "SQL 缺少 FROM 子句"
                ]
              },
              {
                "step": "extract_parameters",
                "status": "success",
                "parameters": []
              },
              {
                "step": "calculate_confidence",
                "status": "success",
                "confidence": 0.7999999999999999
              }
            ],
            "total_duration_ms": 3596.68,
            "success": true
          }
        },
        "error": null,
        "metadata": null
      },
      "notes": []
    },
    {
      "scenario_id": "T2S-020",
      "category": "多條件查詢",
      "passed": true,
      "duration_sec": 4.581,
      "expected_success": true,
      "actual_success": true,
      "error": null,
      "generated_sql": "SELECT *\nFROM img_file\nWHERE img01 = '10-0001'\nAND img02 = 'W01'\nAND img10 > 50",
      "result_summary": {
        "success": true,
        "action": "text_to_sql",
        "result": {
          "sql_query": "SELECT *\nFROM img_file\nWHERE img01 = '10-0001'\nAND img02 = 'W01'\nAND img10 > 50",
          "parameters": [],
          "confidence": 0.7999999999999999,
          "explanation": "將自然語言查詢「查詢料號 10-0001、倉庫 W01、庫存量大於 50 的記錄。」轉換為 SQL: SELECT *\nFROM img_file\nWHERE img01 = '10-0001'\nAND img02 = 'W01'\nAND img10 > 50...",
          "warnings": [
            "SQL 缺少 SELECT 子句",
            "SQL 缺少 FROM 子句",
            "建議使用參數化查詢以防止 SQL 注入"
          ],
          "conversion_log": {
            "timestamp": "2026-01-30T15:20:17.257987",
            "natural_language": "查詢料號 10-0001、倉庫 W01、庫存量大於 50 的記錄。",
            "database_type": "postgresql",
            "schema_info_provided": true,
            "steps": [
              {
                "step": "semantic_classification",
                "status": "success",
                "query_type": "複雜查詢",
                "handling": "執行",
                "similarity": 1.0,
                "matched": true
              },
              {
                "step": "llm_client_init",
                "status": "success",
                "provider": "None"
              },
              {
                "step": "build_prompt",
                "status": "success",
                "duration_ms": 0.03,
                "prompt_length": 4242
              },
              {
                "step": "llm_generate",
                "status": "success",
                "duration_ms": 4458.5,
                "raw_output_length": 115,
                "raw_output_preview": "查詢料號 10-0001、倉庫 W01、庫存量大於 50 的記錄。\n\nSELECT *\nFROM img_file\nWHERE img01 = '10-0001'\nAND img02 = 'W01'\nAND img10 > 50;"
              },
              {
                "step": "extract_sql",
                "status": "success",
                "extracted_sql": "SELECT *\nFROM img_file\nWHERE img01 = '10-0001'\nAND img02 = 'W01'\nAND img10 > 50"
              },
              {
                "step": "validate_sql",
                "status": "success",
                "validated_sql": "SELECT *\nFROM img_file\nWHERE img01 = '10-0001'\nAND img02 = 'W01'\nAND img10 > 50",
                "warnings": [
                  "SQL 缺少 SELECT 子句",
                  "SQL 缺少 FROM 子句",
                  "建議使用參數化查詢以防止 SQL 注入"
                ]
              },
              {
                "step": "extract_parameters",
                "status": "success",
                "parameters": []
              },
              {
                "step": "calculate_confidence",
                "status": "success",
                "confidence": 0.7999999999999999
              }
            ],
            "total_duration_ms": 4458.95,
            "success": true
          }
        },
        "error": null,
        "metadata": null
      },
      "notes": []
    },
    {
      "scenario_id": "T2S-021",
      "category": "Top N 料號查詢",
      "passed": true,
      "duration_sec": 3.92,
      "expected_success": true,
      "actual_success": true,
      "error": null,
      "generated_sql": "SELECT ima01, SUM(img10)\nFROM ima_file\nJOIN img_file ON ima_file.ima01 = img_file.img01\nGROUP BY ima01\nORDER BY SUM(img10) DESC\nLIMIT 5",
      "result_summary": {
        "success": true,
        "action": "text_to_sql",
        "result": {
          "sql_query": "SELECT ima01, SUM(img10)\nFROM ima_file\nJOIN img_file ON ima_file.ima01 = img_file.img01\nGROUP BY ima01\nORDER BY SUM(img10) DESC\nLIMIT 5",
          "parameters": [],
          "confidence": 0.7,
          "explanation": "將自然語言查詢「查詢庫存總量前 5 名的料號。」轉換為 SQL: SELECT ima01, SUM(img10)\nFROM ima_file\nJOIN img_file ON ima_file.ima01 = img_file.img01\nGROUP BY ima...",
          "warnings": [
            "SQL 缺少 SELECT 子句",
            "SQL 缺少 FROM 子句"
          ],
          "conversion_log": {
            "timestamp": "2026-01-30T15:20:21.839040",
            "natural_language": "查詢庫存總量前 5 名的料號。",
            "database_type": "postgresql",
            "schema_info_provided": true,
            "steps": [
              {
                "step": "semantic_classification",
                "status": "success",
                "query_type": "Top N 查詢",
                "handling": "執行",
                "similarity": 0.9999999999999998,
                "matched": true
              },
              {
                "step": "llm_client_init",
                "status": "success",
                "provider": "None"
              },
              {
                "step": "build_prompt",
                "status": "success",
                "duration_ms": 0.04,
                "prompt_length": 4224
              },
              {
                "step": "llm_generate",
                "status": "success",
                "duration_ms": 3816.52,
                "raw_output_length": 136,
                "raw_output_preview": "SELECT ima01, SUM(img10)\nFROM ima_file\nJOIN img_file ON ima_file.ima01 = img_file.img01\nGROUP BY ima01\nORDER BY SUM(img10) DESC\nLIMIT 5;"
              },
              {
                "step": "extract_sql",
                "status": "success",
                "extracted_sql": "SELECT ima01, SUM(img10)\nFROM ima_file\nJOIN img_file ON ima_file.ima01 = img_file.img01\nGROUP BY ima01\nORDER BY SUM(img10) DESC\nLIMIT 5"
              },
              {
                "step": "validate_sql",
                "status": "success",
                "validated_sql": "SELECT ima01, SUM(img10)\nFROM ima_file\nJOIN img_file ON ima_file.ima01 = img_file.img01\nGROUP BY ima01\nORDER BY SUM(img10) DESC\nLIMIT 5",
                "warnings": [
                  "SQL 缺少 SELECT 子句",
                  "SQL 缺少 FROM 子句"
                ]
              },
              {
                "step": "extract_parameters",
                "status": "success",
                "parameters": []
              },
              {
                "step": "calculate_confidence",
                "status": "success",
                "confidence": 0.7
              }
            ],
            "total_duration_ms": 3817.19,
            "success": true
          }
        },
        "error": null,
        "metadata": null
      },
      "notes": []
    },
    {
      "scenario_id": "T2S-022",
      "category": "Bottom N 料號查詢",
      "passed": true,
      "duration_sec": 3.322,
      "expected_success": true,
      "actual_success": true,
      "error": null,
      "generated_sql": "SELECT img01, SUM(img10)\nFROM img_file\nGROUP BY img01\nORDER BY SUM(img10) ASC\nLIMIT 5",
      "result_summary": {
        "success": true,
        "action": "text_to_sql",
        "result": {
          "sql_query": "SELECT img01, SUM(img10)\nFROM img_file\nGROUP BY img01\nORDER BY SUM(img10) ASC\nLIMIT 5",
          "parameters": [],
          "confidence": 0.7,
          "explanation": "將自然語言查詢「查詢庫存總量最低的 5 個料號。」轉換為 SQL: SELECT img01, SUM(img10)\nFROM img_file\nGROUP BY img01\nORDER BY SUM(img10) ASC\nLIMIT 5...",
          "warnings": [
            "SQL 缺少 SELECT 子句",
            "SQL 缺少 FROM 子句"
          ],
          "conversion_log": {
            "timestamp": "2026-01-30T15:20:25.759170",
            "natural_language": "查詢庫存總量最低的 5 個料號。",
            "database_type": "postgresql",
            "schema_info_provided": true,
            "steps": [
              {
                "step": "semantic_classification",
                "status": "success",
                "query_type": "Bottom N 查詢",
                "handling": "執行",
                "similarity": 1.0,
                "matched": true
              },
              {
                "step": "llm_client_init",
                "status": "success",
                "provider": "None"
              },
              {
                "step": "build_prompt",
                "status": "success",
                "duration_ms": 0.03,
                "prompt_length": 4225
              },
              {
                "step": "llm_generate",
                "status": "success",
                "duration_ms": 3218.78,
                "raw_output_length": 86,
                "raw_output_preview": "SELECT img01, SUM(img10)\nFROM img_file\nGROUP BY img01\nORDER BY SUM(img10) ASC\nLIMIT 5;"
              },
              {
                "step": "extract_sql",
                "status": "success",
                "extracted_sql": "SELECT img01, SUM(img10)\nFROM img_file\nGROUP BY img01\nORDER BY SUM(img10) ASC\nLIMIT 5"
              },
              {
                "step": "validate_sql",
                "status": "success",
                "validated_sql": "SELECT img01, SUM(img10)\nFROM img_file\nGROUP BY img01\nORDER BY SUM(img10) ASC\nLIMIT 5",
                "warnings": [
                  "SQL 缺少 SELECT 子句",
                  "SQL 缺少 FROM 子句"
                ]
              },
              {
                "step": "extract_parameters",
                "status": "success",
                "parameters": []
              },
              {
                "step": "calculate_confidence",
                "status": "success",
                "confidence": 0.7
              }
            ],
            "total_duration_ms": 3219.3,
            "success": true
          }
        },
        "error": null,
        "metadata": null
      },
      "notes": []
    },
    {
      "scenario_id": "T2S-023",
      "category": "LIKE 模糊查詢",
      "passed": true,
      "duration_sec": 3.361,
      "expected_success": true,
      "actual_success": true,
      "error": null,
      "generated_sql": "SELECT * FROM ima_file WHERE ima01 LIKE '10-%'",
      "result_summary": {
        "success": true,
        "action": "text_to_sql",
        "result": {
          "sql_query": "SELECT * FROM ima_file WHERE ima01 LIKE '10-%'",
          "parameters": [],
          "confidence": 0.7999999999999999,
          "explanation": "將自然語言查詢「查詢料號開頭為 10- 的物料主檔。」轉換為 SQL: SELECT * FROM ima_file WHERE ima01 LIKE '10-%'...",
          "warnings": [
            "SQL 缺少 SELECT 子句",
            "SQL 缺少 FROM 子句",
            "建議使用參數化查詢以防止 SQL 注入"
          ],
          "conversion_log": {
            "timestamp": "2026-01-30T15:20:29.080735",
            "natural_language": "查詢料號開頭為 10- 的物料主檔。",
            "database_type": "postgresql",
            "schema_info_provided": true,
            "steps": [
              {
                "step": "semantic_classification",
                "status": "success",
                "query_type": "模糊查詢",
                "handling": "執行",
                "similarity": 1.0000000000000002,
                "matched": true
              },
              {
                "step": "llm_client_init",
                "status": "success",
                "provider": "None"
              },
              {
                "step": "build_prompt",
                "status": "success",
                "duration_ms": 0.03,
                "prompt_length": 4227
              },
              {
                "step": "llm_generate",
                "status": "success",
                "duration_ms": 3240.05,
                "raw_output_length": 67,
                "raw_output_preview": "查詢料號開頭為 10- 的物料主檔。\n\nSELECT * FROM ima_file WHERE ima01 LIKE '10-%';"
              },
              {
                "step": "extract_sql",
                "status": "success",
                "extracted_sql": "SELECT * FROM ima_file WHERE ima01 LIKE '10-%'"
              },
              {
                "step": "validate_sql",
                "status": "success",
                "validated_sql": "SELECT * FROM ima_file WHERE ima01 LIKE '10-%'",
                "warnings": [
                  "SQL 缺少 SELECT 子句",
                  "SQL 缺少 FROM 子句",
                  "建議使用參數化查詢以防止 SQL 注入"
                ]
              },
              {
                "step": "extract_parameters",
                "status": "success",
                "parameters": []
              },
              {
                "step": "calculate_confidence",
                "status": "success",
                "confidence": 0.7999999999999999
              }
            ],
            "total_duration_ms": 3240.58,
            "success": true
          }
        },
        "error": null,
        "metadata": null
      },
      "notes": []
    },
    {
      "scenario_id": "T2S-024",
      "category": "空結果處理",
      "passed": true,
      "duration_sec": 3.503,
      "expected_success": true,
      "actual_success": true,
      "error": null,
      "generated_sql": "SELECT * FROM img_file WHERE img01 = '不存在的料號-XYZ'",
      "result_summary": {
        "success": true,
        "action": "text_to_sql",
        "result": {
          "sql_query": "SELECT * FROM img_file WHERE img01 = '不存在的料號-XYZ'",
          "parameters": [],
          "confidence": 0.7999999999999999,
          "explanation": "將自然語言查詢「查詢料號為「不存在的料號-XYZ」的庫存。」轉換為 SQL: SELECT * FROM img_file WHERE img01 = '不存在的料號-XYZ'...",
          "warnings": [
            "SQL 缺少 SELECT 子句",
            "SQL 缺少 FROM 子句",
            "建議使用參數化查詢以防止 SQL 注入"
          ],
          "conversion_log": {
            "timestamp": "2026-01-30T15:20:32.442180",
            "natural_language": "查詢料號為「不存在的料號-XYZ」的庫存。",
            "database_type": "postgresql",
            "schema_info_provided": true,
            "steps": [
              {
                "step": "semantic_classification",
                "status": "success",
                "query_type": "簡單查詢",
                "handling": "執行",
                "similarity": 1.0000000000000002,
                "matched": true
              },
              {
                "step": "llm_client_init",
                "status": "success",
                "provider": "None"
              },
              {
                "step": "build_prompt",
                "status": "success",
                "duration_ms": 0.04,
                "prompt_length": 4230
              },
              {
                "step": "llm_generate",
                "status": "success",
                "duration_ms": 3404.27,
                "raw_output_length": 73,
                "raw_output_preview": "查詢料號為「不存在的料號-XYZ」的庫存。\n\nSELECT * FROM img_file WHERE img01 = '不存在的料號-XYZ';"
              },
              {
                "step": "extract_sql",
                "status": "success",
                "extracted_sql": "SELECT * FROM img_file WHERE img01 = '不存在的料號-XYZ'"
              },
              {
                "step": "validate_sql",
                "status": "success",
                "validated_sql": "SELECT * FROM img_file WHERE img01 = '不存在的料號-XYZ'",
                "warnings": [
                  "SQL 缺少 SELECT 子句",
                  "SQL 缺少 FROM 子句",
                  "建議使用參數化查詢以防止 SQL 注入"
                ]
              },
              {
                "step": "extract_parameters",
                "status": "success",
                "parameters": []
              },
              {
                "step": "calculate_confidence",
                "status": "success",
                "confidence": 0.7999999999999999
              }
            ],
            "total_duration_ms": 3404.83,
            "success": true
          }
        },
        "error": null,
        "metadata": null
      },
      "notes": []
    },
    {
      "scenario_id": "T2S-025",
      "category": "DISTINCT",
      "passed": true,
      "duration_sec": 2.504,
      "expected_success": true,
      "actual_success": true,
      "error": null,
      "generated_sql": "SELECT DISTINCT img01 FROM img_file",
      "result_summary": {
        "success": true,
        "action": "text_to_sql",
        "result": {
          "sql_query": "SELECT DISTINCT img01 FROM img_file",
          "parameters": [],
          "confidence": 0.7,
          "explanation": "將自然語言查詢「查詢有庫存記錄的不重複料號列表。」轉換為 SQL: SELECT DISTINCT img01 FROM img_file...",
          "warnings": [
            "SQL 缺少 SELECT 子句",
            "SQL 缺少 FROM 子句"
          ],
          "conversion_log": {
            "timestamp": "2026-01-30T15:20:35.945578",
            "natural_language": "查詢有庫存記錄的不重複料號列表。",
            "database_type": "postgresql",
            "schema_info_provided": true,
            "steps": [
              {
                "step": "semantic_classification",
                "status": "success",
                "query_type": "DISTINCT 查詢",
                "handling": "執行",
                "similarity": 0.9999999999999999,
                "matched": true
              },
              {
                "step": "llm_client_init",
                "status": "success",
                "provider": "None"
              },
              {
                "step": "build_prompt",
                "status": "success",
                "duration_ms": 0.03,
                "prompt_length": 4225
              },
              {
                "step": "llm_generate",
                "status": "success",
                "duration_ms": 2411.26,
                "raw_output_length": 36,
                "raw_output_preview": "SELECT DISTINCT img01 FROM img_file;"
              },
              {
                "step": "extract_sql",
                "status": "success",
                "extracted_sql": "SELECT DISTINCT img01 FROM img_file"
              },
              {
                "step": "validate_sql",
                "status": "success",
                "validated_sql": "SELECT DISTINCT img01 FROM img_file",
                "warnings": [
                  "SQL 缺少 SELECT 子句",
                  "SQL 缺少 FROM 子句"
                ]
              },
              {
                "step": "extract_parameters",
                "status": "success",
                "parameters": []
              },
              {
                "step": "calculate_confidence",
                "status": "success",
                "confidence": 0.7
              }
            ],
            "total_duration_ms": 2411.65,
            "success": true
          }
        },
        "error": null,
        "metadata": null
      },
      "notes": []
    },
    {
      "scenario_id": "T2S-026",
      "category": "HAVING 條件",
      "passed": true,
      "duration_sec": 3.335,
      "expected_success": true,
      "actual_success": true,
      "error": null,
      "generated_sql": "SELECT img01, SUM(img10)\nFROM img_file\nGROUP BY img01\nHAVING SUM(img10) > 1000",
      "result_summary": {
        "success": true,
        "action": "text_to_sql",
        "result": {
          "sql_query": "SELECT img01, SUM(img10)\nFROM img_file\nGROUP BY img01\nHAVING SUM(img10) > 1000",
          "parameters": [],
          "confidence": 0.7,
          "explanation": "將自然語言查詢「查詢總庫存量超過 1000 的料號。」轉換為 SQL: SELECT img01, SUM(img10)\nFROM img_file\nGROUP BY img01\nHAVING SUM(img10) > 1000...",
          "warnings": [
            "SQL 缺少 SELECT 子句",
            "SQL 缺少 FROM 子句"
          ],
          "conversion_log": {
            "timestamp": "2026-01-30T15:20:38.449560",
            "natural_language": "查詢總庫存量超過 1000 的料號。",
            "database_type": "postgresql",
            "schema_info_provided": true,
            "steps": [
              {
                "step": "semantic_classification",
                "status": "success",
                "query_type": "聚合+分組查詢",
                "handling": "執行",
                "similarity": 1.0,
                "matched": true
              },
              {
                "step": "llm_client_init",
                "status": "success",
                "provider": "None"
              },
              {
                "step": "build_prompt",
                "status": "success",
                "duration_ms": 0.05,
                "prompt_length": 4227
              },
              {
                "step": "llm_generate",
                "status": "success",
                "duration_ms": 3223.33,
                "raw_output_length": 79,
                "raw_output_preview": "SELECT img01, SUM(img10)\nFROM img_file\nGROUP BY img01\nHAVING SUM(img10) > 1000;"
              },
              {
                "step": "extract_sql",
                "status": "success",
                "extracted_sql": "SELECT img01, SUM(img10)\nFROM img_file\nGROUP BY img01\nHAVING SUM(img10) > 1000"
              },
              {
                "step": "validate_sql",
                "status": "success",
                "validated_sql": "SELECT img01, SUM(img10)\nFROM img_file\nGROUP BY img01\nHAVING SUM(img10) > 1000",
                "warnings": [
                  "SQL 缺少 SELECT 子句",
                  "SQL 缺少 FROM 子句"
                ]
              },
              {
                "step": "extract_parameters",
                "status": "success",
                "parameters": []
              },
              {
                "step": "calculate_confidence",
                "status": "success",
                "confidence": 0.7
              }
            ],
            "total_duration_ms": 3224.24,
            "success": true
          }
        },
        "error": null,
        "metadata": null
      },
      "notes": []
    },
    {
      "scenario_id": "T2S-027",
      "category": "多表語義（若支援）",
      "passed": true,
      "duration_sec": 4.64,
      "expected_success": true,
      "actual_success": true,
      "error": null,
      "generated_sql": "SELECT ima02, SUM(img10) FROM ima_file JOIN img_file ON ima_file.ima01 = img_file.img01 WHERE ima_file.ima01 = '10-0001' GROUP BY ima02",
      "result_summary": {
        "success": true,
        "action": "text_to_sql",
        "result": {
          "sql_query": "SELECT ima02, SUM(img10) FROM ima_file JOIN img_file ON ima_file.ima01 = img_file.img01 WHERE ima_file.ima01 = '10-0001' GROUP BY ima02",
          "parameters": [],
          "confidence": 0.7999999999999999,
          "explanation": "將自然語言查詢「查詢料號 10-0001 的品名與其總庫存量。」轉換為 SQL: SELECT ima02, SUM(img10) FROM ima_file JOIN img_file ON ima_file.ima01 = img_file.img01 WHERE ima_fi...",
          "warnings": [
            "SQL 缺少 SELECT 子句",
            "SQL 缺少 FROM 子句",
            "建議使用參數化查詢以防止 SQL 注入"
          ],
          "conversion_log": {
            "timestamp": "2026-01-30T15:20:41.784120",
            "natural_language": "查詢料號 10-0001 的品名與其總庫存量。",
            "database_type": "postgresql",
            "schema_info_provided": true,
            "steps": [
              {
                "step": "semantic_classification",
                "status": "success",
                "query_type": "多表查詢",
                "handling": "執行",
                "similarity": 1.0000000000000002,
                "matched": true
              },
              {
                "step": "llm_client_init",
                "status": "success",
                "provider": "None"
              },
              {
                "step": "build_prompt",
                "status": "success",
                "duration_ms": 0.03,
                "prompt_length": 4232
              },
              {
                "step": "llm_generate",
                "status": "success",
                "duration_ms": 4542.03,
                "raw_output_length": 161,
                "raw_output_preview": "查詢料號 10-0001 的品名與其總庫存量。\n\nSELECT ima02, SUM(img10) FROM ima_file JOIN img_file ON ima_file.ima01 = img_file.img01 WHERE ima_file.ima01 = '10-0001' GROUP BY ima02;"
              },
              {
                "step": "extract_sql",
                "status": "success",
                "extracted_sql": "SELECT ima02, SUM(img10) FROM ima_file JOIN img_file ON ima_file.ima01 = img_file.img01 WHERE ima_file.ima01 = '10-0001' GROUP BY ima02"
              },
              {
                "step": "validate_sql",
                "status": "success",
                "validated_sql": "SELECT ima02, SUM(img10) FROM ima_file JOIN img_file ON ima_file.ima01 = img_file.img01 WHERE ima_file.ima01 = '10-0001' GROUP BY ima02",
                "warnings": [
                  "SQL 缺少 SELECT 子句",
                  "SQL 缺少 FROM 子句",
                  "建議使用參數化查詢以防止 SQL 注入"
                ]
              },
              {
                "step": "extract_parameters",
                "status": "success",
                "parameters": []
              },
              {
                "step": "calculate_confidence",
                "status": "success",
                "confidence": 0.7999999999999999
              }
            ],
            "total_duration_ms": 4542.68,
            "success": true
          }
        },
        "error": null,
        "metadata": null
      },
      "notes": []
    },
    {
      "scenario_id": "T2S-028",
      "category": "日期範圍",
      "passed": true,
      "duration_sec": 4.085,
      "expected_success": true,
      "actual_success": true,
      "error": null,
      "generated_sql": "SELECT * FROM tlf_file WHERE EXTRACT(YEAR FROM tlf06) = 2026 AND EXTRACT(MONTH FROM tlf06) = 1",
      "result_summary": {
        "success": true,
        "action": "text_to_sql",
        "result": {
          "sql_query": "SELECT * FROM tlf_file WHERE EXTRACT(YEAR FROM tlf06) = 2026 AND EXTRACT(MONTH FROM tlf06) = 1",
          "parameters": [],
          "confidence": 0.7999999999999999,
          "explanation": "將自然語言查詢「查詢 2026 年 1 月的交易記錄。」轉換為 SQL: SELECT * FROM tlf_file WHERE EXTRACT(YEAR FROM tlf06) = 2026 AND EXTRACT(MONTH FROM tlf06) = 1...",
          "warnings": [
            "SQL 缺少 SELECT 子句",
            "SQL 缺少 FROM 子句"
          ],
          "conversion_log": {
            "timestamp": "2026-01-30T15:20:46.423881",
            "natural_language": "查詢 2026 年 1 月的交易記錄。",
            "database_type": "postgresql",
            "schema_info_provided": true,
            "steps": [
              {
                "step": "semantic_classification",
                "status": "success",
                "query_type": "日期查詢",
                "handling": "執行",
                "similarity": 1.0,
                "matched": true
              },
              {
                "step": "llm_client_init",
                "status": "success",
                "provider": "None"
              },
              {
                "step": "build_prompt",
                "status": "success",
                "duration_ms": 0.04,
                "prompt_length": 4228
              },
              {
                "step": "llm_generate",
                "status": "success",
                "duration_ms": 3990.24,
                "raw_output_length": 116,
                "raw_output_preview": "查詢 2026 年 1 月的交易記錄。\n\nSELECT * FROM tlf_file WHERE EXTRACT(YEAR FROM tlf06) = 2026 AND EXTRACT(MONTH FROM tlf06) = 1;"
              },
              {
                "step": "extract_sql",
                "status": "success",
                "extracted_sql": "SELECT * FROM tlf_file WHERE EXTRACT(YEAR FROM tlf06) = 2026 AND EXTRACT(MONTH FROM tlf06) = 1"
              },
              {
                "step": "validate_sql",
                "status": "success",
                "validated_sql": "SELECT * FROM tlf_file WHERE EXTRACT(YEAR FROM tlf06) = 2026 AND EXTRACT(MONTH FROM tlf06) = 1",
                "warnings": [
                  "SQL 缺少 SELECT 子句",
                  "SQL 缺少 FROM 子句"
                ]
              },
              {
                "step": "extract_parameters",
                "status": "success",
                "parameters": []
              },
              {
                "step": "calculate_confidence",
                "status": "success",
                "confidence": 0.7999999999999999
              }
            ],
            "total_duration_ms": 3990.81,
            "success": true
          }
        },
        "error": null,
        "metadata": null
      },
      "notes": []
    },
    {
      "scenario_id": "T2S-029",
      "category": "NULL 條件",
      "passed": true,
      "duration_sec": 2.601,
      "expected_success": true,
      "actual_success": true,
      "error": null,
      "generated_sql": "SELECT * FROM img_file WHERE img04 IS NULL",
      "result_summary": {
        "success": true,
        "action": "text_to_sql",
        "result": {
          "sql_query": "SELECT * FROM img_file WHERE img04 IS NULL",
          "parameters": [],
          "confidence": 0.7999999999999999,
          "explanation": "將自然語言查詢「查詢批號為空的庫存記錄。」轉換為 SQL: SELECT * FROM img_file WHERE img04 IS NULL...",
          "warnings": [
            "SQL 缺少 SELECT 子句",
            "SQL 缺少 FROM 子句"
          ],
          "conversion_log": {
            "timestamp": "2026-01-30T15:20:50.508450",
            "natural_language": "查詢批號為空的庫存記錄。",
            "database_type": "postgresql",
            "schema_info_provided": true,
            "steps": [
              {
                "step": "semantic_classification",
                "status": "success",
                "query_type": "NULL 查詢",
                "handling": "執行",
                "similarity": 1.0000000000000002,
                "matched": true
              },
              {
                "step": "llm_client_init",
                "status": "success",
                "provider": "None"
              },
              {
                "step": "build_prompt",
                "status": "success",
                "duration_ms": 0.04,
                "prompt_length": 4221
              },
              {
                "step": "llm_generate",
                "status": "success",
                "duration_ms": 2482.91,
                "raw_output_length": 43,
                "raw_output_preview": "SELECT * FROM img_file WHERE img04 IS NULL;"
              },
              {
                "step": "extract_sql",
                "status": "success",
                "extracted_sql": "SELECT * FROM img_file WHERE img04 IS NULL"
              },
              {
                "step": "validate_sql",
                "status": "success",
                "validated_sql": "SELECT * FROM img_file WHERE img04 IS NULL",
                "warnings": [
                  "SQL 缺少 SELECT 子句",
                  "SQL 缺少 FROM 子句"
                ]
              },
              {
                "step": "extract_parameters",
                "status": "success",
                "parameters": []
              },
              {
                "step": "calculate_confidence",
                "status": "success",
                "confidence": 0.7999999999999999
              }
            ],
            "total_duration_ms": 2483.45,
            "success": true
          }
        },
        "error": null,
        "metadata": null
      },
      "notes": []
    },
    {
      "scenario_id": "T2S-030",
      "category": "中文描述複雜條件",
      "passed": true,
      "duration_sec": 3.351,
      "expected_success": true,
      "actual_success": true,
      "error": null,
      "generated_sql": "SELECT * FROM img_file WHERE img10 BETWEEN 100 AND 200 AND img02 IN ('W01', 'W02')",
      "result_summary": {
        "success": true,
        "action": "text_to_sql",
        "result": {
          "sql_query": "SELECT * FROM img_file WHERE img10 BETWEEN 100 AND 200 AND img02 IN ('W01', 'W02')",
          "parameters": [],
          "confidence": 0.7999999999999999,
          "explanation": "將自然語言查詢「查詢庫存數量在 100 到 200 之間且倉庫為 W01 或 W02 的記錄。」轉換為 SQL: SELECT * FROM img_file WHERE img10 BETWEEN 100 AND 200 AND img02 IN ('W01', 'W02')...",
          "warnings": [
            "SQL 缺少 SELECT 子句",
            "SQL 缺少 FROM 子句",
            "建議使用參數化查詢以防止 SQL 注入"
          ],
          "conversion_log": {
            "timestamp": "2026-01-30T15:20:53.109507",
            "natural_language": "查詢庫存數量在 100 到 200 之間且倉庫為 W01 或 W02 的記錄。",
            "database_type": "postgresql",
            "schema_info_provided": true,
            "steps": [
              {
                "step": "semantic_classification",
                "status": "success",
                "query_type": "複雜查詢",
                "handling": "執行",
                "similarity": 1.0,
                "matched": true
              },
              {
                "step": "llm_client_init",
                "status": "success",
                "provider": "None"
              },
              {
                "step": "build_prompt",
                "status": "success",
                "duration_ms": 0.03,
                "prompt_length": 4248
              },
              {
                "step": "llm_generate",
                "status": "success",
                "duration_ms": 3264.54,
                "raw_output_length": 83,
                "raw_output_preview": "SELECT * FROM img_file WHERE img10 BETWEEN 100 AND 200 AND img02 IN ('W01', 'W02');"
              },
              {
                "step": "extract_sql",
                "status": "success",
                "extracted_sql": "SELECT * FROM img_file WHERE img10 BETWEEN 100 AND 200 AND img02 IN ('W01', 'W02')"
              },
              {
                "step": "validate_sql",
                "status": "success",
                "validated_sql": "SELECT * FROM img_file WHERE img10 BETWEEN 100 AND 200 AND img02 IN ('W01', 'W02')",
                "warnings": [
                  "SQL 缺少 SELECT 子句",
                  "SQL 缺少 FROM 子句",
                  "建議使用參數化查詢以防止 SQL 注入"
                ]
              },
              {
                "step": "extract_parameters",
                "status": "success",
                "parameters": []
              },
              {
                "step": "calculate_confidence",
                "status": "success",
                "confidence": 0.7999999999999999
              }
            ],
            "total_duration_ms": 3265.36,
            "success": true
          }
        },
        "error": null,
        "metadata": null
      },
      "notes": []
    },
    {
      "scenario_id": "T2S-031",
      "category": "缺參數：無 natural_language",
      "passed": true,
      "duration_sec": 0.0,
      "expected_success": false,
      "actual_success": false,
      "error": "natural_language is required for text_to_sql action",
      "generated_sql": null,
      "result_summary": {
        "success": false,
        "action": "text_to_sql",
        "result": null,
        "error": "natural_language is required for text_to_sql action",
        "metadata": null
      },
      "notes": []
    },
    {
      "scenario_id": "T2S-032",
      "category": "缺參數：無 sql_query",
      "passed": true,
      "duration_sec": 0.0,
      "expected_success": false,
      "actual_success": false,
      "error": "sql_query is required for execute_query action",
      "generated_sql": null,
      "result_summary": {
        "success": false,
        "action": "execute_query",
        "result": null,
        "error": "sql_query is required for execute_query action",
        "metadata": null
      },
      "notes": []
    },
    {
      "scenario_id": "T2S-033",
      "category": "錯誤 action",
      "passed": true,
      "duration_sec": 0.0,
      "expected_success": false,
      "actual_success": false,
      "error": "Unknown action: invalid_action",
      "generated_sql": null,
      "result_summary": {
        "success": false,
        "action": "invalid_action",
        "result": null,
        "error": "Unknown action: invalid_action",
        "metadata": null
      },
      "notes": []
    },
    {
      "scenario_id": "T2S-034",
      "category": "task_data 為空",
      "passed": true,
      "duration_sec": 0.0,
      "expected_success": false,
      "actual_success": false,
      "error": "1 validation error for DataAgentRequest\naction\n  Field required [type=missing, input_value={}, input_type=dict]\n    For further information visit https://errors.pydantic.dev/2.11/v/missing",
      "generated_sql": null,
      "result_summary": {},
      "notes": []
    },
    {
      "scenario_id": "T2S-035",
      "category": "task_data 型別錯誤",
      "passed": true,
      "duration_sec": null,
      "expected_success": false,
      "actual_success": false,
      "error": "1 validation error for AgentServiceRequest\ntask_data\n  Input should be a valid dictionary [type=dict_type, input_value='not_a_dict', input_type=str]\n    For further information visit https://errors.pydantic.dev/2.11/v/dict_type",
      "generated_sql": null,
      "result_summary": null,
      "notes": [
        "Pydantic 驗證拒絕非 dict task_data"
      ]
    },
    {
      "scenario_id": "T2S-036",
      "category": "危險 SQL：DROP",
      "passed": true,
      "duration_sec": 0.0,
      "expected_success": false,
      "actual_success": true,
      "error": null,
      "generated_sql": null,
      "result_summary": {
        "success": true,
        "action": "validate_query",
        "result": {
          "valid": false,
          "error": "Dangerous operation detected",
          "details": [
            "Forbidden operation detected: DROP"
          ]
        },
        "error": null,
        "metadata": null
      },
      "notes": []
    },
    {
      "scenario_id": "T2S-037",
      "category": "危險 SQL：DELETE",
      "passed": true,
      "duration_sec": 0.0,
      "expected_success": false,
      "actual_success": true,
      "error": null,
      "generated_sql": null,
      "result_summary": {
        "success": true,
        "action": "validate_query",
        "result": {
          "valid": false,
          "error": "Dangerous operation detected",
          "details": [
            "Forbidden operation detected: DELETE"
          ]
        },
        "error": null,
        "metadata": null
      },
      "notes": []
    },
    {
      "scenario_id": "T2S-038",
      "category": "SQL 注入嘗試",
      "passed": true,
      "duration_sec": 0.109,
      "expected_success": false,
      "actual_success": false,
      "error": "前置異常：未被授權做資料查詢以外的變更操作",
      "generated_sql": null,
      "result_summary": {
        "success": false,
        "action": "text_to_sql",
        "result": null,
        "error": "前置異常：未被授權做資料查詢以外的變更操作",
        "metadata": null
      },
      "notes": []
    },
    {
      "scenario_id": "T2S-039",
      "category": "無效 SQL 語法",
      "passed": true,
      "duration_sec": 0.0,
      "expected_success": false,
      "actual_success": true,
      "error": null,
      "generated_sql": null,
      "result_summary": {
        "success": true,
        "action": "validate_query",
        "result": {
          "valid": false,
          "error": "Invalid SQL syntax: SELECT 子句缺少欄位",
          "details": [
            "SELECT 子句缺少欄位"
          ]
        },
        "error": null,
        "metadata": null
      },
      "notes": []
    },
    {
      "scenario_id": "T2S-040",
      "category": "validate_query 通過",
      "passed": true,
      "duration_sec": 0.0,
      "expected_success": true,
      "actual_success": true,
      "error": null,
      "generated_sql": null,
      "result_summary": {
        "success": true,
        "action": "validate_query",
        "result": {
          "valid": true,
          "warnings": []
        },
        "error": null,
        "metadata": null
      },
      "notes": []
    },
    {
      "scenario_id": "T2S-041",
      "category": "validate_query 不通過",
      "passed": true,
      "duration_sec": 0.0,
      "expected_success": true,
      "actual_success": true,
      "error": null,
      "generated_sql": null,
      "result_summary": {
        "success": true,
        "action": "validate_query",
        "result": {
          "valid": false,
          "error": "Invalid SQL syntax: SQL 包含無效字符或語法",
          "details": [
            "SQL 包含無效字符或語法"
          ]
        },
        "error": null,
        "metadata": null
      },
      "notes": []
    },
    {
      "scenario_id": "T2S-042",
      "category": "query_datalake 缺 bucket",
      "passed": true,
      "duration_sec": 0.0,
      "expected_success": false,
      "actual_success": false,
      "error": "bucket and key are required for query_datalake action",
      "generated_sql": null,
      "result_summary": {
        "success": false,
        "action": "query_datalake",
        "result": null,
        "error": "bucket and key are required for query_datalake action",
        "metadata": null
      },
      "notes": []
    },
    {
      "scenario_id": "T2S-043",
      "category": "query_datalake 不存在的 key",
      "passed": true,
      "duration_sec": 0.056,
      "expected_success": false,
      "actual_success": false,
      "error": "File not found: tiptop-raw/nonexistent/key/xyz.parquet",
      "generated_sql": null,
      "result_summary": {
        "success": false,
        "action": "query_datalake",
        "result": {
          "success": false,
          "error": "File not found: tiptop-raw/nonexistent/key/xyz.parquet"
        },
        "error": "File not found: tiptop-raw/nonexistent/key/xyz.parquet",
        "metadata": null
      },
      "notes": []
    },
    {
      "scenario_id": "T2S-044",
      "category": "超時（若已實作）",
      "passed": true,
      "duration_sec": 1.697,
      "expected_success": true,
      "actual_success": true,
      "error": null,
      "generated_sql": "SELECT * FROM img_file",
      "result_summary": {
        "success": true,
        "action": "text_to_sql",
        "result": {
          "sql_query": "SELECT * FROM img_file",
          "parameters": [],
          "confidence": 0.7,
          "explanation": "將自然語言查詢「查詢庫存表所有記錄不限制筆數」轉換為 SQL: SELECT * FROM img_file...",
          "warnings": [
            "SQL 缺少 SELECT 子句",
            "SQL 缺少 FROM 子句"
          ],
          "conversion_log": {
            "timestamp": "2026-01-30T15:20:56.626007",
            "natural_language": "查詢庫存表所有記錄不限制筆數",
            "database_type": "postgresql",
            "schema_info_provided": false,
            "steps": [
              {
                "step": "semantic_classification",
                "status": "success",
                "query_type": "限制查詢",
                "handling": "執行",
                "similarity": 0.8704664575678541,
                "matched": true
              },
              {
                "step": "llm_client_init",
                "status": "success",
                "provider": "None"
              },
              {
                "step": "build_prompt",
                "status": "success",
                "duration_ms": 0.0,
                "prompt_length": 3177
              },
              {
                "step": "llm_generate",
                "status": "success",
                "duration_ms": 1603.83,
                "raw_output_length": 23,
                "raw_output_preview": "SELECT * FROM img_file;"
              },
              {
                "step": "extract_sql",
                "status": "success",
                "extracted_sql": "SELECT * FROM img_file"
              },
              {
                "step": "validate_sql",
                "status": "success",
                "validated_sql": "SELECT * FROM img_file",
                "warnings": [
                  "SQL 缺少 SELECT 子句",
                  "SQL 缺少 FROM 子句"
                ]
              },
              {
                "step": "extract_parameters",
                "status": "success",
                "parameters": []
              },
              {
                "step": "calculate_confidence",
                "status": "success",
                "confidence": 0.7
              }
            ],
            "total_duration_ms": 1604.04,
            "success": true
          }
        },
        "error": null,
        "metadata": null
      },
      "notes": []
    },
    {
      "scenario_id": "T2S-045",
      "category": "過大 LIMIT（若有限制）",
      "passed": true,
      "duration_sec": 2.15,
      "expected_success": true,
      "actual_success": true,
      "error": null,
      "generated_sql": "SELECT * FROM inventory WHERE id BETWEEN 1 AND 100000",
      "result_summary": {
        "success": true,
        "action": "text_to_sql",
        "result": {
          "sql_query": "SELECT * FROM inventory WHERE id BETWEEN 1 AND 100000",
          "parameters": [],
          "confidence": 0.7999999999999999,
          "explanation": "將自然語言查詢「查詢庫存表 100 萬筆記錄」轉換為 SQL: SELECT * FROM inventory WHERE id BETWEEN 1 AND 100000...",
          "warnings": [
            "SQL 缺少 SELECT 子句",
            "SQL 缺少 FROM 子句"
          ],
          "conversion_log": {
            "timestamp": "2026-01-30T15:20:58.323523",
            "natural_language": "查詢庫存表 100 萬筆記錄",
            "database_type": "postgresql",
            "schema_info_provided": false,
            "steps": [
              {
                "step": "semantic_classification",
                "status": "success",
                "query_type": "限制查詢",
                "handling": "執行",
                "similarity": 0.929946771760424,
                "matched": true
              },
              {
                "step": "llm_client_init",
                "status": "success",
                "provider": "None"
              },
              {
                "step": "build_prompt",
                "status": "success",
                "duration_ms": 0.0,
                "prompt_length": 3177
              },
              {
                "step": "llm_generate",
                "status": "success",
                "duration_ms": 2036.66,
                "raw_output_length": 54,
                "raw_output_preview": "SELECT * FROM inventory WHERE id BETWEEN 1 AND 100000;"
              },
              {
                "step": "extract_sql",
                "status": "success",
                "extracted_sql": "SELECT * FROM inventory WHERE id BETWEEN 1 AND 100000"
              },
              {
                "step": "validate_sql",
                "status": "success",
                "validated_sql": "SELECT * FROM inventory WHERE id BETWEEN 1 AND 100000",
                "warnings": [
                  "SQL 缺少 SELECT 子句",
                  "SQL 缺少 FROM 子句"
                ]
              },
              {
                "step": "extract_parameters",
                "status": "success",
                "parameters": []
              },
              {
                "step": "calculate_confidence",
                "status": "success",
                "confidence": 0.7999999999999999
              }
            ],
            "total_duration_ms": 2036.98,
            "success": true
          }
        },
        "error": null,
        "metadata": null
      },
      "notes": []
    },
    {
      "scenario_id": "T2S-046",
      "category": "get_schema 缺 schema_id",
      "passed": true,
      "duration_sec": 0.0,
      "expected_success": false,
      "actual_success": false,
      "error": "schema_id is required for get_schema action",
      "generated_sql": null,
      "result_summary": {
        "success": false,
        "action": "get_schema",
        "result": null,
        "error": "schema_id is required for get_schema action",
        "metadata": null
      },
      "notes": []
    },
    {
      "scenario_id": "T2S-047",
      "category": "create_dictionary 缺必要欄位",
      "passed": true,
      "duration_sec": 0.0,
      "expected_success": false,
      "actual_success": false,
      "error": "dictionary_id and dictionary_data are required for create_dictionary action",
      "generated_sql": null,
      "result_summary": {
        "success": false,
        "action": "create_dictionary",
        "result": null,
        "error": "dictionary_id and dictionary_data are required for create_dictionary action",
        "metadata": null
      },
      "notes": []
    },
    {
      "scenario_id": "T2S-048",
      "category": "重複呼叫 text_to_sql",
      "passed": true,
      "duration_sec": 5.03,
      "expected_success": true,
      "actual_success": true,
      "error": null,
      "generated_sql": "SELECT *\nFROM img_file\nWHERE img01 = '10-0001'",
      "result_summary": {
        "success": true,
        "action": "text_to_sql",
        "result": {
          "sql_query": "SELECT *\nFROM img_file\nWHERE img01 = '10-0001'",
          "parameters": [],
          "confidence": 0.7999999999999999,
          "explanation": "將自然語言查詢「查詢料號 10-0001 的庫存記錄。」轉換為 SQL: SELECT *\nFROM img_file\nWHERE img01 = '10-0001'...",
          "warnings": [
            "SQL 缺少 SELECT 子句",
            "SQL 缺少 FROM 子句",
            "建議使用參數化查詢以防止 SQL 注入"
          ],
          "conversion_log": {
            "timestamp": "2026-01-30T15:21:00.473850",
            "natural_language": "查詢料號 10-0001 的庫存記錄。",
            "database_type": "postgresql",
            "schema_info_provided": true,
            "steps": [
              {
                "step": "semantic_classification",
                "status": "success",
                "query_type": "簡單查詢",
                "handling": "執行",
                "similarity": 0.9932954713524721,
                "matched": true
              },
              {
                "step": "llm_client_init",
                "status": "success",
                "provider": "None"
              },
              {
                "step": "build_prompt",
                "status": "success",
                "duration_ms": 0.03,
                "prompt_length": 4228
              },
              {
                "step": "llm_generate",
                "status": "success",
                "duration_ms": 3369.63,
                "raw_output_length": 68,
                "raw_output_preview": "查詢料號 10-0001 的庫存記錄。\n\nSELECT *\nFROM img_file\nWHERE img01 = '10-0001';"
              },
              {
                "step": "extract_sql",
                "status": "success",
                "extracted_sql": "SELECT *\nFROM img_file\nWHERE img01 = '10-0001'"
              },
              {
                "step": "validate_sql",
                "status": "success",
                "validated_sql": "SELECT *\nFROM img_file\nWHERE img01 = '10-0001'",
                "warnings": [
                  "SQL 缺少 SELECT 子句",
                  "SQL 缺少 FROM 子句",
                  "建議使用參數化查詢以防止 SQL 注入"
                ]
              },
              {
                "step": "extract_parameters",
                "status": "success",
                "parameters": []
              },
              {
                "step": "calculate_confidence",
                "status": "success",
                "confidence": 0.7999999999999999
              }
            ],
            "total_duration_ms": 3369.94,
            "success": true
          }
        },
        "error": null,
        "metadata": null
      },
      "notes": []
    },
    {
      "scenario_id": "T2S-049",
      "category": "混合流程：text_to_sql → validate_query",
      "passed": true,
      "duration_sec": 3.259,
      "expected_success": true,
      "actual_success": true,
      "error": null,
      "generated_sql": "SELECT *\nFROM img_file\nORDER BY img10 DESC\nLIMIT 1",
      "result_summary": {
        "success": true,
        "action": "text_to_sql",
        "result": {
          "sql_query": "SELECT *\nFROM img_file\nORDER BY img10 DESC\nLIMIT 1",
          "parameters": [],
          "confidence": 0.7,
          "explanation": "將自然語言查詢「查詢前 1 筆庫存記錄」轉換為 SQL: SELECT *\nFROM img_file\nORDER BY img10 DESC\nLIMIT 1...",
          "warnings": [
            "SQL 缺少 SELECT 子句",
            "SQL 缺少 FROM 子句"
          ],
          "conversion_log": {
            "timestamp": "2026-01-30T15:21:05.503409",
            "natural_language": "查詢前 1 筆庫存記錄",
            "database_type": "postgresql",
            "schema_info_provided": true,
            "steps": [
              {
                "step": "semantic_classification",
                "status": "success",
                "query_type": "限制查詢",
                "handling": "執行",
                "similarity": 0.9171841047744085,
                "matched": true
              },
              {
                "step": "llm_client_init",
                "status": "success",
                "provider": "None"
              },
              {
                "step": "build_prompt",
                "status": "success",
                "duration_ms": 0.03,
                "prompt_length": 4220
              },
              {
                "step": "llm_generate",
                "status": "success",
                "duration_ms": 3156.33,
                "raw_output_length": 65,
                "raw_output_preview": "查詢前 1 筆庫存記錄。\n\nSELECT *\nFROM img_file\nORDER BY img10 DESC\nLIMIT 1;"
              },
              {
                "step": "extract_sql",
                "status": "success",
                "extracted_sql": "SELECT *\nFROM img_file\nORDER BY img10 DESC\nLIMIT 1"
              },
              {
                "step": "validate_sql",
                "status": "success",
                "validated_sql": "SELECT *\nFROM img_file\nORDER BY img10 DESC\nLIMIT 1",
                "warnings": [
                  "SQL 缺少 SELECT 子句",
                  "SQL 缺少 FROM 子句"
                ]
              },
              {
                "step": "extract_parameters",
                "status": "success",
                "parameters": []
              },
              {
                "step": "calculate_confidence",
                "status": "success",
                "confidence": 0.7
              }
            ],
            "total_duration_ms": 3156.64,
            "success": true
          }
        },
        "error": null,
        "metadata": null
      },
      "notes": []
    },
    {
      "scenario_id": "T2S-050",
      "category": "混合流程：text_to_sql → execute_query",
      "passed": true,
      "duration_sec": 1.016,
      "expected_success": true,
      "actual_success": true,
      "error": null,
      "generated_sql": "SELECT * FROM img_file LIMIT 1",
      "result_summary": {
        "success": true,
        "action": "text_to_sql",
        "result": {
          "sql_query": "SELECT * FROM img_file LIMIT 1",
          "parameters": [],
          "confidence": 0.7,
          "explanation": "將自然語言查詢「查詢前 1 筆庫存記錄」轉換為 SQL: SELECT * FROM img_file LIMIT 1...",
          "warnings": [
            "SQL 缺少 SELECT 子句",
            "SQL 缺少 FROM 子句"
          ],
          "conversion_log": {
            "timestamp": "2026-01-30T15:21:08.762180",
            "natural_language": "查詢前 1 筆庫存記錄",
            "database_type": "postgresql",
            "schema_info_provided": true,
            "steps": [
              {
                "step": "semantic_classification",
                "status": "success",
                "query_type": "限制查詢",
                "handling": "執行",
                "similarity": 0.9171841047744085,
                "matched": true
              },
              {
                "step": "llm_client_init",
                "status": "success",
                "provider": "None"
              },
              {
                "step": "build_prompt",
                "status": "success",
                "duration_ms": 0.04,
                "prompt_length": 4220
              },
              {
                "step": "llm_generate",
                "status": "success",
                "duration_ms": 909.01,
                "raw_output_length": 45,
                "raw_output_preview": "查詢前 1 筆庫存記錄。\n\nSELECT * FROM img_file LIMIT 1;"
              },
              {
                "step": "extract_sql",
                "status": "success",
                "extracted_sql": "SELECT * FROM img_file LIMIT 1"
              },
              {
                "step": "validate_sql",
                "status": "success",
                "validated_sql": "SELECT * FROM img_file LIMIT 1",
                "warnings": [
                  "SQL 缺少 SELECT 子句",
                  "SQL 缺少 FROM 子句"
                ]
              },
              {
                "step": "extract_parameters",
                "status": "success",
                "parameters": []
              },
              {
                "step": "calculate_confidence",
                "status": "success",
                "confidence": 0.7
              }
            ],
            "total_duration_ms": 909.27,
            "success": true
          }
        },
        "error": null,
        "metadata": null
      },
      "notes": []
    }
  ]
}