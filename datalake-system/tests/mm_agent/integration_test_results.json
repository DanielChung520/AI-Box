{
  "summary": {
    "total": 29,
    "passed": 29,
    "failed": 0,
    "pass_rate": 100.0
  },
  "results": [
    {
      "test_name": "場景1：簡單查詢料號信息",
      "instruction": "查詢料號 ABC-123 的信息",
      "status": "✅ 通過",
      "expected_success": true,
      "actual_success": true,
      "response_status": "completed",
      "error": null,
      "result": {
        "success": true,
        "task_type": "query_part",
        "result": {
          "success": true,
          "part_number": "ABC-123",
          "part_info": {
            "part_number": "ABC-123",
            "name": "電子元件 A",
            "specification": "10x10x5mm",
            "unit": "PCS",
            "supplier": "供應商 A",
            "category": "電子元件",
            "safety_stock": 100,
            "unit_price": 50.0,
            "currency": "TWD",
            "description": "高品質電子元件，適用於各種電子設備"
          }
        },
        "error": null,
        "metadata": null,
        "semantic_analysis": {
          "intent": "query_part",
          "confidence": 0.8,
          "parameters": {
            "part_number": "ABC-123",
            "quantity": null
          },
          "original_instruction": "查詢料號 ABC-123 的信息",
          "clarification_needed": false,
          "clarification_questions": []
        },
        "responsibility": "查詢物料基本信息",
        "data_queries": [],
        "validation": null,
        "anomalies": []
      }
    },
    {
      "test_name": "場景2：簡單查詢庫存",
      "instruction": "查詢料號 ABC-123 的庫存",
      "status": "✅ 通過",
      "expected_success": true,
      "actual_success": true,
      "response_status": "completed",
      "error": null,
      "result": {
        "success": true,
        "task_type": "query_part",
        "result": {
          "success": true,
          "part_number": "ABC-123",
          "part_info": {
            "part_number": "ABC-123",
            "name": "電子元件 A",
            "specification": "10x10x5mm",
            "unit": "PCS",
            "supplier": "供應商 A",
            "category": "電子元件",
            "safety_stock": 100,
            "unit_price": 50.0,
            "currency": "TWD",
            "description": "高品質電子元件，適用於各種電子設備"
          }
        },
        "error": null,
        "metadata": null,
        "semantic_analysis": {
          "intent": "query_part",
          "confidence": 0.8,
          "parameters": {
            "part_number": "ABC-123",
            "quantity": null
          },
          "original_instruction": "查詢料號 ABC-123 的庫存",
          "clarification_needed": false,
          "clarification_questions": []
        },
        "responsibility": "查詢物料基本信息",
        "data_queries": [],
        "validation": null,
        "anomalies": []
      }
    },
    {
      "test_name": "場景3：查詢庫存數量",
      "instruction": "ABC-123 還有多少庫存？",
      "status": "✅ 通過",
      "expected_success": true,
      "actual_success": true,
      "response_status": "completed",
      "error": null,
      "result": {
        "success": true,
        "task_type": "query_stock",
        "result": {
          "success": true,
          "part_number": "ABC-123",
          "stock_info": {
            "part_number": "ABC-123",
            "current_stock": 50,
            "location": "倉庫 A-01",
            "last_updated": "2026-01-13T10:00:00Z",
            "reserved_quantity": 0,
            "available_stock": 50,
            "warnings": [
              "無法解析 last_updated 時間戳"
            ],
            "anomalies": [],
            "has_anomalies": false
          }
        },
        "error": null,
        "metadata": null,
        "semantic_analysis": {
          "intent": "query_stock",
          "confidence": 0.8,
          "parameters": {
            "part_number": "ABC-123",
            "quantity": null
          },
          "original_instruction": "ABC-123 還有多少庫存？",
          "clarification_needed": false,
          "clarification_questions": []
        },
        "responsibility": "查詢庫存信息",
        "data_queries": [],
        "validation": null,
        "anomalies": []
      }
    },
    {
      "test_name": "場景4：查詢庫存位置",
      "instruction": "料號 ABC-123 存放在哪裡？",
      "status": "✅ 通過",
      "expected_success": true,
      "actual_success": true,
      "response_status": "completed",
      "error": null,
      "result": {
        "success": true,
        "task_type": "query_stock",
        "result": {
          "success": true,
          "part_number": "ABC-123",
          "stock_info": {
            "part_number": "ABC-123",
            "current_stock": 50,
            "location": "倉庫 A-01",
            "last_updated": "2026-01-13T10:00:00Z",
            "reserved_quantity": 0,
            "available_stock": 50,
            "warnings": [
              "無法解析 last_updated 時間戳"
            ],
            "anomalies": [],
            "has_anomalies": false
          }
        },
        "error": null,
        "metadata": null,
        "semantic_analysis": {
          "intent": "query_stock",
          "confidence": 0.8,
          "parameters": {
            "part_number": "ABC-123",
            "quantity": null
          },
          "original_instruction": "料號 ABC-123 存放在哪裡？",
          "clarification_needed": false,
          "clarification_questions": []
        },
        "responsibility": "查詢庫存信息",
        "data_queries": [],
        "validation": null,
        "anomalies": []
      }
    },
    {
      "test_name": "場景5：查詢物料規格",
      "instruction": "查詢料號 ABC-123 的規格",
      "status": "✅ 通過",
      "expected_success": true,
      "actual_success": true,
      "response_status": "completed",
      "error": null,
      "result": {
        "success": true,
        "task_type": "query_part",
        "result": {
          "success": true,
          "part_number": "ABC-123",
          "part_info": {
            "part_number": "ABC-123",
            "name": "電子元件 A",
            "specification": "10x10x5mm",
            "unit": "PCS",
            "supplier": "供應商 A",
            "category": "電子元件",
            "safety_stock": 100,
            "unit_price": 50.0,
            "currency": "TWD",
            "description": "高品質電子元件，適用於各種電子設備"
          }
        },
        "error": null,
        "metadata": null,
        "semantic_analysis": {
          "intent": "query_part",
          "confidence": 0.8,
          "parameters": {
            "part_number": "ABC-123",
            "quantity": null
          },
          "original_instruction": "查詢料號 ABC-123 的規格",
          "clarification_needed": false,
          "clarification_questions": []
        },
        "responsibility": "查詢物料基本信息",
        "data_queries": [],
        "validation": null,
        "anomalies": []
      }
    },
    {
      "test_name": "場景6：查詢物料供應商",
      "instruction": "料號 ABC-123 的供應商是誰？",
      "status": "✅ 通過",
      "expected_success": true,
      "actual_success": true,
      "response_status": "completed",
      "error": null,
      "result": {
        "success": true,
        "task_type": "query_part",
        "result": {
          "success": true,
          "part_number": "ABC-123",
          "part_info": {
            "part_number": "ABC-123",
            "name": "電子元件 A",
            "specification": "10x10x5mm",
            "unit": "PCS",
            "supplier": "供應商 A",
            "category": "電子元件",
            "safety_stock": 100,
            "unit_price": 50.0,
            "currency": "TWD",
            "description": "高品質電子元件，適用於各種電子設備"
          }
        },
        "error": null,
        "metadata": null,
        "semantic_analysis": {
          "intent": "query_part",
          "confidence": 0.8,
          "parameters": {
            "part_number": "ABC-123",
            "quantity": null
          },
          "original_instruction": "料號 ABC-123 的供應商是誰？",
          "clarification_needed": false,
          "clarification_questions": []
        },
        "responsibility": "查詢物料基本信息",
        "data_queries": [],
        "validation": null,
        "anomalies": []
      }
    },
    {
      "test_name": "場景7：缺料分析 - 庫存充足",
      "instruction": "檢查料號 ABC-123 是否需要補貨",
      "status": "✅ 通過",
      "expected_success": true,
      "actual_success": true,
      "response_status": "completed",
      "error": null,
      "result": {
        "success": true,
        "task_type": "analyze_shortage",
        "result": {
          "success": true,
          "analysis": {
            "part_number": "ABC-123",
            "part_name": "電子元件 A",
            "current_stock": 50,
            "safety_stock": 100,
            "status": "low",
            "is_shortage": false,
            "shortage_quantity": 50,
            "location": "倉庫 A-01",
            "recommendation": "庫存偏低，建議補貨 50 件",
            "anomalies": []
          }
        },
        "error": null,
        "metadata": null,
        "semantic_analysis": {
          "intent": "analyze_shortage",
          "confidence": 0.8,
          "parameters": {
            "part_number": "ABC-123",
            "quantity": null
          },
          "original_instruction": "檢查料號 ABC-123 是否需要補貨",
          "clarification_needed": false,
          "clarification_questions": []
        },
        "responsibility": "缺料分析",
        "data_queries": [],
        "validation": null,
        "anomalies": []
      }
    },
    {
      "test_name": "場景8：缺料分析 - 庫存偏低",
      "instruction": "ABC-123 缺料嗎？",
      "status": "✅ 通過",
      "expected_success": true,
      "actual_success": true,
      "response_status": "completed",
      "error": null,
      "result": {
        "success": true,
        "task_type": "analyze_shortage",
        "result": {
          "success": true,
          "analysis": {
            "part_number": "ABC-123",
            "part_name": "電子元件 A",
            "current_stock": 50,
            "safety_stock": 100,
            "status": "low",
            "is_shortage": false,
            "shortage_quantity": 50,
            "location": "倉庫 A-01",
            "recommendation": "庫存偏低，建議補貨 50 件",
            "anomalies": []
          }
        },
        "error": null,
        "metadata": null,
        "semantic_analysis": {
          "intent": "analyze_shortage",
          "confidence": 0.8,
          "parameters": {
            "part_number": "ABC-123",
            "quantity": null
          },
          "original_instruction": "ABC-123 缺料嗎？",
          "clarification_needed": false,
          "clarification_questions": []
        },
        "responsibility": "缺料分析",
        "data_queries": [],
        "validation": null,
        "anomalies": []
      }
    },
    {
      "test_name": "場景9：缺料分析並獲取建議",
      "instruction": "分析料號 ABC-123 的缺料情況",
      "status": "✅ 通過",
      "expected_success": true,
      "actual_success": true,
      "response_status": "completed",
      "error": null,
      "result": {
        "success": true,
        "task_type": "analyze_shortage",
        "result": {
          "success": true,
          "analysis": {
            "part_number": "ABC-123",
            "part_name": "電子元件 A",
            "current_stock": 50,
            "safety_stock": 100,
            "status": "low",
            "is_shortage": false,
            "shortage_quantity": 50,
            "location": "倉庫 A-01",
            "recommendation": "庫存偏低，建議補貨 50 件",
            "anomalies": []
          }
        },
        "error": null,
        "metadata": null,
        "semantic_analysis": {
          "intent": "analyze_shortage",
          "confidence": 0.8,
          "parameters": {
            "part_number": "ABC-123",
            "quantity": null
          },
          "original_instruction": "分析料號 ABC-123 的缺料情況",
          "clarification_needed": false,
          "clarification_questions": []
        },
        "responsibility": "缺料分析",
        "data_queries": [],
        "validation": null,
        "anomalies": []
      }
    },
    {
      "test_name": "場景10：生成採購單",
      "instruction": "為料號 ABC-123 生成採購單，數量 100 件",
      "status": "✅ 通過",
      "expected_success": true,
      "actual_success": true,
      "response_status": "completed",
      "error": null,
      "result": {
        "success": true,
        "task_type": "generate_purchase_order",
        "result": {
          "success": true,
          "purchase_order": {
            "purchase_order_id": "PO-20260113-7FDFFE",
            "part_number": "ABC-123",
            "part_name": "電子元件 A",
            "quantity": 100,
            "supplier": "供應商 A",
            "unit_price": 50.0,
            "total_amount": 5000.0,
            "status": "虛擬生成",
            "created_at": "2026-01-13T20:24:47.914576",
            "created_by": "mm_agent",
            "note": "此為虛擬採購單，僅用於測試"
          }
        },
        "error": null,
        "metadata": null,
        "semantic_analysis": {
          "intent": "generate_purchase_order",
          "confidence": 0.8,
          "parameters": {
            "part_number": "ABC-123",
            "quantity": 100
          },
          "original_instruction": "為料號 ABC-123 生成採購單，數量 100 件",
          "clarification_needed": false,
          "clarification_questions": []
        },
        "responsibility": "生成採購單",
        "data_queries": [],
        "validation": null,
        "anomalies": []
      }
    },
    {
      "test_name": "場景11：缺料檢查後生成採購單",
      "instruction": "檢查料號 ABC-123 是否缺料，如果缺料就生成採購單 100 件",
      "status": "✅ 通過",
      "expected_success": true,
      "actual_success": true,
      "response_status": "completed",
      "error": null,
      "result": {
        "success": true,
        "task_type": "analyze_shortage",
        "result": {
          "success": true,
          "analysis": {
            "part_number": "ABC-123",
            "part_name": "電子元件 A",
            "current_stock": 50,
            "safety_stock": 100,
            "status": "low",
            "is_shortage": false,
            "shortage_quantity": 50,
            "location": "倉庫 A-01",
            "recommendation": "庫存偏低，建議補貨 50 件",
            "anomalies": []
          }
        },
        "error": null,
        "metadata": null,
        "semantic_analysis": {
          "intent": "analyze_shortage",
          "confidence": 0.8,
          "parameters": {
            "part_number": "ABC-123",
            "quantity": 100
          },
          "original_instruction": "檢查料號 ABC-123 是否缺料，如果缺料就生成採購單 100 件",
          "clarification_needed": false,
          "clarification_questions": []
        },
        "responsibility": "缺料分析",
        "data_queries": [],
        "validation": null,
        "anomalies": []
      }
    },
    {
      "test_name": "場景12a：查詢庫存（建立上下文）",
      "instruction": "查詢料號 ABC-123 的庫存",
      "status": "✅ 通過",
      "expected_success": true,
      "actual_success": true,
      "response_status": "completed",
      "error": null,
      "result": {
        "success": true,
        "task_type": "query_part",
        "result": {
          "success": true,
          "part_number": "ABC-123",
          "part_info": {
            "part_number": "ABC-123",
            "name": "電子元件 A",
            "specification": "10x10x5mm",
            "unit": "PCS",
            "supplier": "供應商 A",
            "category": "電子元件",
            "safety_stock": 100,
            "unit_price": 50.0,
            "currency": "TWD",
            "description": "高品質電子元件，適用於各種電子設備"
          }
        },
        "error": null,
        "metadata": null,
        "semantic_analysis": {
          "intent": "query_part",
          "confidence": 0.8,
          "parameters": {
            "part_number": "ABC-123",
            "quantity": null
          },
          "original_instruction": "查詢料號 ABC-123 的庫存",
          "clarification_needed": false,
          "clarification_questions": []
        },
        "responsibility": "查詢物料基本信息",
        "data_queries": [],
        "validation": null,
        "anomalies": []
      }
    },
    {
      "test_name": "場景12b：使用指代查詢",
      "instruction": "剛才查的那個料號，幫我生成採購單，數量 50 件",
      "status": "✅ 通過",
      "expected_success": true,
      "actual_success": true,
      "response_status": "completed",
      "error": null,
      "result": {
        "success": true,
        "task_type": "generate_purchase_order",
        "result": {
          "success": true,
          "purchase_order": {
            "purchase_order_id": "PO-20260113-311C4F",
            "part_number": "ABC-123",
            "part_name": "電子元件 A",
            "quantity": 50,
            "supplier": "供應商 A",
            "unit_price": 50.0,
            "total_amount": 2500.0,
            "status": "虛擬生成",
            "created_at": "2026-01-13T20:24:48.016243",
            "created_by": "mm_agent",
            "note": "此為虛擬採購單，僅用於測試"
          }
        },
        "error": null,
        "metadata": null,
        "semantic_analysis": {
          "intent": "generate_purchase_order",
          "confidence": 0.8,
          "parameters": {
            "part_number": "ABC-123",
            "quantity": 50
          },
          "original_instruction": "料號 ABC-123，幫我生成採購單，數量 50 件",
          "clarification_needed": false,
          "clarification_questions": []
        },
        "responsibility": "生成採購單",
        "data_queries": [],
        "validation": null,
        "anomalies": []
      }
    },
    {
      "test_name": "場景13a：第一輪 - 查詢庫存",
      "instruction": "查詢料號 ABC-123 的庫存",
      "status": "✅ 通過",
      "expected_success": true,
      "actual_success": true,
      "response_status": "completed",
      "error": null,
      "result": {
        "success": true,
        "task_type": "query_part",
        "result": {
          "success": true,
          "part_number": "ABC-123",
          "part_info": {
            "part_number": "ABC-123",
            "name": "電子元件 A",
            "specification": "10x10x5mm",
            "unit": "PCS",
            "supplier": "供應商 A",
            "category": "電子元件",
            "safety_stock": 100,
            "unit_price": 50.0,
            "currency": "TWD",
            "description": "高品質電子元件，適用於各種電子設備"
          }
        },
        "error": null,
        "metadata": null,
        "semantic_analysis": {
          "intent": "query_part",
          "confidence": 0.8,
          "parameters": {
            "part_number": "ABC-123",
            "quantity": null
          },
          "original_instruction": "查詢料號 ABC-123 的庫存",
          "clarification_needed": false,
          "clarification_questions": []
        },
        "responsibility": "查詢物料基本信息",
        "data_queries": [],
        "validation": null,
        "anomalies": []
      }
    },
    {
      "test_name": "場景13b：第二輪 - 缺料分析",
      "instruction": "它缺料嗎？",
      "status": "✅ 通過",
      "expected_success": true,
      "actual_success": true,
      "response_status": "completed",
      "error": null,
      "result": {
        "success": true,
        "task_type": "analyze_shortage",
        "result": {
          "success": true,
          "analysis": {
            "part_number": "ABC-123",
            "part_name": "電子元件 A",
            "current_stock": 50,
            "safety_stock": 100,
            "status": "low",
            "is_shortage": false,
            "shortage_quantity": 50,
            "location": "倉庫 A-01",
            "recommendation": "庫存偏低，建議補貨 50 件",
            "anomalies": []
          }
        },
        "error": null,
        "metadata": null,
        "semantic_analysis": {
          "intent": "analyze_shortage",
          "confidence": 0.8,
          "parameters": {
            "part_number": "ABC-123",
            "quantity": null
          },
          "original_instruction": "ABC-123缺料嗎？",
          "clarification_needed": false,
          "clarification_questions": []
        },
        "responsibility": "缺料分析",
        "data_queries": [],
        "validation": null,
        "anomalies": []
      }
    },
    {
      "test_name": "場景13c：第三輪 - 生成採購單",
      "instruction": "幫我生成採購單，數量 100 件",
      "status": "✅ 通過",
      "expected_success": true,
      "actual_success": true,
      "response_status": "completed",
      "error": null,
      "result": {
        "success": true,
        "task_type": "generate_purchase_order",
        "result": {
          "success": true,
          "purchase_order": {
            "purchase_order_id": "PO-20260113-6F65AA",
            "part_number": "ABC-123",
            "part_name": "電子元件 A",
            "quantity": 100,
            "supplier": "供應商 A",
            "unit_price": 50.0,
            "total_amount": 5000.0,
            "status": "虛擬生成",
            "created_at": "2026-01-13T20:24:48.113980",
            "created_by": "mm_agent",
            "note": "此為虛擬採購單，僅用於測試"
          }
        },
        "error": null,
        "metadata": null,
        "semantic_analysis": {
          "intent": "generate_purchase_order",
          "confidence": 0.8,
          "parameters": {
            "part_number": "ABC-123",
            "quantity": 100
          },
          "original_instruction": "料號 ABC-123 幫我生成採購單，數量 100 件",
          "clarification_needed": false,
          "clarification_questions": []
        },
        "responsibility": "生成採購單",
        "data_queries": [],
        "validation": null,
        "anomalies": []
      }
    },
    {
      "test_name": "場景14a：查詢第一個料號",
      "instruction": "查詢料號 ABC-123 的信息",
      "status": "✅ 通過",
      "expected_success": true,
      "actual_success": true,
      "response_status": "completed",
      "error": null,
      "result": {
        "success": true,
        "task_type": "query_part",
        "result": {
          "success": true,
          "part_number": "ABC-123",
          "part_info": {
            "part_number": "ABC-123",
            "name": "電子元件 A",
            "specification": "10x10x5mm",
            "unit": "PCS",
            "supplier": "供應商 A",
            "category": "電子元件",
            "safety_stock": 100,
            "unit_price": 50.0,
            "currency": "TWD",
            "description": "高品質電子元件，適用於各種電子設備"
          }
        },
        "error": null,
        "metadata": null,
        "semantic_analysis": {
          "intent": "query_part",
          "confidence": 0.8,
          "parameters": {
            "part_number": "ABC-123",
            "quantity": null
          },
          "original_instruction": "查詢料號 ABC-123 的信息",
          "clarification_needed": false,
          "clarification_questions": []
        },
        "responsibility": "查詢物料基本信息",
        "data_queries": [],
        "validation": null,
        "anomalies": []
      }
    },
    {
      "test_name": "場景14b：查詢第二個料號",
      "instruction": "查詢料號 XYZ-456 的信息",
      "status": "✅ 通過",
      "expected_success": true,
      "actual_success": true,
      "response_status": "completed",
      "error": null,
      "result": {
        "success": true,
        "task_type": "query_part",
        "result": {
          "success": true,
          "part_number": "XYZ-456",
          "part_info": {
            "part_number": "XYZ-456",
            "name": "機械零件 B",
            "specification": "20x15x10mm",
            "unit": "PCS",
            "supplier": "供應商 B",
            "category": "機械零件",
            "safety_stock": 50,
            "unit_price": 120.0,
            "currency": "TWD",
            "description": "精密機械零件，用於工業設備"
          }
        },
        "error": null,
        "metadata": null,
        "semantic_analysis": {
          "intent": "query_part",
          "confidence": 0.8,
          "parameters": {
            "part_number": "XYZ-456",
            "quantity": null
          },
          "original_instruction": "查詢料號 XYZ-456 的信息",
          "clarification_needed": false,
          "clarification_questions": []
        },
        "responsibility": "查詢物料基本信息",
        "data_queries": [],
        "validation": null,
        "anomalies": []
      }
    },
    {
      "test_name": "場景15：複雜指令",
      "instruction": "查詢料號 ABC-123 的庫存，如果缺料就告訴我缺多少",
      "status": "✅ 通過",
      "expected_success": true,
      "actual_success": true,
      "response_status": "completed",
      "error": null,
      "result": {
        "success": true,
        "task_type": "query_part",
        "result": {
          "success": true,
          "part_number": "ABC-123",
          "part_info": {
            "part_number": "ABC-123",
            "name": "電子元件 A",
            "specification": "10x10x5mm",
            "unit": "PCS",
            "supplier": "供應商 A",
            "category": "電子元件",
            "safety_stock": 100,
            "unit_price": 50.0,
            "currency": "TWD",
            "description": "高品質電子元件，適用於各種電子設備"
          }
        },
        "error": null,
        "metadata": null,
        "semantic_analysis": {
          "intent": "query_part",
          "confidence": 0.8,
          "parameters": {
            "part_number": "ABC-123",
            "quantity": null
          },
          "original_instruction": "查詢料號 ABC-123 的庫存，如果缺料就告訴我缺多少",
          "clarification_needed": false,
          "clarification_questions": []
        },
        "responsibility": "查詢物料基本信息",
        "data_queries": [],
        "validation": null,
        "anomalies": []
      }
    },
    {
      "test_name": "場景16：查詢不存在的料號",
      "instruction": "查詢料號 ABC-999 的信息",
      "status": "✅ 通過",
      "expected_success": false,
      "actual_success": false,
      "response_status": "failed",
      "error": "Data Agent查詢失敗: File not found: bucket-datalake-assets/parts/ABC-999.json",
      "result": {
        "success": false,
        "task_type": "query_part",
        "result": {
          "success": false,
          "error": "Data Agent查詢失敗: File not found: bucket-datalake-assets/parts/ABC-999.json"
        },
        "error": null,
        "metadata": null,
        "semantic_analysis": {
          "intent": "query_part",
          "confidence": 0.8,
          "parameters": {
            "part_number": "ABC-999",
            "quantity": null
          },
          "original_instruction": "查詢料號 ABC-999 的信息",
          "clarification_needed": false,
          "clarification_questions": []
        },
        "responsibility": "查詢物料基本信息",
        "data_queries": [],
        "validation": null,
        "anomalies": []
      }
    },
    {
      "test_name": "場景17：生成採購單但未指定數量",
      "instruction": "為料號 ABC-123 生成採購單",
      "status": "✅ 通過",
      "expected_success": false,
      "actual_success": false,
      "response_status": "failed",
      "error": "缺少數量參數（quantity）",
      "result": {
        "success": false,
        "task_type": "generate_purchase_order",
        "result": {
          "success": false,
          "error": "缺少數量參數（quantity）"
        },
        "error": null,
        "metadata": null,
        "semantic_analysis": {
          "intent": "generate_purchase_order",
          "confidence": 0.8,
          "parameters": {
            "part_number": "ABC-123",
            "quantity": null
          },
          "original_instruction": "為料號 ABC-123 生成採購單",
          "clarification_needed": false,
          "clarification_questions": []
        },
        "responsibility": "生成採購單",
        "data_queries": [],
        "validation": null,
        "anomalies": []
      }
    },
    {
      "test_name": "場景18：查詢零庫存",
      "instruction": "查詢料號 ABC-123 的庫存",
      "status": "✅ 通過",
      "expected_success": true,
      "actual_success": true,
      "response_status": "completed",
      "error": null,
      "result": {
        "success": true,
        "task_type": "query_part",
        "result": {
          "success": true,
          "part_number": "ABC-123",
          "part_info": {
            "part_number": "ABC-123",
            "name": "電子元件 A",
            "specification": "10x10x5mm",
            "unit": "PCS",
            "supplier": "供應商 A",
            "category": "電子元件",
            "safety_stock": 100,
            "unit_price": 50.0,
            "currency": "TWD",
            "description": "高品質電子元件，適用於各種電子設備"
          }
        },
        "error": null,
        "metadata": null,
        "semantic_analysis": {
          "intent": "query_part",
          "confidence": 0.8,
          "parameters": {
            "part_number": "ABC-123",
            "quantity": null
          },
          "original_instruction": "查詢料號 ABC-123 的庫存",
          "clarification_needed": false,
          "clarification_questions": []
        },
        "responsibility": "查詢物料基本信息",
        "data_queries": [],
        "validation": null,
        "anomalies": []
      }
    },
    {
      "test_name": "場景19a：標準格式",
      "instruction": "查詢料號 ABC-123",
      "status": "✅ 通過",
      "expected_success": true,
      "actual_success": true,
      "response_status": "completed",
      "error": null,
      "result": {
        "success": true,
        "task_type": "query_part",
        "result": {
          "success": true,
          "part_number": "ABC-123",
          "part_info": {
            "part_number": "ABC-123",
            "name": "電子元件 A",
            "specification": "10x10x5mm",
            "unit": "PCS",
            "supplier": "供應商 A",
            "category": "電子元件",
            "safety_stock": 100,
            "unit_price": 50.0,
            "currency": "TWD",
            "description": "高品質電子元件，適用於各種電子設備"
          }
        },
        "error": null,
        "metadata": null,
        "semantic_analysis": {
          "intent": "query_part",
          "confidence": 0.8,
          "parameters": {
            "part_number": "ABC-123",
            "quantity": null
          },
          "original_instruction": "查詢料號 ABC-123",
          "clarification_needed": false,
          "clarification_questions": []
        },
        "responsibility": "查詢物料基本信息",
        "data_queries": [],
        "validation": null,
        "anomalies": []
      }
    },
    {
      "test_name": "場景19b：帶冒號",
      "instruction": "查詢料號：ABC-123",
      "status": "✅ 通過",
      "expected_success": true,
      "actual_success": true,
      "response_status": "completed",
      "error": null,
      "result": {
        "success": true,
        "task_type": "query_part",
        "result": {
          "success": true,
          "part_number": "ABC-123",
          "part_info": {
            "part_number": "ABC-123",
            "name": "電子元件 A",
            "specification": "10x10x5mm",
            "unit": "PCS",
            "supplier": "供應商 A",
            "category": "電子元件",
            "safety_stock": 100,
            "unit_price": 50.0,
            "currency": "TWD",
            "description": "高品質電子元件，適用於各種電子設備"
          }
        },
        "error": null,
        "metadata": null,
        "semantic_analysis": {
          "intent": "query_part",
          "confidence": 0.8,
          "parameters": {
            "part_number": "ABC-123",
            "quantity": null
          },
          "original_instruction": "查詢料號：ABC-123",
          "clarification_needed": false,
          "clarification_questions": []
        },
        "responsibility": "查詢物料基本信息",
        "data_queries": [],
        "validation": null,
        "anomalies": []
      }
    },
    {
      "test_name": "場景19c：英文",
      "instruction": "query part ABC-123",
      "status": "✅ 通過",
      "expected_success": true,
      "actual_success": true,
      "response_status": "completed",
      "error": null,
      "result": {
        "success": true,
        "task_type": "query_part",
        "result": {
          "success": true,
          "part_number": "ABC-123",
          "part_info": {
            "part_number": "ABC-123",
            "name": "電子元件 A",
            "specification": "10x10x5mm",
            "unit": "PCS",
            "supplier": "供應商 A",
            "category": "電子元件",
            "safety_stock": 100,
            "unit_price": 50.0,
            "currency": "TWD",
            "description": "高品質電子元件，適用於各種電子設備"
          }
        },
        "error": null,
        "metadata": null,
        "semantic_analysis": {
          "intent": "query_part",
          "confidence": 0.8,
          "parameters": {
            "part_number": "ABC-123",
            "quantity": null
          },
          "original_instruction": "query part ABC-123",
          "clarification_needed": false,
          "clarification_questions": []
        },
        "responsibility": "查詢物料基本信息",
        "data_queries": [],
        "validation": null,
        "anomalies": []
      }
    },
    {
      "test_name": "場景20a：步驟1 - 查詢料號信息",
      "instruction": "查詢料號 ABC-123 的信息",
      "status": "✅ 通過",
      "expected_success": true,
      "actual_success": true,
      "response_status": "completed",
      "error": null,
      "result": {
        "success": true,
        "task_type": "query_part",
        "result": {
          "success": true,
          "part_number": "ABC-123",
          "part_info": {
            "part_number": "ABC-123",
            "name": "電子元件 A",
            "specification": "10x10x5mm",
            "unit": "PCS",
            "supplier": "供應商 A",
            "category": "電子元件",
            "safety_stock": 100,
            "unit_price": 50.0,
            "currency": "TWD",
            "description": "高品質電子元件，適用於各種電子設備"
          }
        },
        "error": null,
        "metadata": null,
        "semantic_analysis": {
          "intent": "query_part",
          "confidence": 0.8,
          "parameters": {
            "part_number": "ABC-123",
            "quantity": null
          },
          "original_instruction": "查詢料號 ABC-123 的信息",
          "clarification_needed": false,
          "clarification_questions": []
        },
        "responsibility": "查詢物料基本信息",
        "data_queries": [],
        "validation": null,
        "anomalies": []
      }
    },
    {
      "test_name": "場景20b：步驟2 - 查詢庫存",
      "instruction": "查詢它的庫存",
      "status": "✅ 通過",
      "expected_success": true,
      "actual_success": true,
      "response_status": "completed",
      "error": null,
      "result": {
        "success": true,
        "task_type": "query_stock",
        "result": {
          "success": true,
          "part_number": "ABC-123",
          "stock_info": {
            "part_number": "ABC-123",
            "current_stock": 50,
            "location": "倉庫 A-01",
            "last_updated": "2026-01-13T10:00:00Z",
            "reserved_quantity": 0,
            "available_stock": 50,
            "warnings": [
              "無法解析 last_updated 時間戳"
            ],
            "anomalies": [],
            "has_anomalies": false
          }
        },
        "error": null,
        "metadata": null,
        "semantic_analysis": {
          "intent": "query_stock",
          "confidence": 0.8,
          "parameters": {
            "part_number": "ABC-123",
            "quantity": null
          },
          "original_instruction": "查詢ABC-123的庫存",
          "clarification_needed": false,
          "clarification_questions": []
        },
        "responsibility": "查詢庫存信息",
        "data_queries": [],
        "validation": null,
        "anomalies": []
      }
    },
    {
      "test_name": "場景20c：步驟3 - 缺料分析",
      "instruction": "分析缺料情況",
      "status": "✅ 通過",
      "expected_success": true,
      "actual_success": true,
      "response_status": "completed",
      "error": null,
      "result": {
        "success": true,
        "task_type": "analyze_shortage",
        "result": {
          "success": true,
          "analysis": {
            "part_number": "ABC-123",
            "part_name": "電子元件 A",
            "current_stock": 50,
            "safety_stock": 100,
            "status": "low",
            "is_shortage": false,
            "shortage_quantity": 50,
            "location": "倉庫 A-01",
            "recommendation": "庫存偏低，建議補貨 50 件",
            "anomalies": []
          }
        },
        "error": null,
        "metadata": null,
        "semantic_analysis": {
          "intent": "analyze_shortage",
          "confidence": 0.8,
          "parameters": {
            "part_number": "ABC-123",
            "quantity": null
          },
          "original_instruction": "料號 ABC-123 分析缺料情況",
          "clarification_needed": false,
          "clarification_questions": []
        },
        "responsibility": "缺料分析",
        "data_queries": [],
        "validation": null,
        "anomalies": []
      }
    },
    {
      "test_name": "場景20d：步驟4 - 生成採購單",
      "instruction": "生成採購單，數量 150 件",
      "status": "✅ 通過",
      "expected_success": true,
      "actual_success": true,
      "response_status": "completed",
      "error": null,
      "result": {
        "success": true,
        "task_type": "generate_purchase_order",
        "result": {
          "success": true,
          "purchase_order": {
            "purchase_order_id": "PO-20260113-8738CB",
            "part_number": "ABC-123",
            "part_name": "電子元件 A",
            "quantity": 150,
            "supplier": "供應商 A",
            "unit_price": 50.0,
            "total_amount": 7500.0,
            "status": "虛擬生成",
            "created_at": "2026-01-13T20:24:51.404988",
            "created_by": "mm_agent",
            "note": "此為虛擬採購單，僅用於測試"
          }
        },
        "error": null,
        "metadata": null,
        "semantic_analysis": {
          "intent": "generate_purchase_order",
          "confidence": 0.8,
          "parameters": {
            "part_number": "ABC-123",
            "quantity": 150
          },
          "original_instruction": "料號 ABC-123 生成採購單，數量 150 件",
          "clarification_needed": false,
          "clarification_questions": []
        },
        "responsibility": "生成採購單",
        "data_queries": [],
        "validation": null,
        "anomalies": []
      }
    }
  ]
}
