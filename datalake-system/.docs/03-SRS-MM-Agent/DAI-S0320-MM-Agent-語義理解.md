# DAI-S0320 MM-Agent 語義理解規格書

**文件編號**: DAI-S0320  
**版本**: 3.1  
**日期**: 2026-02-27  
**依據代碼**: `datalake-system/mm_agent/`

---

## 1. 產品目的 (Product Purpose)

### 1.1 核心聲明

語義理解服務負責將自然語言轉換為結構化的語義表示，實現從「什麼」到「在哪裡查」的映射。

### 1.2 解決問題

- 自然語言語義解析
- 業務術語映射
- 上下文理解

### 1.3 服務對象

- 意圖分類模組
- 數據查詢模組

---

## 2. 產品概覽 (Product Overview)

### 2.1 目標用戶

| 用戶類型 | 使用場景 | 需求 |
|----------|----------|------|
| 分類器 | 意圖後處理 | 語義擴展 |
| 翻譯器 | SQL 生成 | 語義映射 |

### 2.2 技術棧

| 層級 | 技術 | 版本 | 用途 |
|------|------|------|------|
| Translator | translator.py | - | 語義翻譯 |
| Semantic | semantic_translator.py | - | 語義處理 |
| Extractor | extractor.py | - | 實體提取 |

---

## 3. 功能需求 (Functional Requirements)

### 3.1 語義翻譯

| 功能 ID | 功能名稱 | 說明 |
|---------|----------|------|
| F-MM-032-001 | 術語映射 | 業務術語到系統術語 |
| F-MM-032-002 | 同義詞處理 | 識別同義表達 |
| F-MM-032-003 | 縮寫展開 | 展開縮寫 |

### 3.2 實體提取

| 功能 ID | 功能名稱 | 說明 |
|---------|----------|------|
| F-MM-032-010 | 料號提取 | 識別料號格式 |
| F-MM-032-011 | 倉庫提取 | 識別倉庫代碼 |
| F-MM-032-012 | 日期提取 | 識別日期表達 |

### 3.3 上下文處理

| 功能 ID | 功能名稱 | 說明 |
|---------|----------|------|
| F-MM-032-020 | 指代消解 | 消解 this/that |
| F-MM-032-021 | 省略補充 | 補充省略成分 |
| F-MM-032-022 | 對話歷史 | 歷史上下文 |

---

## 4. 性能要求 (Performance Requirements)

| 指標 | 目標值 | 說明 |
|------|--------|------|
| 翻譯響應 | ≤ 1500ms | 單次翻譯 |
| 提取準確率 | ≥ 90% | 實體識別 |

---

## 5. 錯誤碼詳細定義

| 錯誤碼 | 名稱 | 描述 |
|--------|------|------|
| E320-001 | TRANSLATE_FAILED | 翻譯失敗 |
| E320-002 | EXTRACT_FAILED | 提取失敗 |
| E320-003 | CONTEXT_ERROR | 上下文錯誤 |

---

*文件結束*
