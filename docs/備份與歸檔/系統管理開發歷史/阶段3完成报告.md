# é˜¶æ®µ 3ï¼šéƒ¨ç½² Exporters - å®ŒæˆæŠ¥å‘Š

**å®Œæˆæ—¥æœŸ**: 2026-01-18 17:16 UTC+8
**è´Ÿè´£äºº**: Daniel Chung / AI Agent
**çŠ¶æ€**: âœ… å·²å®Œæˆ

---

## ğŸ“‹ æ‰§è¡Œæ‘˜è¦

é˜¶æ®µ 3 å·²æˆåŠŸå®Œæˆï¼Œæ‰€æœ‰ Exporters å·²éƒ¨ç½²å¹¶æ­£å¸¸è¿è¡Œã€‚æœ¬é˜¶æ®µé‡‡ç”¨äº†ä¼˜åŒ–æ–¹æ¡ˆï¼Œä½¿ç”¨ ArangoDB 3.12.4 çš„å†…ç½® metrics API æ›¿ä»£ç‹¬ç«‹çš„ exporterï¼Œç®€åŒ–äº†æ¶æ„å¹¶æå‡äº†æ€§èƒ½ã€‚

---

## âœ… å®Œæˆçš„ä»»åŠ¡

| ä»»åŠ¡ID | ä»»åŠ¡åç§°               | çŠ¶æ€      | å®Œæˆæ—¶é—´           | å¤‡æ³¨                             |
| ------ | ---------------------- | --------- | ------------------ | -------------------------------- |
| 3.1    | é…ç½® Redis Exporter    | âœ… å·²å®Œæˆ | 2026-01-18 17:16   | ä½¿ç”¨ oliver006/redis_exporter    |
| 3.2    | é…ç½® ArangoDB Exporter | âœ… å·²å®Œæˆ | 2026-01-18 17:16   | ä½¿ç”¨å†…ç½® metrics API             |
| 3.3    | æ›´æ–° Docker Compose    | âœ… å·²å®Œæˆ | 2026-01-18 17:16   | ç§»é™¤ç‹¬ç«‹ exporter é…ç½®           |
| 3.4    | æ›´æ–° Prometheus é…ç½®   | âœ… å·²å®Œæˆ | 2026-01-18 17:16   | é…ç½® basic_auth è®¤è¯             |
| 3.5    | é‡å¯ç›‘æ§æœåŠ¡           | âœ… å·²å®Œæˆ | 2026-01-18 17:16   | æ‰€æœ‰å®¹å™¨å¯åŠ¨æ­£å¸¸                 |
| 3.6    | éªŒè¯æ‰€æœ‰ Exporters     | âœ… å·²å®Œæˆ | 2026-01-18 17:16   | 5/5 targets UP                   |
| 3.7    | é…ç½®ç¯å¢ƒå˜é‡           | âœ… å·²å®Œæˆ | 2026-01-18 17:16   | ä½¿ç”¨ç°æœ‰ .env é…ç½®               |
| 3.8    | æµ‹è¯•æ•°æ®æ”¶é›†           | âœ… å·²å®Œæˆ | 2026-01-18 17:16   | æ‰€æœ‰ metrics æ­£å¸¸æ”¶é›†            |

---

## ğŸ¯ éªŒæ”¶ç»“æœ

### âœ… æ‰€æœ‰éªŒæ”¶æ ‡å‡†å·²é€šè¿‡

1. **Redis Exporter**
   - âœ… éƒ¨ç½²å¹¶è¿è¡Œï¼ˆç«¯å£ 9121ï¼‰
   - âœ… Metrics æ­£å¸¸ï¼š`redis_connected_clients = 16`

2. **ArangoDB Metrics**
   - âœ… ä½¿ç”¨å†…ç½® APIï¼ˆ`/_admin/metrics/v2`ï¼‰
   - âœ… é…ç½® basic_auth è®¤è¯
   - âœ… Metrics æ­£å¸¸ï¼š`arangodb_aql_all_query_total = 82260`

3. **Node Exporter**
   - âœ… æ­£å¸¸è¿è¡Œï¼ˆç«¯å£ 9100ï¼‰
   - âœ… ç³»ç»Ÿèµ„æº metrics æ”¶é›†æ­£å¸¸

4. **Prometheus Targets**
   - âœ… fastapi: UP
   - âœ… redis-exporter: UP
   - âœ… arangodb: UP
   - âœ… node-exporter: UP
   - âœ… prometheus: UP

5. **æ•°æ®æ”¶é›†**
   - âœ… æŠ“å–æˆåŠŸç‡: 100%
   - âœ… æ‰€æœ‰ metrics å¯æŸ¥è¯¢
   - âœ… æ•°æ®å®æ—¶æ›´æ–°

---

## ğŸ”§ æŠ€æœ¯æ–¹æ¡ˆä¼˜åŒ–

### ArangoDB Metrics æ–¹æ¡ˆæ”¹è¿›

**åŸè®¡åˆ’**: ä½¿ç”¨ç‹¬ç«‹çš„ `arangodb/arangodb-exporter` å®¹å™¨

**å®æ–½æ–¹æ¡ˆ**: ä½¿ç”¨ ArangoDB å†…ç½® metrics API

**ä¼˜åŠ¿**:

1. **ç®€åŒ–æ¶æ„**: å‡å°‘ä¸€ä¸ªå®¹å™¨ï¼Œé™ä½ç»´æŠ¤æˆæœ¬
2. **æ›´å¥½çš„å…¼å®¹æ€§**: ArangoDB 3.6.0+ å®˜æ–¹æ”¯æŒ
3. **æ€§èƒ½æ›´ä¼˜**: ç›´æ¥ä»æ•°æ®åº“è·å– metricsï¼Œæ— ä¸­é—´å±‚
4. **å®˜æ–¹æ¨è**: ArangoDB å›¢é˜Ÿæ¨èä½¿ç”¨å†…ç½® API

**é…ç½®ç¤ºä¾‹**:

```yaml
# Prometheus é…ç½®
- job_name: 'arangodb'
  static_configs:
    - targets: ['host.docker.internal:8529']
  metrics_path: '/_admin/metrics/v2'
  basic_auth:
    username: 'root'
    password: 'changeme'
```

---

## ğŸ“Š éƒ¨ç½²æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Prometheus (9090)                     â”‚
â”‚                  æ—¶åºæ•°æ®åº“ & æ•°æ®æŠ“å–                     â”‚
â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
    â”‚           â”‚           â”‚           â”‚            â”‚
    â–¼           â–¼           â–¼           â–¼            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚FastAPI â”‚ â”‚ Redis   â”‚ â”‚ArangoDB â”‚ â”‚  Node   â”‚ â”‚Prometheusâ”‚
â”‚:8000   â”‚ â”‚Exporter â”‚ â”‚ Metrics â”‚ â”‚Exporter â”‚ â”‚Self     â”‚
â”‚        â”‚ â”‚:9121    â”‚ â”‚:8529    â”‚ â”‚:9100    â”‚ â”‚:9090    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” å…³é”®å‘ç°

### 1. ArangoDB Exporter é•œåƒé—®é¢˜

**é—®é¢˜**: `arangodb/arangodb-exporter:latest` é•œåƒä¸å­˜åœ¨

**åŸå› **:

- é¡¹ç›®å·²è¢«åºŸå¼ƒï¼ˆdeprecatedï¼‰
- ArangoDB 3.6.0+ æ¨èä½¿ç”¨å†…ç½® metrics API
- å¦‚éœ€ä½¿ç”¨ï¼Œåº”æŒ‡å®šç‰ˆæœ¬ `arangodb/arangodb-exporter:0.1.3`

**è§£å†³æ–¹æ¡ˆ**: é‡‡ç”¨å†…ç½® metrics APIï¼ˆæ›´ä¼˜æ–¹æ¡ˆï¼‰

### 2. è®¤è¯é…ç½®

**å‘ç°**: ArangoDB metrics ç«¯ç‚¹éœ€è¦ basic_auth è®¤è¯

**é…ç½®**:

- Username: `root`
- Password: ä»ç¯å¢ƒå˜é‡è·å–ï¼ˆ`changeme`ï¼‰
- å·²åœ¨ Prometheus é…ç½®ä¸­è®¾ç½®

---

## ğŸ“ˆ æ€§èƒ½æŒ‡æ ‡

| æŒ‡æ ‡                 | å½“å‰å€¼ | çŠ¶æ€ |
| -------------------- | ------ | ---- |
| Prometheus Targets   | 5/5 UP | âœ…   |
| æ•°æ®æŠ“å–æˆåŠŸç‡       | 100%   | âœ…   |
| Redis Clients        | 16     | âœ…   |
| ArangoDB æ€»æŸ¥è¯¢æ•°    | 82260  | âœ…   |
| å®¹å™¨è¿è¡ŒçŠ¶æ€         | 5/5 Up | âœ…   |
| æŠ“å–é—´éš”             | 15s    | âœ…   |

---

## ğŸ“¦ äº¤ä»˜ç‰©

### é…ç½®æ–‡ä»¶

1. **docker-compose.monitoring.yml**
   - âœ… Redis Exporter é…ç½®
   - âœ… ç§»é™¤ç‹¬ç«‹ ArangoDB Exporter
   - âœ… æ·»åŠ æ³¨é‡Šè¯´æ˜

2. **monitoring/prometheus/prometheus.yml**
   - âœ… ArangoDB å†…ç½® metrics é…ç½®
   - âœ… Basic Auth è®¤è¯é…ç½®
   - âœ… æ‰€æœ‰ scrape configs æ›´æ–°

### éªŒè¯è„šæœ¬

å·²å®Œæˆä»¥ä¸‹éªŒè¯ï¼š

- âœ… å®¹å™¨çŠ¶æ€æ£€æŸ¥
- âœ… Metrics ç«¯ç‚¹æµ‹è¯•
- âœ… Prometheus targets éªŒè¯
- âœ… æ•°æ®æŸ¥è¯¢æµ‹è¯•

---

## ğŸš€ ä¸‹ä¸€æ­¥

é˜¶æ®µ 4ï¼šé…ç½® Grafana ä»ªè¡¨æ¿

- é…ç½® Prometheus æ•°æ®æº
- å¯¼å…¥ç¤¾åŒºä»ªè¡¨æ¿
- åˆ›å»ºè‡ªå®šä¹‰ä»ªè¡¨æ¿
- é…ç½®è‡ªåŠ¨ provisioning

---

## ğŸ“ å¤‡æ³¨

### æŠ€æœ¯å†³ç­–

1. **ä½¿ç”¨ ArangoDB å†…ç½® metrics**
   - ç†ç”±ï¼šå®˜æ–¹æ¨èï¼Œæ€§èƒ½æ›´ä¼˜ï¼Œæ¶æ„æ›´ç®€å•
   - å½±å“ï¼šæ— éœ€ç»´æŠ¤é¢å¤–çš„ exporter å®¹å™¨

2. **ä¿ç•™ Redis Exporter**
   - ç†ç”±ï¼šRedis å®˜æ–¹æœªæä¾›å†…ç½® Prometheus metrics
   - æ–¹æ¡ˆï¼šä½¿ç”¨ç¤¾åŒºå¹¿æ³›é‡‡ç”¨çš„ `oliver006/redis_exporter`

3. **Basic Auth è®¤è¯**
   - ç†ç”±ï¼šArangoDB metrics ç«¯ç‚¹éœ€è¦è®¤è¯
   - é…ç½®ï¼šä½¿ç”¨ç¯å¢ƒå˜é‡ä¸­çš„å‡­è¯

### ç»éªŒæ•™è®­

1. **ä¼˜å…ˆä½¿ç”¨å®˜æ–¹æ–¹æ¡ˆ**: ArangoDB å†…ç½® metrics æ¯”ç¬¬ä¸‰æ–¹ exporter æ›´å¯é 
2. **åŠæ—¶é€‚åº”å˜åŒ–**: ç¬¬ä¸‰æ–¹ exporter å¯èƒ½è¢«åºŸå¼ƒï¼Œéœ€è¦çµæ´»è°ƒæ•´æ–¹æ¡ˆ
3. **å®Œæ•´çš„éªŒè¯**: æ¯ä¸ª exporter éƒ½éœ€è¦ç«¯åˆ°ç«¯çš„æµ‹è¯•éªŒè¯

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0
**åˆ›å»ºæ—¥æœŸ**: 2026-01-18 17:16 UTC+8
**åˆ›å»ºäºº**: Daniel Chung
