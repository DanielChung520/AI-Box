<!--
代碼功能說明: WBS 1.3 ChromaDB 部署子計劃
創建日期: 2025-11-25 19:13 (UTC+8)
創建人: Daniel Chung
最後修改日期: 2025-11-25 19:13 (UTC+8)
-->

# WBS 1.3 ChromaDB 部署子計劃

## 1. 背景與目標

- 於 4 個工作日內完成 ChromaDB 部署、SDK 封裝與檢索性能驗證，作為 RAG 的核心向量存儲。

## 2. 範圍

- Docker/K8s 部署、監控設定、備援策略。
- Python SDK 封裝：CRUD、向量插入/查詢、命名空間管理。
- 檢索 API、效能測試與調優建議。

## 3. 工作拆解

| 任務編號 | 描述 | 負責人 | 工期 | 依賴 |
|---------|------|--------|------|------|
| 1.3.1 | ChromaDB 安裝與配置（Docker/K8s） | DevOps-1 | 1 天 | 1.0.* 環境 |
| 1.3.2 | SDK 封裝（連線池、錯誤處理、封裝方法） | Backend-1 | 1.5 天 | 1.3.1 |
| 1.3.3 | 向量檢索功能、API 實例與單元測試 | Backend-1 | 1 天 | 1.3.2 |
| 1.3.4 | 性能優化（批量寫入、index 調整、壓測） | Backend-1 | 0.5 天 | 1.3.3 |

## 4. 時間表（2025/11/29 - 2025/12/03）

- 11/29：完成 1.3.1。
- 12/01：完成 1.3.2 SDK 主要功能。
- 12/02：完成 1.3.3 檢索功能與測試。
- 12/03：進行 1.3.4 性能優化並產出報告。

## 5. 資源與交付物

- 資源：DevOps-1（部署）、Backend-1（SDK/檢索）、AI-1（提供嵌入測試資料）。
- 交付物：
  - `infra/chroma/` 部署文件與監控 dashboard。
  - `libs/chromadb_client` Python 套件、使用指南。
  - 性能測試報告（QPS、P95 latency、資源使用）。

## 6. 風險與對策

- **I/O 性能不足**：採用本地 SSD 儲存與資源限制配置；必要時啟用 sharding。
- **嵌入維度不一致**：在 SDK 中加入 metadata 校驗與轉換。

## 7. 驗收標準

- 在 staging 環境成功寫入 1k 筆嵌入並於 200ms 內完成檢索。
- SDK 單元測試覆蓋率 ≥80%，並通過 CI。
- 監控儀表板顯示 CPU、記憶體、I/O 指標。

## 8. 更新紀錄

| 日期 | 說明 | 更新人 |
|------|------|--------|
| 2025-11-25 | 初版子計劃建立 | Daniel Chung |
