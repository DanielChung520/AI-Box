<!--
代碼功能說明: WBS 1.6 基礎安全模組子計劃
創建日期: 2025-11-25 19:13 (UTC+8)
創建人: Daniel Chung
最後修改日期: 2025-11-25 19:13 (UTC+8)
-->

# WBS 1.6 基礎安全模組子計劃

## 1. 背景與目標
- 為階段一建立完整的安全基礎，包括身份驗證、授權、密鑰管理與 TLS，工期 6 個工作日。
- 確保 FastAPI、MCP、資料庫、LLM 接口都能使用統一安全層。

## 2. 範圍
- JWT Token 服務、API Key 管理、RBAC 權限系統。
- Secret 管理服務、TLS/SSL 憑證部署、輸入驗證框架。
- 安全測試腳本、文件與 CI 檢查。

## 3. 工作拆解
| 任務編號 | 描述 | 負責人 | 工期 | 依賴 |
|---------|------|--------|------|------|
| 1.6.1 | JWT Token 服務（簽章、更新、黑名單） | Backend-1 | 1.5 天 | 1.1 |
| 1.6.2 | API Key 管理（生成、輪換、限流） | Backend-1 | 1 天 | 1.6.1 |
| 1.6.3 | RBAC 權限系統（角色、策略檔、審計） | Backend-1 | 1.5 天 | 1.6.2 |
| 1.6.4 | Secret 管理服務（Vault/密鑰輪換） | DevOps-1 | 1 天 | 1.0.*, 1.6.2 |
| 1.6.5 | TLS/SSL 配置（證書申請、部署、自動更新） | DevOps-1 | 1 天 | 1.6.4 |
| 1.6.6 | 輸入驗證框架（schema 驗證、rate limit） | Backend-1 | 1 天 | 1.1, 1.6.1 |

## 4. 時間表（2025/12/03 - 2025/12/10）
- 12/03：啟動 JWT 服務、API Key 模組。
- 12/04：完成 API Key、啟動 RBAC。
- 12/05：完成 RBAC 主要功能，開始 Secret 管理部署。
- 12/06：完成 Secret 管理，進入 TLS/SSL 配置。
- 12/09：完成 TLS/SSL、輸入驗證框架。
- 12/10：整合測試、滲透測試腳本、文件。

## 5. 資源與交付物
- 資源：Backend-1（Auth/RBAC/驗證）、DevOps-1（Secret/TLS）、Security 顧問兼职支援。
- 交付物：
  - `services/security/` 模組代碼、設定檔。
  - 憑證與密鑰管理文件、輪換指引。
  - 安全測試報告（JWT、API Key、TLS、輸入驗證）。

## 6. 風險與對策
- **憑證管理複雜**：採自動化 renew（如 cert-manager）並設定告警。
- **RBAC 策略難以維護**：採 YAML/JSON policy 檔與版本控制。
- **安全測試覆蓋不足**：建立自動化測試 pipeline，串接 OWASP ZAP。

## 7. 驗收標準
- JWT、API Key、RBAC 皆可在 FastAPI 與 MCP 服務中驗證，並有單元/集成測試。
- Secret 管理與 TLS 憑證在 staging 環境成功發放、續期。
- 輸入驗證框架可阻擋常見攻擊（XSS、SQLi、Injection），並有測試證明。

## 8. 更新紀錄
| 日期 | 說明 | 更新人 |
|------|------|--------|
| 2025-11-25 | 初版子計劃建立 | Daniel Chung |
