# Secret ID/Key ç²å–æ–¹å¼æŒ‡å—

## æ›´æ–°æ—¥æœŸï¼š2025-01-27

## æ ¸å¿ƒç¢ºèª

âœ… **å¤–éƒ¨ Agent å¦‚æœç„¡æ³•æä¾› Secret ID/Keyï¼Œè¨»å†Šç¨‹åºæœƒè¢«é˜»æ­¢ä¸¦é€€å‡ºã€‚**

### é©—è­‰é»

1. **å‰ç«¯é©—è­‰**ï¼šæœªé©—è­‰ Secret ç„¡æ³•æäº¤è¨»å†Šè¡¨å–®
2. **å¾Œç«¯é©—è­‰**ï¼šæ²’æœ‰ Secret ID è¿”å› HTTP 400 éŒ¯èª¤

---

## Secret ID/Key ç²å–æ–¹å¼

### Phase 1ï¼šç•¶å‰æ–¹å¼ï¼ˆæ¸¬è©¦/é–‹ç™¼ç’°å¢ƒï¼‰

#### æ–¹å¼ 1ï¼šAPI ç”Ÿæˆï¼ˆç”¨æ–¼æ¸¬è©¦ï¼‰

**ç«¯é»**ï¼š`POST /api/v1/agents/secrets/generate`

**ä½¿ç”¨æ–¹å¼**ï¼š

1. **é€šé Swagger æ–‡æª”**ï¼š
   - è¨ªå• `http://localhost:8000/docs`
   - æ‰¾åˆ° `POST /api/v1/agents/secrets/generate`
   - åŸ·è¡Œè«‹æ±‚ï¼Œç²å– Secret ID/Key

2. **é€šé curl å‘½ä»¤**ï¼š

   ```bash
   curl -X POST "http://localhost:8000/api/v1/agents/secrets/generate" \
     -H "Content-Type: application/json" \
     -d '{"organization": "Your Organization"}'
   ```

3. **é€šéå‰ç«¯ API èª¿ç”¨**ï¼ˆé–‹ç™¼ç’°å¢ƒï¼‰ï¼š

   ```typescript
   const response = await generateSecret("Your Organization");
   // è¿”å› { secret_id, secret_key }
   ```

**æ³¨æ„äº‹é …**ï¼š

- âš ï¸ åƒ…ç”¨æ–¼æ¸¬è©¦å’Œé–‹ç™¼ç’°å¢ƒ
- âš ï¸ Secret Key åªåœ¨ç”Ÿæˆæ™‚è¿”å›ä¸€æ¬¡
- âš ï¸ ç”Ÿç”¢ç’°å¢ƒæ‡‰ä½¿ç”¨å¯©æ‰¹æµç¨‹

#### æ–¹å¼ 2ï¼šè¯ç¹«ç®¡ç†å“¡ï¼ˆç•¶å‰ç”Ÿç”¢ç’°å¢ƒï¼‰

- ç›´æ¥è¯ç¹« AI-Box ç®¡ç†å“¡
- èªªæ˜ç”³è«‹åŸå› å’Œä½¿ç”¨å ´æ™¯
- ç®¡ç†å“¡æ‰‹å‹•ç”Ÿæˆä¸¦ç™¼é€ Secret ID/Key

---

### Phase 2ï¼šå®Œæ•´ç”³è«‹æµç¨‹ï¼ˆæ¨è–¦å¯¦ç¾ï¼‰

#### ç”³è«‹æµç¨‹è¨­è¨ˆ

```
å¤–éƒ¨ Agent æä¾›è€…
   â†“
æäº¤ç”³è«‹ï¼ˆå¡«å¯«çµ„ç¹”ä¿¡æ¯ã€è¯ç¹«æ–¹å¼ã€Agent æè¿°ï¼‰
   â†“
AI-Box ç®¡ç†å“¡å¯©æ ¸
   â†“
å¯©æ ¸é€šé â†’ ç”Ÿæˆ Secret ID/Key
   â†“
é€šééƒµä»¶ç™¼é€ Secret çµ¦ç”³è«‹è€…
   â†“
ç”³è«‹è€…ä½¿ç”¨ Secret è¨»å†Š Agent
```

#### å¯¦æ–½æ­¥é©Ÿ

1. **å‰µå»ºç”³è«‹è¡¨å–®é é¢**
   - çµ„ç¹”åç¨±
   - è¯ç¹«äººä¿¡æ¯
   - Agent æœå‹™æè¿°
   - é æœŸä½¿ç”¨å ´æ™¯

2. **ç®¡ç†å“¡å¯©æ‰¹ç•Œé¢**
   - æŸ¥çœ‹ç”³è«‹åˆ—è¡¨
   - æ‰¹å‡†/æ‹’çµ•ç”³è«‹
   - è‡ªå‹•ç”Ÿæˆä¸¦ç™¼é€ Secret

3. **éƒµä»¶é€šçŸ¥ç³»çµ±**
   - ç”³è«‹æäº¤é€šçŸ¥ï¼ˆçµ¦ç®¡ç†å“¡ï¼‰
   - Secret ç°½ç™¼é€šçŸ¥ï¼ˆçµ¦ç”³è«‹è€…ï¼‰

---

## å»ºè­°å¯¦ç¾æ–¹æ¡ˆ

### æ–¹æ¡ˆ Aï¼šå¿«é€Ÿç”³è«‹ Modalï¼ˆæ¨è–¦ - å¯ç«‹å³å¯¦ç¾ï¼‰

åœ¨è¨»å†Šé é¢æ·»åŠ ä¸€å€‹ã€Œå¿«é€Ÿç”³è«‹ã€åŠŸèƒ½ï¼Œé»æ“Šå¾Œï¼š

1. å½ˆå‡ºç°¡å–®çš„è¡¨å–® Modal
2. å¡«å¯«çµ„ç¹”åç¨±å’Œè¯ç¹«éƒµç®±
3. æäº¤å¾Œèª¿ç”¨ `generateSecret` APIï¼ˆé–‹ç™¼ç’°å¢ƒï¼‰
   - æˆ–æäº¤ç”³è«‹ï¼ˆç”Ÿç”¢ç’°å¢ƒï¼Œç­‰å¾…å¯©æ‰¹ï¼‰
4. æˆåŠŸå¾Œè‡ªå‹•å¡«å…¥ Secret ID/Key
5. è‡ªå‹•é©—è­‰ä¸¦ç¹¼çºŒè¨»å†Š

**å„ªé»**ï¼š

- âœ… å¿«é€Ÿå¯¦ç¾
- âœ… ç”¨æˆ¶é«”é©—å¥½
- âœ… ç„¡éœ€è·³è½‰é é¢

### æ–¹æ¡ˆ Bï¼šç¨ç«‹çš„ç”³è«‹é é¢ï¼ˆPhase 2ï¼‰

å‰µå»ºå°ˆé–€çš„ Secret ç”³è«‹é é¢ï¼ŒåŒ…å«ï¼š

- å®Œæ•´çš„ç”³è«‹è¡¨å–®
- ç”³è«‹ç‹€æ…‹æŸ¥è©¢
- æ­·å²ç”³è«‹è¨˜éŒ„

---

## å‰ç«¯ UI æ”¹é€²å»ºè­°

### ç•¶å‰ç‹€æ…‹

åœ¨è¨»å†Šé é¢çš„ Secret é©—è­‰å€å¡Šï¼Œæœ‰ã€Œé»æ“Šé€™è£¡ç”³è«‹ã€éˆæ¥ï¼Œç›®å‰é¡¯ç¤º alert æç¤ºã€‚

### å»ºè­°æ”¹é€²

å°‡ alert æ”¹ç‚ºå¯¦éš›çš„ç”³è«‹åŠŸèƒ½ï¼š

```typescript
// é»æ“Šã€Œç”³è«‹ã€æ™‚ï¼Œå½ˆå‡ºç”³è«‹ Modal
const handleApplySecret = () => {
  setShowSecretApplicationModal(true);
};

// ç”³è«‹æˆåŠŸå¾Œï¼Œè‡ªå‹•å¡«å…¥
const handleApplicationSuccess = (secretId: string, secretKey: string) => {
  setSecretId(secretId);
  setSecretKey(secretKey);
  setShowSecretApplicationModal(false);
  // å¯é¸ï¼šè‡ªå‹•é©—è­‰
  // handleVerifySecret();
};
```

---

## å¯¦æ–½å„ªå…ˆç´š

### ç«‹å³å¯¦ç¾ï¼ˆPhase 1.5ï¼‰

1. âœ… åœ¨è¨»å†Šé é¢æ·»åŠ ã€Œå¿«é€Ÿç”Ÿæˆ Secretã€åŠŸèƒ½ï¼ˆé–‹ç™¼ç’°å¢ƒï¼‰
2. âœ… å‰µå»ºç°¡å–®çš„ç”³è«‹ Modal çµ„ä»¶

### å¾ŒçºŒå¯¦ç¾ï¼ˆPhase 2ï¼‰

1. âœ… å®Œæ•´çš„ç”³è«‹å¯©æ‰¹æµç¨‹
2. âœ… ç®¡ç†å“¡å¯©æ‰¹ç•Œé¢
3. âœ… éƒµä»¶é€šçŸ¥ç³»çµ±
4. âœ… ç”³è«‹ç‹€æ…‹è¿½è¹¤

---

## ç¸½çµ

### Secret ç²å–æ–¹å¼ç¸½çµ

| ç’°å¢ƒ | ç²å–æ–¹å¼ | ç‹€æ…‹ |
|------|---------|------|
| é–‹ç™¼/æ¸¬è©¦ | API ç”Ÿæˆ (`/agents/secrets/generate`) | âœ… å·²å¯¦ç¾ |
| ç”Ÿç”¢ç’°å¢ƒ | è¯ç¹«ç®¡ç†å“¡ | âœ… ç•¶å‰å¯ç”¨ |
| ç”Ÿç”¢ç’°å¢ƒ | ç”³è«‹å¯©æ‰¹æµç¨‹ | ğŸ”„ Phase 2 å¯¦ç¾ |

### è¨»å†Šè¦æ±‚ç¢ºèª

- âœ… **å¤–éƒ¨ Agent å¿…é ˆæä¾› Secret ID/Key**
- âœ… **æ²’æœ‰ Secret â†’ ç„¡æ³•è¨»å†Šï¼Œç¨‹åºé€€å‡º**
- âœ… **å¿…é ˆå…ˆé©—è­‰ Secret æ‰èƒ½æäº¤è¨»å†Š**
