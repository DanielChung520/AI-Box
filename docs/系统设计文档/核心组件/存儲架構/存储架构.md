# å­˜å‚¨æ¶æ„æ–‡æ¡£

**åˆ›å»ºæ—¥æœŸ**: 2025-12-29
**åˆ›å»ºäºº**: Daniel Chung
**æœ€åä¿®æ”¹æ—¥æœŸ**: 2026-01-20

**æ›´æ–°è®°å½•**ï¼š

- 2025-12-29ï¼šæ–‡æ¡£å·²åˆ›å»ºï¼ŒåŒ…å«å®Œæ•´çš„ SeaweedFS åŒæœåŠ¡éƒ¨ç½²æ¶æ„è¯´æ˜
- 2026-01-13ï¼šæ·»åŠ  S3 API å¯ç”¨é…ç½®è¯´æ˜ï¼Œæ›´æ–°ç«¯å£é…ç½®ä¿¡æ¯ï¼Œæ·»åŠ  Docker Compose é…ç½®è¯´æ˜
- 2026-01-20ï¼šæ·»åŠ  ArangoDB å’Œ ChromaDB å­˜å‚¨ä½ç½®è¯´æ˜ï¼Œæ•´åˆä¸‰å¤§å­˜å‚¨æœåŠ¡çš„å®Œæ•´æ–‡æ¡£

---

## ğŸ“‹ æ¦‚è¿°

æœ¬æ–‡æ¡£æè¿° AI-Box ç³»ç»Ÿçš„å­˜å‚¨æ¶æ„ï¼ŒåŒ…æ‹¬ SeaweedFS åŒæœåŠ¡éƒ¨ç½²æ¶æ„ã€S3 å­˜å‚¨å®ç°å’Œé…ç½®è¯´æ˜ã€‚

---

## ğŸ—ï¸ å­˜å‚¨æ¶æ„è®¾è®¡

### åŒæœåŠ¡æ¶æ„

AI-Box ç³»ç»Ÿä½¿ç”¨ **SeaweedFS åŒæœåŠ¡éƒ¨ç½²æ¶æ„**ï¼Œåˆ†åˆ«ä¸º AI-Box å’Œ DataLake é¡¹ç›®æä¾›ç‹¬ç«‹çš„å­˜å‚¨æœåŠ¡ï¼š

1. **AI-Box SeaweedFS æœåŠ¡**ï¼šå­˜æ”¾ AI-Box é¡¹ç›®å†…çš„éç»“æ„åŒ–æ•°æ®
2. **DataLake SeaweedFS æœåŠ¡**ï¼šå­˜æ”¾ DataLake é¡¹ç›®çš„æ–‡ä»¶å¤‡ä»½æ•°æ®ï¼ˆä½œç‚ºæ¸¬è©¦æ¨¡æ“¬ç”¨é€”ï¼Œä¸æ”¾åœ¨AI-box)

**æ¶æ„ä¼˜åŠ¿**ï¼š

- âœ… **èŒè´£åˆ†ç¦»**ï¼šAI-Box å’Œ DataLake å„è‡ªç®¡ç†è‡ªå·±çš„å­˜å‚¨
- âœ… **ç‹¬ç«‹æ‰©å±•**ï¼šä¸¤ä¸ªæœåŠ¡å¯ä»¥æ ¹æ®å„è‡ªéœ€æ±‚ç‹¬ç«‹æ‰©å±•
- âœ… **æ•°æ®éš”ç¦»**ï¼šé¿å…ä¸¤ä¸ªé¡¹ç›®ä¹‹é—´çš„æ•°æ®æ··æ‚
- âœ… **çµæ´»éƒ¨ç½²**ï¼šå¯ä»¥æ ¹æ®å®é™…éœ€æ±‚é€‰æ‹©ä¸åŒçš„éƒ¨ç½²ç­–ç•¥

### å­˜å‚¨åç«¯æ”¯æŒ

ç³»ç»Ÿæ”¯æŒä¸¤ç§å­˜å‚¨åç«¯ï¼š

1. **æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿ** (`LocalFileStorage`)ï¼šç”¨äºå¼€å‘å’Œæµ‹è¯•ç¯å¢ƒ
2. **S3/SeaweedFS** (`S3FileStorage`)ï¼šç”¨äºç”Ÿäº§ç¯å¢ƒï¼Œæ”¯æŒ Kubernetes æ— çŠ¶æ€æ‰©å±•

---

## ğŸ”§ SeaweedFS æœåŠ¡é…ç½®

### AI-Box SeaweedFS æœåŠ¡

**æœåŠ¡åç§°**ï¼š`seaweedfs-ai-box`

**ä¸»è¦å­˜å‚¨å†…å®¹**ï¼š

- **æ²»ç†ç›¸å…³æ—¥å¿—**ï¼š
  - å®¡è®¡æ—¥å¿—ï¼ˆAppend-Onlyï¼‰
  - ç³»ç»Ÿæ—¥å¿—ï¼ˆAppend-Onlyï¼‰
- **ç‰ˆæœ¬å†å²è®°å½•**ï¼šé…ç½®å’Œ Ontology çš„å†å²ç‰ˆæœ¬ï¼ˆAppend-Onlyï¼‰
- **å˜æ›´ææ¡ˆ**ï¼šå˜æ›´ææ¡ˆè®°å½•ï¼ˆAppend-Onlyï¼‰
- **DataLake å…ƒæ•°æ®**ï¼š
  - Data Agent ä¿å­˜çš„ DataLake dictionary å®šä¹‰
  - Data Agent ä¿å­˜çš„ DataLake schema å®šä¹‰
- **AI-Box é¡¹ç›®å…¶ä»–éç»“æ„åŒ–æ•°æ®**

**Buckets**ï¼š

- `bucket-governance-logs`ï¼šæ²»ç†ç›¸å…³æ—¥å¿—
- `bucket-version-history`ï¼šç‰ˆæœ¬å†å²è®°å½•
- `bucket-change-proposals`ï¼šå˜æ›´ææ¡ˆè®°å½•
- `bucket-datalake-dictionary`ï¼šDataLake dictionary å®šä¹‰
- `bucket-datalake-schema`ï¼šDataLake schema å®šä¹‰
- `bucket-ai-box-assets`ï¼šAI-Box é¡¹ç›®å…¶ä»–éç»“æ„åŒ–æ•°æ®

**ç«¯å£é…ç½®**ï¼š

- **Master API**ï¼š9333ï¼ˆå®¹å™¨å†…ï¼‰/ 9333ï¼ˆä¸»æœºï¼‰
- **Filer API**ï¼š8888ï¼ˆå®¹å™¨å†…ï¼‰/ 8888ï¼ˆä¸»æœºï¼‰
- **S3 API**ï¼š8333ï¼ˆå®¹å™¨å†…ï¼‰/ 8333ï¼ˆä¸»æœºï¼‰

**ç¯å¢ƒå˜é‡é…ç½®**ï¼š

```bash
AI_BOX_SEAWEEDFS_S3_ENDPOINT=http://localhost:8333
AI_BOX_SEAWEEDFS_S3_ACCESS_KEY=admin
AI_BOX_SEAWEEDFS_S3_SECRET_KEY=admin123
AI_BOX_SEAWEEDFS_USE_SSL=false
AI_BOX_SEAWEEDFS_FILER_ENDPOINT=http://localhost:8888
```

**Docker Compose é…ç½®**ï¼š

Filer èŠ‚ç‚¹éœ€è¦å¯ç”¨ S3 APIï¼Œé…ç½®å¦‚ä¸‹ï¼š

```yaml
seaweedfs-filer:
  command: "filer -master=seaweedfs-master:9333 -s3 -s3.port=8333 -s3.config=/etc/seaweedfs/s3.json"
  volumes:
    - seaweedfs-ai-box-s3-config:/etc/seaweedfs
```

**S3 é…ç½®æ–‡ä»¶**ï¼ˆ`s3.json`ï¼‰ï¼š

```json
{
  "identities": [
    {
      "name": "admin",
      "credentials": [
        {
          "accessKey": "admin",
          "secretKey": "admin123"
        }
      ],
      "actions": [
        "Admin",
        "Read",
        "Write"
      ]
    }
  ]
}
```

### DataLake SeaweedFS æœåŠ¡

**æœåŠ¡åç§°**ï¼š`seaweedfs-datalake`

**ä¸»è¦å­˜å‚¨å†…å®¹**ï¼š

- æ–‡ä»¶å¤‡ä»½æ•°æ®
- DataLake é¡¹ç›®ç›¸å…³çš„å­˜å‚¨éœ€æ±‚

**Buckets**ï¼š

- `bucket-file-backups`ï¼šæ–‡ä»¶å¤‡ä»½æ•°æ®
- `bucket-datalake-assets`ï¼šDataLake é¡¹ç›®ç›¸å…³å­˜å‚¨éœ€æ±‚

**ç«¯å£é…ç½®**ï¼š

- **Master API**ï¼š9333ï¼ˆå®¹å™¨å†…ï¼‰/ 9334ï¼ˆä¸»æœºï¼‰
- **Filer API**ï¼š8888ï¼ˆå®¹å™¨å†…ï¼‰/ 8889ï¼ˆä¸»æœºï¼‰
- **S3 API**ï¼š8333ï¼ˆå®¹å™¨å†…ï¼‰/ 8334ï¼ˆä¸»æœºï¼‰

**ç¯å¢ƒå˜é‡é…ç½®**ï¼š

```bash
DATALAKE_SEAWEEDFS_S3_ENDPOINT=http://localhost:8334
DATALAKE_SEAWEEDFS_S3_ACCESS_KEY=admin
DATALAKE_SEAWEEDFS_S3_SECRET_KEY=admin123
DATALAKE_SEAWEEDFS_USE_SSL=false
DATALAKE_SEAWEEDFS_FILER_ENDPOINT=http://localhost:8889
DATALAKE_SEAWEEDFS_MASTER_HOST=localhost
DATALAKE_SEAWEEDFS_MASTER_PORT=9334
```

**Docker Compose é…ç½®**ï¼š

Filer èŠ‚ç‚¹éœ€è¦å¯ç”¨ S3 APIï¼Œé…ç½®å¦‚ä¸‹ï¼š

```yaml
seaweedfs-datalake-filer:
  command: "filer -master=seaweedfs-datalake-master:9333 -s3 -s3.port=8333 -s3.config=/etc/seaweedfs/s3.json"
  ports:
    - "8889:8888" # Filer API
    - "8334:8333" # S3 API
  volumes:
    - seaweedfs-datalake-s3-config:/etc/seaweedfs
```

**S3 é…ç½®æ–‡ä»¶**ï¼ˆ`s3.json`ï¼‰ï¼š

```json
{
  "identities": [
    {
      "name": "admin",
      "credentials": [
        {
          "accessKey": "admin",
          "secretKey": "admin123"
        }
      ],
      "actions": [
        "Admin",
        "Read",
        "Write"
      ]
    }
  ]
}
```

**é‡è¦æç¤º**ï¼š

âš ï¸ **S3 API å¿…é¡»æ˜¾å¼å¯ç”¨**ï¼šSeaweedFS Filer é»˜è®¤ä¸å¯ç”¨ S3 APIï¼Œå¿…é¡»åœ¨å¯åŠ¨å‘½ä»¤ä¸­æ·»åŠ  `-s3` å‚æ•°ï¼Œå¦åˆ™ S3 API ç«¯å£è™½ç„¶æ˜ å°„äº†ï¼Œä½†æœåŠ¡ä¸ä¼šå“åº”è¯·æ±‚ã€‚

---

## ğŸ—„ï¸ ArangoDB å­˜å‚¨æœåŠ¡

### æ¦‚è¿°

ArangoDB æ˜¯ AI-Box ç³»ç»Ÿçš„å›¾æ•°æ®åº“ï¼Œç”¨äºå­˜å‚¨ï¼š

- **æ–‡ä»¶å…ƒæ•°æ®**ï¼ˆ`file_metadata`ï¼‰
- **çŸ¥è¯†å›¾è°±**ï¼ˆ`entities`, `relations`ï¼‰
- **ä»»åŠ¡ä¿¡æ¯**ï¼ˆ`user_tasks`ï¼‰
- **ç³»ç»Ÿé…ç½®**ï¼ˆ`system_configs`ï¼‰
- **Ontology**ï¼ˆ`ontologies`ï¼‰

### è¿æ¥é…ç½®

| é…ç½®é¡¹             | å€¼            | è¯´æ˜                           |
| ------------------ | ------------- | ------------------------------ |
| **Host**     | `localhost` | Docker å®¹å™¨åç¨±ç‚º `arangodb` |
| **Port**     | `8529`      | HTTP API ç«¯å£                  |
| **Database** | `ai_box_kg` | ä¸»æ•°æ®åº“åç§°                   |
| **Username** | `root`      | ç®¡ç†å‘˜ç”¨æˆ·å                   |
| **Password** | `changeme`  | ç®¡ç†å‘˜å¯†ç                      |

### ç¯å¢ƒå˜é‡é…ç½®

```bash
ARANGODB_HOST=localhost
ARANGODB_PORT=8529
ARANGODB_DATABASE=ai_box_kg
ARANGODB_USERNAME=root
ARANGODB_PASSWORD=changeme
```

### é…ç½®æ–‡ä»¶ä½ç½®

**config/config.json**ï¼š

```json
{
  "datastores": {
    "arangodb": {
      "host": "127.0.0.1",
      "port": 8529,
      "protocol": "http",
      "database": "ai_box_kg",
      "credentials": {
        "username": "ARANGODB_USERNAME",
        "password": "ARANGODB_PASSWORD"
      }
    }
  }
}
```

### Docker éƒ¨ç½²

```yaml
arangodb:
  image: arangodb/arangodb:latest
  ports:
    - "8529:8529"
  environment:
    ARANGO_ROOT_PASSWORD: changeme
  volumes:
    - arangodb_data:/var/lib/arangodb3
```

### æ•°æ®æŒä¹…åŒ–

| ç±»å‹                    | ä½ç½®                              | è¯´æ˜                          |
| ----------------------- | --------------------------------- | ----------------------------- |
| **Docker Volume** | `arangodb_data`                 | å®¹å™¨å†… `/var/lib/arangodb3` |
| **æœ¬åœ°å¤‡ä»½**      | `./data/datasets/arangodb/data` | å¯é€‰çš„æœ¬åœ°æŒ‚è½½                |

### ä¸»è¦ Collections

| Collection            | ç”¨é€”              | å­˜å‚¨å†…å®¹                            |
| --------------------- | ----------------- | ----------------------------------- |
| `file_metadata`     | æ–‡ä»¶å…ƒæ•°æ®        | æ–‡ä»¶åã€å¤§å°ã€task_idã€storage_path |
| `entities`          | å®ä½“ï¼ˆNERæå–ï¼‰   | å®ä½“åç§°ã€ç±»å‹ã€æ–‡ä»¶æ¥æº            |
| `relations`         | å…³ç³»ï¼ˆRE/RTæå–ï¼‰ | å®ä½“é—´å…³ç³»ã€å…³ç³»ç±»å‹                |
| `user_tasks`        | ä»»åŠ¡ä¿¡æ¯          | ä»»åŠ¡æ ‡é¢˜ã€çŠ¶æ€ã€fileTree            |
| `system_configs`    | ç³»ç»Ÿé…ç½®          | é…ç½®é”®å€¼å¯¹                          |
| `ontologies`        | Ontology å®šä¹‰     | Ontology åç¨±ã€ç‰ˆæœ¬ã€è¦å‰‡           |
| `processing_status` | å¤„ç†çŠ¶æ€          | æ–‡ä»¶è™•ç†é€²åº¦ã€å‘é‡åŒ–ç‹€æ…‹            |
| `upload_progress`   | ä¸Šå‚³é€²åº¦          | ä¸Šå‚³ç™¾åˆ†æ¯”ã€å®Œæˆç‹€æ…‹                |

### å¸¸ç”¨æŸ¥è¯¢

```bash
# æ£€æŸ¥æ•°æ®åº“è¿æ¥
curl http://localhost:8529/_db/ai_box_kg/_api/version

# åˆ—å‡ºæ‰€æœ‰ collections
curl -u root:changeme http://localhost:8529/_db/ai_box_kg/_api/collection

# æŸ¥çœ‹ collection æ–‡æ¡£æ•°é‡
curl -u root:changeme http://localhost:8529/_db/ai_box_kg/_api/collection/file_metadata/count
```

### ä»£ç å®ç°ä½ç½®

- **å®¢æˆ·ç«¯**ï¼š`database/arangodb/client.py`
- **æœåŠ¡**ï¼š`services/api/services/file_metadata_service.py`
- **å…ƒæ•°æ®**ï¼š`services/api/services/file_metadata_service.py`
- **Ontology**ï¼š`services/api/services/ontology_store_service.py`

---

## ğŸ“Š ChromaDB å­˜å‚¨æœåŠ¡

### æ¦‚è¿°

ChromaDB æ˜¯ AI-Box ç³»ç»Ÿçš„å‘é‡æ•°æ®åº“ï¼Œç”¨äºå­˜å‚¨ï¼š

- **æ–‡ä»¶å‘é‡**ï¼ˆæ–‡ä»¶åˆ†å¡Šåçš„ embeddingï¼‰
- **é•·æœŸè¨˜æ†¶**ï¼ˆAAM é•·æœŸè¨˜æ†¶ï¼‰

### è¿æ¥é…ç½®

| é…ç½®é¡¹                      | å€¼            | è¯´æ˜                           |
| --------------------------- | ------------- | ------------------------------ |
| **Mode**              | `http`      | HTTP æ¨¡å¼ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰          |
| **Host**              | `localhost` | Docker å®¹å™¨åç¨±ç‚º `chromadb` |
| **Port**              | `8001`      | HTTP API ç«¯å£                  |
| **Persist Directory** | ä¸ä½¿ç”¨        | HTTP æ¨¡å¼ä¸ä½¿ç”¨æœ¬åœ°æ–‡ä»¶        |

### ç¯å¢ƒå˜é‡é…ç½®

```bash
CHROMADB_MODE=http
CHROMADB_HOST=localhost
CHROMADB_PORT=8001
CHROMADB_PERSIST_DIR=./data/chroma_data  # ä»… persistent æ¨¡å¼ä½¿ç”¨
```

### é…ç½®æ–‡ä»¶ä½ç½®

**config/config.json**ï¼š

```json
{
  "datastores": {
    "chromadb": {
      "mode": "http",
      "http_port": 8001
    }
  }
}
```

### Docker éƒ¨ç½²

```yaml
chromadb:
  image: chromadb/chroma:latest
  ports:
    - "8001:8000"
  volumes:
    - chromadb_data:/chroma/chroma
```

### æ•°æ®æŒä¹…åŒ–

| ç±»å‹                    | ä½ç½®              | è¯´æ˜                      |
| ----------------------- | ----------------- | ------------------------- |
| **Docker Volume** | `chromadb_data` | å®¹å™¨å†… `/chroma/chroma` |
| **SQLite æ–‡ä»¶**   | ä¸ä½¿ç”¨            | HTTP æ¨¡å¼ä¸ä½¿ç”¨æœ¬åœ°æ–‡ä»¶   |

### âš ï¸ å†å²é…ç½®é—®é¢˜è¯´æ˜

**å•é¡ŒèƒŒæ™¯**ï¼ˆ2026-01-20 ä¿®å¾©ï¼‰ï¼š

æ—©æœŸç‰ˆæœ¬ä½¿ç”¨ `persistent` æ¨¡å¼ï¼Œå°è‡´å¤šå€‹ SQLite æ•¸æ“šæ–‡ä»¶ï¼š

| è·¯å¾‘                                        | ç‹€æ…‹      | èªªæ˜                   |
| ------------------------------------------- | --------- | ---------------------- |
| `./data/chroma/chroma.sqlite3`            | âœ… å·²åˆªé™¤ | æ­·å²æ®˜ç•™               |
| `./data/datasets/chromadb/chroma.sqlite3` | âœ… å·²åˆªé™¤ | æ­·å²æ®˜ç•™               |
| `./data/chroma_data/chroma.sqlite3`       | âœ… å·²åˆªé™¤ | `client.py` é è¨­è·¯å¾‘ |

**ç•¶å‰ç‹€æ…‹**ï¼š

- æ‰€æœ‰ SQLite æ–‡ä»¶å·²æ¸…é™¤
- çµ±ä¸€ä½¿ç”¨ HTTP æ¨¡å¼é€£æ¥ Docker å®¹å™¨
- Collections æ•¸é‡ï¼š0ï¼ˆç©ºï¼‰

### Collection å‘½åç­–ç•¥

**é…ç½®**ï¼š`config/config.json` â†’ `datastores.chromadb.collection_naming`

| ç­–ç•¥                   | åç¨±æ ¼å¼           | ç”¨é€”           |
| ---------------------- | ------------------ | -------------- |
| `file_based`ï¼ˆé»˜èªï¼‰ | `file_{file_id}` | æŒ‰æ–‡ä»¶çµ„ç¹”å‘é‡ |
| `user_based`         | `user_{user_id}` | æŒ‰ç”¨æˆ¶çµ„ç¹”å‘é‡ |

### å¸¸ç”¨å‘½ä»¤

```bash
# å¥åº·æª¢æŸ¥
curl http://localhost:8001/api/v2/heartbeat

# åˆ—å‡ºæ‰€æœ‰ collections
curl http://localhost:8001/api/v2/collections

# æŸ¥çœ‹ collection å…§å®¹é‡
curl http://localhost:8001/api/v2/collections/{collection_name}/count
```

### ä»£ç å®ç°ä½ç½®

- **å®¢æˆ·ç«¯**ï¼š`database/chromadb/client.py`
- **å‘é‡å­˜å‚¨æœåŠ¡**ï¼š`services/api/services/vector_store_service.py`
- **Embedding æœåŠ¡**ï¼š`services/api/services/embedding_service.py`
- **AAM å­˜å‚¨é€‚é…å™¨**ï¼š`agents/infra/memory/aam/storage_adapter.py`

---

## ğŸ“ˆ ä¸‰å¤§å­˜å‚¨æœåŠ¡å¯¹æ¯”

| ç‰¹æ€§                 | ArangoDB         | ChromaDB       | SeaweedFS     |
| -------------------- | ---------------- | -------------- | ------------- |
| **ç±»å‹**       | å›¾æ•°æ®åº“         | å‘é‡æ•°æ®åº“     | å¯¹è±¡å­˜å‚¨      |
| **å­˜å‚¨å†…å®¹**   | å…ƒæ•°æ®ã€çŸ¥è¯†å›¾è°± | å‘é‡ã€é•¿æœŸè®°å¿† | æ–‡ä»¶æœ¬ä½“      |
| **æŒä¹…åŒ–æ–¹å¼** | Docker Volume    | Docker Volume  | Docker Volume |
| **é»˜è®¤ç«¯å£**   | 8529             | 8001           | 8333 (S3)     |
| **é…ç½®æ¥æº**   | config.json      | config.json    | config.json   |
| **HTTP API**   | âœ…               | âœ…             | âœ…            |
| **S3 API**     | âŒ               | âŒ             | âœ…            |
| **ä¸»è¦ç”¨é€”**   | ç»“æ„åŒ–æ•°æ®æŸ¥è¯¢   | è¯­ä¹‰æœç´¢       | æ–‡ä»¶å­˜å‚¨      |

---

## ğŸ”§ å¿«é€Ÿå‚è€ƒè¡¨

### Docker æœåŠ¡çŠ¶æ€

```bash
# æŸ¥çœ‹æ‰€æœ‰å­˜å‚¨æœåŠ¡
docker ps | grep -E "arango|chroma|seaweed"

# ArangoDB
docker ps | grep arango

# ChromaDB
docker ps | grep chroma

# SeaweedFS (AI-Box)
docker ps | grep seaweedfs-ai-box

# SeaweedFS (DataLake)
docker ps | grep seaweedfs-datalake
```

### é…ç½®æ–‡ä»¶ä½ç½®

| æœåŠ¡      | é…ç½®æ–‡ä»¶                                              |
| --------- | ----------------------------------------------------- |
| ArangoDB  | `config/config.json` â†’ `datastores.arangodb`     |
| ChromaDB  | `config/config.json` â†’ `datastores.chromadb`     |
| SeaweedFS | `.env` æˆ– `config/config.json` â†’ `file_upload` |

### å¥åº·æ£€æŸ¥

| æœåŠ¡      | å‘½ä»¤                                                      |
| --------- | --------------------------------------------------------- |
| ArangoDB  | `curl http://localhost:8529/_db/ai_box_kg/_api/version` |
| ChromaDB  | `curl http://localhost:8001/api/v2/heartbeat`           |
| SeaweedFS | `curl http://localhost:8333/`                           |

---

## ğŸ’» ä»£ç å®ç°

### å­˜å‚¨æœåŠ¡åˆå§‹åŒ–

```python
from services.api.services.vector_store_service import get_vector_store_service
from services.api.services.file_metadata_service import get_metadata_service
from storage.file_storage import get_storage

# è·å–å‘é‡å­˜å‚¨æœåŠ¡
vector_store = get_vector_store_service()

# è·å–æ–‡ä»¶å…ƒæ•°æ®æœåŠ¡
metadata_service = get_metadata_service()

# è·å–æ–‡ä»¶å­˜å‚¨æœåŠ¡
storage = get_storage()
```

### é…ç½®è¯»å–

```python
from system.infra.config.config import get_config_section

# è¯»å– ArangoDB é…ç½®
arangodb_config = get_config_section("datastores", default={}).get("arangodb", {})

# è¯»å– ChromaDB é…ç½®
chromadb_config = get_config_section("datastores", default={}).get("chromadb", {})

# è¯»å–æ–‡ä»¶å­˜å‚¨é…ç½®
storage_config = get_config_section("file_upload", default={})
```

---

## ğŸš€ éƒ¨ç½²æŒ‡å—

### Docker Compose å¯åŠ¨

```bash
# å¯åŠ¨æ‰€æœ‰å­˜å‚¨æœåŠ¡
docker-compose up -d arangodb chromadb seaweedfs-ai-box seaweedfs-datalake

# æ£€æŸ¥æœåŠ¡çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f arangodb
docker-compose logs -f chromadb
docker-compose logs -f seaweedfs-ai-box
```

### Kubernetes éƒ¨ç½²

- **ArangoDB**ï¼š`k8s/arangodb/`
- **ChromaDB**ï¼š`k8s/chromadb/`ï¼ˆå¦‚æœ‰ï¼‰
- **SeaweedFS**ï¼š`k8s/seaweedfs-ai-box/`, `k8s/seaweedfs-datalake/`

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [èµ„æ–™å­˜å‚¨æ¶æ„é‡æ„åˆ†æä¸è®¡åˆ’](../è³‡æ–™å­˜å„²æ¶æ§‹é‡æ§‹åˆ†æèˆ‡è¨ˆåŠƒ.md)
- [èµ„æ–™æ¶æ„å»ºè®®æŠ¥å‘Š](../è³‡æ–™æ¶æ„å»ºè®®æŠ¥å‘Š.md)
- [ç³»ç»Ÿè®¾è®¡æ–‡æ¡£ä¸»README](../README.md)
- [æ–‡ä»¶ä¸Šä¼ æ¶æ„è¯´æ˜](./æ–‡ä»¶ä¸Šå‚³å‘é‡åœ–è­œ/ä¸Šå‚³çš„åŠŸèƒ½æ¶æ§‹èªªæ˜-v3.0.md)
- [Ontology ç³»ç»Ÿ](./æ–‡ä»¶ä¸Šå‚³å‘é‡åœ–è­œ/Ontologyç³»ç»Ÿ.md)
- [å¼ºåŒ– RAG ç³»ç»Ÿ](./æ–‡ä»¶ä¸Šå‚³å‘é‡åœ–è­œ/å¼ºåŒ–RAGç³»ç»Ÿ.md)

---

**æœ€åæ›´æ–°æ—¥æœŸ**: 2026-01-20
