# å‰ç«¯åŠ©ç†ç®¡ç†ç³»çµ±

**ç‰ˆæœ¬**: 1.1
**å‰µå»ºæ—¥æœŸ**: 2026-01-06
**å‰µå»ºäºº**: Daniel Chung
**æœ€å¾Œä¿®æ”¹æ—¥æœŸ**: 2026-01-06

---

## ğŸ“‹ ç›®éŒ„

1. [æ¦‚è¿°](#æ¦‚è¿°)
2. [ç³»çµ±æ¶æ§‹](#ç³»çµ±æ¶æ§‹)
3. [æ ¸å¿ƒçµ„ä»¶](#æ ¸å¿ƒçµ„ä»¶)
4. [åŠŸèƒ½æ¨¡å¡Š](#åŠŸèƒ½æ¨¡å¡Š)
5. [æ•¸æ“šå­˜å„²](#æ•¸æ“šå­˜å„²)
6. [ä½¿ç”¨æµç¨‹](#ä½¿ç”¨æµç¨‹)
7. [API æ¥å£](#api-æ¥å£)
8. [ç‹€æ…‹ç®¡ç†](#ç‹€æ…‹ç®¡ç†)
9. [äº‹ä»¶ç³»çµ±](#äº‹ä»¶ç³»çµ±)
10. [ä¿®è¨‚è¨˜éŒ„](#ä¿®è¨‚è¨˜éŒ„)

---

## æ¦‚è¿°

å‰ç«¯åŠ©ç†ç®¡ç†ç³»çµ±æ˜¯ AI-Box å‰ç«¯ç³»çµ±çš„æ ¸å¿ƒåŠŸèƒ½ä¹‹ä¸€ï¼Œæä¾›å®Œæ•´çš„åŠ©ç†ï¼ˆAssistantï¼‰å‰µå»ºã€ç·¨è¼¯ã€é…ç½®å’Œç®¡ç†åŠŸèƒ½ã€‚ç³»çµ±æ”¯æŒåŠ©ç†çš„åŸºæœ¬ä¿¡æ¯è¨­ç½®ã€è³‡æºé…ç½®ã€è¡Œç‚ºé…ç½®å’Œå¯è¦‹æ€§ç®¡ç†ï¼Œä¸¦å°‡é…ç½®æ•¸æ“šå­˜å„²åœ¨ç€è¦½å™¨æœ¬åœ°å­˜å„²ä¸­ã€‚

### æ ¸å¿ƒç‰¹æ€§

- âœ… **åŠ©ç†ç¶­è­·ç•Œé¢**ï¼šæä¾›å®Œæ•´çš„åŠ©ç†é…ç½®ç•Œé¢
- âœ… **å·¥å…·ç®¡ç†**ï¼šæ”¯æŒç‚ºåŠ©ç†é…ç½®å¯ä½¿ç”¨çš„å·¥å…·ï¼ˆToolsï¼‰
- âœ… **æœ¬åœ°å­˜å„²**ï¼šä½¿ç”¨ localStorage å­˜å„²åŠ©ç†é…ç½®
- âœ… **å¯¦æ™‚æ›´æ–°**ï¼šé€šéäº‹ä»¶ç³»çµ±å¯¦ç¾é…ç½®çš„å¯¦æ™‚åŒæ­¥
- âœ… **å·¥å…·æœç´¢**ï¼šæ”¯æŒæŒ‰åˆ†é¡å’Œé—œéµè©æœç´¢å·¥å…·
- âœ… **æ‰¹é‡æ“ä½œ**ï¼šæ”¯æŒæ‰¹é‡é¸æ“‡å’Œå–æ¶ˆå·¥å…·

---

## ç³»çµ±æ¶æ§‹

### çµ„ä»¶å±¤æ¬¡çµæ§‹

```
ChatArea (ä¸»å®¹å™¨)
â”œâ”€â”€ AssistantCard (åŠ©ç†å¡ç‰‡)
â”‚   â”œâ”€â”€ ç·¨è¼¯æŒ‰éˆ• â†’ æ‰“é–‹ AssistantMaintenanceModal
â”‚   â”œâ”€â”€ åˆªé™¤æŒ‰éˆ• â†’ é¡¯ç¤ºåˆªé™¤ç¢ºèªå°è©±æ¡†
â”‚   â””â”€â”€ æ”¶è—æŒ‰éˆ• â†’ æ›´æ–°æ”¶è—ç‹€æ…‹
â””â”€â”€ AssistantMaintenanceModal (åŠ©ç†ç¶­è­·æ¨¡æ…‹æ¡†)
    â”œâ”€â”€ åŸºæœ¬è³‡è¨Šæ¨™ç±¤é 
    â”œâ”€â”€ è³‡æºé…ç½®æ¨™ç±¤é 
    â”‚   â””â”€â”€ å·¥å…·é¸æ“‡å™¨ï¼ˆå¾ API ç²å–å·¥å…·åˆ—è¡¨ï¼‰
    â”œâ”€â”€ è¡Œç‚ºé…ç½®æ¨™ç±¤é 
    â””â”€â”€ å¯è¦‹æ€§æ¨™ç±¤é 
```

### æ•¸æ“šæµ

```
ç”¨æˆ¶æ“ä½œ
  â†“
AssistantMaintenanceModal
  â†“
ä¿å­˜é…ç½®åˆ° localStorage
  â†“
è§¸ç™¼ assistantToolsUpdated äº‹ä»¶
  â†“
ChatInput / ChatArea ç›£è½äº‹ä»¶ä¸¦æ›´æ–°ç‹€æ…‹
```

---

## æ ¸å¿ƒçµ„ä»¶

### 1. AssistantMaintenanceModal

**æ–‡ä»¶ä½ç½®**: `ai-bot/src/components/AssistantMaintenanceModal.tsx`

**åŠŸèƒ½**: åŠ©ç†ç¶­è­·æ¨¡æ…‹æ¡†ï¼Œæä¾›å®Œæ•´çš„åŠ©ç†é…ç½®ç•Œé¢

**ä¸»è¦åŠŸèƒ½**:

- åŸºæœ¬è³‡è¨Šé…ç½®ï¼ˆåç¨±ã€åœ–æ¨™ã€è§’è‰²ã€æŠ€èƒ½ã€é™åˆ¶ã€è¼¸å‡ºæ ¼å¼ï¼‰
- è³‡æºé…ç½®ï¼ˆçŸ¥è­˜åº«ã€å·¥å…·é¸æ“‡ï¼‰
- è¡Œç‚ºé…ç½®ï¼ˆTemperatureã€é–‹å ´å•å€™ã€é è¨­å›æ‡‰ï¼‰
- å¯è¦‹æ€§é…ç½®ï¼ˆç§æœ‰/å…¬é–‹ï¼‰

**Props**:

```typescript
interface AssistantMaintenanceModalProps {
  isOpen: boolean;
  assistantId?: string;
  assistant?: {
    id: string;
    name: string;
    description: string;
    icon: string;
  };
  onClose: () => void;
  onSave?: (data: AssistantMaintenanceData) => void;
}
```

**æ•¸æ“šçµæ§‹**:

```typescript
export interface AssistantMaintenanceData {
  // åŸºæœ¬è³‡è¨Š
  id?: string;
  name: string;
  icon: string;
  role: string;
  skills: string[];
  limitations: string[];
  outputFormat: string;

  // è³‡æºé…ç½®
  knowledgeBases: string[];
  allowedTools: string[];

  // è¡Œç‚ºé…ç½®
  temperature: number;
  greeting: string;
  presetResponses: string[];

  // å¯è¦‹æ€§
  visibility: 'private' | 'public';
}
```

### 2. AssistantCard

**æ–‡ä»¶ä½ç½®**: `ai-bot/src/components/AssistantCard.tsx`

**åŠŸèƒ½**: åŠ©ç†å¡ç‰‡çµ„ä»¶ï¼Œé¡¯ç¤ºåŠ©ç†ä¿¡æ¯å’Œæ“ä½œæŒ‰éˆ•

**ä¸»è¦åŠŸèƒ½**:

- é¡¯ç¤ºåŠ©ç†åŸºæœ¬ä¿¡æ¯ï¼ˆåç¨±ã€æè¿°ã€åœ–æ¨™ã€ç‹€æ…‹ï¼‰
- æä¾›ç·¨è¼¯ã€åˆªé™¤ã€æ”¶è—æ“ä½œ
- é¡¯ç¤ºä½¿ç”¨æ¬¡æ•¸

**Props**:

```typescript
interface AssistantCardProps {
  assistant: {
    id: string;
    name: string;
    description: string;
    icon: string;
    status: 'registering' | 'online' | 'maintenance' | 'deprecated';
    usageCount: number;
  };
  onEdit?: (assistantId: string) => void;
  onDelete?: (assistantId: string) => void;
  onClick?: () => void;
  onFavorite?: (assistantId: string, isFavorite: boolean) => void;
  isFavorite?: boolean;
}
```

### 3. ChatArea

**æ–‡ä»¶ä½ç½®**: `ai-bot/src/components/ChatArea.tsx`

**åŠŸèƒ½**: èŠå¤©å€åŸŸä¸»å®¹å™¨ï¼Œé›†æˆåŠ©ç†ç®¡ç†åŠŸèƒ½

**ä¸»è¦åŠŸèƒ½**:

- é¡¯ç¤ºåŠ©ç†åˆ—è¡¨
- æ‰“é–‹åŠ©ç†ç¶­è­·æ¨¡æ…‹æ¡†
- è™•ç†åŠ©ç†é…ç½®ä¿å­˜
- ç®¡ç†åŠ©ç†åˆªé™¤ç¢ºèª

---

## åŠŸèƒ½æ¨¡å¡Š

### 1. åŸºæœ¬è³‡è¨Šé…ç½®

**ä½ç½®**: AssistantMaintenanceModal - åŸºæœ¬è³‡è¨Šæ¨™ç±¤é 

**åŠŸèƒ½**:

- **åŠ©ç†åç¨±**: å¿…å¡«é …ï¼Œç”¨æ–¼è­˜åˆ¥åŠ©ç†
- **åœ–æ¨™é¸æ“‡**: ä½¿ç”¨ IconPicker çµ„ä»¶é¸æ“‡åœ–æ¨™
- **è§’è‰²èªªæ˜**: å¿…å¡«é …ï¼Œæè¿°åŠ©ç†çš„è§’è‰²å’Œè·è²¬
- **æŠ€èƒ½**: å¯æ·»åŠ å¤šå€‹æŠ€èƒ½æ¨™ç±¤
- **é™åˆ¶**: å¯æ·»åŠ å¤šå€‹é™åˆ¶æ¨™ç±¤
- **è¼¸å‡ºæ ¼å¼**: æè¿°è¼¸å‡ºæ ¼å¼è¦æ±‚

**å¯¦ç¾**:

```typescript
// æŠ€èƒ½ç®¡ç†
const [skills, setSkills] = useState<string[]>([]);
const addSkill = () => {
  if (skillInput.trim() && !skills.includes(skillInput.trim())) {
    setSkills([...skills, skillInput.trim()]);
    setSkillInput('');
  }
};

// é™åˆ¶ç®¡ç†
const [limitations, setLimitations] = useState<string[]>([]);
const addLimitation = () => {
  if (limitationInput.trim() && !limitations.includes(limitationInput.trim())) {
    setLimitations([...limitations, limitationInput.trim()]);
    setLimitationInput('');
  }
};
```

### 2. è³‡æºé…ç½®

**ä½ç½®**: AssistantMaintenanceModal - è³‡æºé…ç½®æ¨™ç±¤é 

#### 2.1 çŸ¥è­˜åº«é…ç½®

**åŠŸèƒ½**:

- æ·»åŠ å¯æ¥è§¸çš„çŸ¥è­˜åº«
- ç§»é™¤çŸ¥è­˜åº«
- é¡¯ç¤ºçŸ¥è­˜åº«åˆ—è¡¨

**å¯¦ç¾**:

```typescript
const [knowledgeBases, setKnowledgeBases] = useState<string[]>([]);
const addKnowledgeBase = () => {
  if (knowledgeBaseInput.trim() && !knowledgeBases.includes(knowledgeBaseInput.trim())) {
    setKnowledgeBases([...knowledgeBases, knowledgeBaseInput.trim()]);
    setKnowledgeBaseInput('');
  }
};
```

#### 2.2 å·¥å…·é…ç½®ï¼ˆæŒ‰é¡åˆ¥é¸æ“‡ï¼‰

**åŠŸèƒ½**:

- å¾ API ç²å–å·¥å…·åˆ—è¡¨ï¼ˆ`/tools/registry?is_active=true`ï¼‰
- **æŒ‰é¡åˆ¥é¸æ“‡å·¥å…·**ï¼ˆç°¡åŒ–é…ç½®ï¼Œåªéœ€é¸æ“‡é¡åˆ¥ï¼Œè‡ªå‹•åŒ…å«è©²é¡åˆ¥ä¸‹çš„æ‰€æœ‰å·¥å…·ï¼‰
- é¡¯ç¤ºæ¯å€‹é¡åˆ¥ä¸‹çš„å·¥å…·æ•¸é‡
- é¡¯ç¤ºå·²é¸é¡åˆ¥åˆ—è¡¨

**æ•¸æ“šçµæ§‹**:

```typescript
// ç‹€æ…‹ç®¡ç†
const [allowedCategories, setAllowedCategories] = useState<string[]>([]); // é¸ä¸­çš„é¡åˆ¥åˆ—è¡¨
const [tools, setTools] = useState<ToolInfo[]>([]); // æ‰€æœ‰å·¥å…·åˆ—è¡¨ï¼ˆç”¨æ–¼è¨ˆç®—é¡åˆ¥ä¸‹çš„å·¥å…·æ•¸é‡ï¼‰
const [categories, setCategories] = useState<string[]>([]); // æ‰€æœ‰åˆ†é¡åˆ—è¡¨

interface ToolInfo {
  id: string;          // å·¥å…· IDï¼ˆä½¿ç”¨å·¥å…·åç¨±ï¼‰
  name: string;        // å·¥å…·åç¨±
  description: string; // å·¥å…·æè¿°
  category: string;   // å·¥å…·åˆ†é¡
  icon: string;       // å·¥å…·åœ–æ¨™
}
```

**é¡åˆ¥èˆ‡å·¥å…·è½‰æ›å‡½æ•¸**:

```typescript
// å¾é¡åˆ¥ç²å–è©²é¡åˆ¥ä¸‹çš„æ‰€æœ‰å·¥å…·ID
const getToolsByCategories = (categories: string[]): string[] => {
  if (categories.length === 0) return [];
  return tools
    .filter(tool => categories.includes(tool.category))
    .map(tool => tool.id);
};

// å¾å·¥å…·IDåˆ—è¡¨æ¨æ–·å·²é¸çš„é¡åˆ¥ï¼ˆç”¨æ–¼åŠ è¼‰èˆŠæ•¸æ“šï¼‰
const getCategoriesFromTools = (toolIds: string[]): string[] => {
  if (toolIds.length === 0) return [];
  const toolCategories = tools
    .filter(tool => toolIds.includes(tool.id))
    .map(tool => tool.category);
  return Array.from(new Set(toolCategories));
};
```

**é¡åˆ¥é¸æ“‡UI**:

- ç¶²æ ¼å¸ƒå±€é¡¯ç¤ºæ‰€æœ‰é¡åˆ¥ï¼ˆ1åˆ—æˆ–2åˆ—ï¼ŒéŸ¿æ‡‰å¼ï¼‰
- æ¯å€‹é¡åˆ¥å¡ç‰‡é¡¯ç¤ºï¼š
  - é¡åˆ¥åç¨±
  - è©²é¡åˆ¥ä¸‹çš„å·¥å…·æ•¸é‡ï¼ˆä¾‹å¦‚ï¼š"5 å€‹å·¥å…·"ï¼‰
  - è©²é¡åˆ¥ä¸‹çš„å‰3å€‹å·¥å…·åç¨±é è¦½
- é¸ä¸­ç‹€æ…‹ï¼šç´«è‰²é‚Šæ¡†ï¼ˆ`border-purple-500`ï¼‰å’ŒèƒŒæ™¯é«˜äº®ï¼ˆ`bg-purple-500/10`ï¼‰
- æ”¯æŒé»æ“Šåˆ‡æ›é¸æ“‡ç‹€æ…‹

**åˆ‡æ›é¡åˆ¥**:

```typescript
const toggleCategory = (category: string) => {
  if (allowedCategories.includes(category)) {
    setAllowedCategories(allowedCategories.filter(c => c !== category));
  } else {
    setAllowedCategories([...allowedCategories, category]);
  }
};
```

**ä¿å­˜é‚è¼¯**:

- ä¿å­˜æ™‚å°‡é¸ä¸­çš„é¡åˆ¥è½‰æ›ç‚ºå·¥å…·IDåˆ—è¡¨
- å­˜å„²æ ¼å¼ä¿æŒä¸è®Šï¼ˆå·¥å…·IDæ•¸çµ„ï¼‰ï¼Œç¢ºä¿å‘å¾Œå…¼å®¹
- èˆŠæ•¸æ“šé·ç§»ï¼šå¾ localStorage è®€å–èˆŠçš„å·¥å…·IDæ•¸æ“šæ™‚ï¼Œè‡ªå‹•æ¨æ–·é¡åˆ¥

### 3. è¡Œç‚ºé…ç½®

**ä½ç½®**: AssistantMaintenanceModal - è¡Œç‚ºé…ç½®æ¨™ç±¤é 

**åŠŸèƒ½**:

- **Temperature**: æ»‘å¡Šæ§åˆ¶ï¼ˆ0-1ï¼‰ï¼Œæ§åˆ¶å›æ‡‰çš„å‰µé€ æ€§
- **é–‹å ´å•å€™**: æ–‡æœ¬è¼¸å…¥ï¼Œè¨­ç½®åŠ©ç†çš„é–‹å ´å•å€™èª
- **é è¨­å›æ‡‰**: 3å€‹å•é¡Œçš„é è¨­å›æ‡‰

**å¯¦ç¾**:

```typescript
const [temperature, setTemperature] = useState(0.7);
const [greeting, setGreeting] = useState('');
const [presetResponses, setPresetResponses] = useState<string[]>(['', '', '']);
```

### 4. å¯è¦‹æ€§é…ç½®

**ä½ç½®**: AssistantMaintenanceModal - å¯è¦‹æ€§æ¨™ç±¤é 

**åŠŸèƒ½**:

- **ç§æœ‰ (Private)**: åªæœ‰å‰µå»ºè€…å¯ä»¥çœ‹åˆ°å’Œä½¿ç”¨
- **å…¬é–‹ (Public)**: æ‰€æœ‰ç”¨æˆ¶éƒ½å¯ä»¥çœ‹åˆ°å’Œä½¿ç”¨

**å¯¦ç¾**:

```typescript
const [visibility, setVisibility] = useState<'private' | 'public'>('private');
```

---

## æ•¸æ“šå­˜å„²

### localStorage å­˜å„²çµæ§‹

#### 1. åŠ©ç†å·¥å…·é…ç½®

**éµåæ ¼å¼**: `assistant_{assistantId}_allowedTools`

**æ•¸æ“šæ ¼å¼**: JSON æ•¸çµ„ï¼ŒåŒ…å«å·¥å…· ID åˆ—è¡¨

**ç¤ºä¾‹**:

```json
["web_search", "datetime", "weather", "ip_location"]
```

**ä¿å­˜ä½ç½®**:

- `AssistantMaintenanceModal.tsx` - ä¿å­˜å‰é å…ˆä¿å­˜åˆ° localStorage
- `ChatArea.tsx` - onSave å›èª¿ä¸­ä¿å­˜åˆ° localStorage

**è®€å–ä½ç½®**:

- `ChatInput.tsx` - è®€å–åŠ©ç†çš„ allowedTools é…ç½®

#### 2. æ”¶è—åŠ©ç†

**éµå**: `favoriteAssistants`

**æ•¸æ“šæ ¼å¼**: JSON å°è±¡æˆ–æ•¸çµ„

**ç¤ºä¾‹**:

```json
{
  "assistant_id_1": "åŠ©ç†åç¨±1",
  "assistant_id_2": "åŠ©ç†åç¨±2"
}
```

**ä¿å­˜ä½ç½®**:

- `taskStorage.ts` - ç®¡ç†æ”¶è—åŠ©ç†çš„å¢åˆªæ”¹æŸ¥
- `Home.tsx` - é é¢åŠ è¼‰æ™‚è®€å–æ”¶è—åˆ—è¡¨

### å­˜å„²æµç¨‹

```
ç”¨æˆ¶é»æ“Šä¿å­˜
  â†“
AssistantMaintenanceModal.handleSave()
  â†“
ä¿å­˜åˆ° localStorage (é å…ˆä¿å­˜)
  â†“
è§¸ç™¼ assistantToolsUpdated äº‹ä»¶
  â†“
ChatArea.onSave() å›èª¿
  â†“
å†æ¬¡ä¿å­˜åˆ° localStorage (ç¢ºèªä¿å­˜)
  â†“
é—œé–‰æ¨¡æ…‹æ¡†
```

---

## ä½¿ç”¨æµç¨‹

### 1. å‰µå»ºæ–°åŠ©ç†

```
1. é»æ“Šã€Œç®¡ç†åŠ©ç†ã€æŒ‰éˆ•
2. æ‰“é–‹ AssistantMaintenanceModalï¼ˆassistantId ç‚º undefinedï¼‰
3. å¡«å¯«åŸºæœ¬è³‡è¨Šï¼ˆåç¨±ã€è§’è‰²å¿…å¡«ï¼‰
4. é…ç½®è³‡æºï¼ˆé¸æ“‡å·¥å…·ã€çŸ¥è­˜åº«ï¼‰
5. é…ç½®è¡Œç‚ºï¼ˆTemperatureã€å•å€™èªã€é è¨­å›æ‡‰ï¼‰
6. è¨­ç½®å¯è¦‹æ€§ï¼ˆç§æœ‰/å…¬é–‹ï¼‰
7. é»æ“Šã€Œä¿å­˜ã€
8. é…ç½®ä¿å­˜åˆ° localStorage
9. è§¸ç™¼ assistantToolsUpdated äº‹ä»¶
```

### 2. ç·¨è¼¯ç¾æœ‰åŠ©ç†

```
1. åœ¨ AssistantCard ä¸­é»æ“Šã€Œç·¨è¼¯ã€æŒ‰éˆ•
2. æ‰“é–‹ AssistantMaintenanceModalï¼ˆå‚³å…¥ assistantIdï¼‰
3. åŠ è¼‰ç¾æœ‰é…ç½®ï¼ˆå¦‚æœæœ‰çš„è©±ï¼‰
4. ä¿®æ”¹é…ç½®
5. é»æ“Šã€Œä¿å­˜ã€
6. æ›´æ–° localStorage ä¸­çš„é…ç½®
7. è§¸ç™¼ assistantToolsUpdated äº‹ä»¶
```

### 3. åˆªé™¤åŠ©ç†

```
1. åœ¨ AssistantCard ä¸­é»æ“Šã€Œåˆªé™¤ã€æŒ‰éˆ•
2. é¡¯ç¤ºåˆªé™¤ç¢ºèªå°è©±æ¡†
3. ç¢ºèªåˆªé™¤
4. åŸ·è¡Œåˆªé™¤æ“ä½œï¼ˆTODO: éœ€è¦å¯¦ç¾ API èª¿ç”¨ï¼‰
```

### 4. é…ç½®å·¥å…·ï¼ˆæŒ‰é¡åˆ¥ï¼‰

```
1. æ‰“é–‹ AssistantMaintenanceModal
2. åˆ‡æ›åˆ°ã€Œè³‡æºé…ç½®ã€æ¨™ç±¤é 
3. ç³»çµ±è‡ªå‹•å¾ API ç²å–å·¥å…·åˆ—è¡¨ä¸¦æå–æ‰€æœ‰é¡åˆ¥
4. åœ¨é¡åˆ¥åˆ—è¡¨ä¸­å‹¾é¸éœ€è¦çš„é¡åˆ¥
5. æ¯å€‹é¡åˆ¥é¡¯ç¤ºè©²é¡åˆ¥ä¸‹çš„å·¥å…·æ•¸é‡å’Œé è¦½
6. æŸ¥çœ‹ã€Œå·²é¸é¡åˆ¥ã€åˆ—è¡¨ç¢ºèª
7. ä¿å­˜é…ç½®ï¼ˆç³»çµ±è‡ªå‹•å°‡é¡åˆ¥è½‰æ›ç‚ºå·¥å…·IDåˆ—è¡¨ï¼‰
```

---

## API æ¥å£

### 1. ç²å–å·¥å…·åˆ—è¡¨

**ç«¯é»**: `GET /api/v1/tools/registry?is_active=true`

**è«‹æ±‚åƒæ•¸**:

- `is_active` (query): æ˜¯å¦åªç²å–æ¿€æ´»çš„å·¥å…·

**éŸ¿æ‡‰æ ¼å¼**:

```typescript
{
  success: boolean;
  data: {
    tools: Array<{
      name: string;           // å·¥å…·åç¨±ï¼ˆä½œç‚º IDï¼‰
      category: string;       // å·¥å…·åˆ†é¡
      description: string;    // å·¥å…·æè¿°
      purpose?: string;       // å·¥å…·ç”¨é€”ï¼ˆå¯é¸ï¼‰
    }>;
    total: number;            // å·¥å…·ç¸½æ•¸
  };
}
```

**å¯¦ç¾ä½ç½®**: `AssistantMaintenanceModal.tsx` - `useEffect` é‰¤å­

**èª¿ç”¨æ™‚æ©Ÿ**: ç•¶æ¨¡æ…‹æ¡†æ‰“é–‹ä¸”åˆ‡æ›åˆ°ã€Œè³‡æºé…ç½®ã€æ¨™ç±¤é æ™‚

### 2. ä¿å­˜åŠ©ç†é…ç½®ï¼ˆTODOï¼‰

**ç«¯é»**: `POST /api/v1/assistants` (å‰µå»º) / `PUT /api/v1/assistants/{id}` (æ›´æ–°)

**ç‹€æ…‹**: âš ï¸ ç›®å‰æœªå¯¦ç¾ï¼Œé…ç½®åƒ…ä¿å­˜åœ¨ localStorage

**è¨ˆåŠƒ**: æœªä¾†éœ€è¦å¯¦ç¾å¾Œç«¯ API ä¾†æŒä¹…åŒ–åŠ©ç†é…ç½®

---

## ç‹€æ…‹ç®¡ç†

### çµ„ä»¶ç‹€æ…‹

#### AssistantMaintenanceModal

```typescript
// åŸºæœ¬è³‡è¨Š
const [name, setName] = useState('');
const [selectedIcon, setSelectedIcon] = useState<string>('FaRobot');
const [role, setRole] = useState('');
const [skills, setSkills] = useState<string[]>([]);
const [limitations, setLimitations] = useState<string[]>([]);
const [outputFormat, setOutputFormat] = useState('');

// è³‡æºé…ç½®
const [knowledgeBases, setKnowledgeBases] = useState<string[]>([]);
const [allowedCategories, setAllowedCategories] = useState<string[]>([]); // é¸ä¸­çš„é¡åˆ¥åˆ—è¡¨

// å·¥å…·åˆ—è¡¨ç›¸é—œ
const [tools, setTools] = useState<ToolInfo[]>([]); // æ‰€æœ‰å·¥å…·åˆ—è¡¨ï¼ˆç”¨æ–¼è¨ˆç®—é¡åˆ¥ä¸‹çš„å·¥å…·æ•¸é‡ï¼‰
const [categories, setCategories] = useState<string[]>([]); // æ‰€æœ‰åˆ†é¡åˆ—è¡¨
const [isLoadingTools, setIsLoadingTools] = useState(false);

// è¡Œç‚ºé…ç½®
const [temperature, setTemperature] = useState(0.7);
const [greeting, setGreeting] = useState('');
const [presetResponses, setPresetResponses] = useState<string[]>(['', '', '']);

// å¯è¦‹æ€§
const [visibility, setVisibility] = useState<'private' | 'public'>('private');
```

#### ChatArea

```typescript
const [showAssistantMaintenanceModal, setShowAssistantMaintenanceModal] = useState(false);
const [maintainingAssistantId, setMaintainingAssistantId] = useState<string | null>(null);
const [showDeleteConfirm, setShowDeleteConfirm] = useState(false);
const [deletingAssistantId, setDeletingAssistantId] = useState<string | null>(null);
```

---

## äº‹ä»¶ç³»çµ±

### è‡ªå®šç¾©äº‹ä»¶

#### assistantToolsUpdated

**è§¸ç™¼æ™‚æ©Ÿ**: ç•¶åŠ©ç†çš„å·¥å…·é…ç½®æ›´æ–°æ™‚

**äº‹ä»¶è©³æƒ…**:

```typescript
window.dispatchEvent(new CustomEvent('assistantToolsUpdated', {
  detail: {
    assistantId: string;
    allowedTools: string[];
  }
}));
```

**ç›£è½ä½ç½®**:

- `ChatInput.tsx` - ç›£è½äº‹ä»¶ä¸¦æ›´æ–°åŠ©ç†çš„å·¥å…·é…ç½®

**ä½¿ç”¨å ´æ™¯**:

- ç•¶ç”¨æˆ¶åœ¨ AssistantMaintenanceModal ä¸­ä¿å­˜å·¥å…·é…ç½®å¾Œ
- é€šçŸ¥ ChatInput çµ„ä»¶æ›´æ–°ç•¶å‰é¸ä¸­åŠ©ç†çš„å·¥å…·åˆ—è¡¨
- å¯¦ç¾å¯¦æ™‚æ›´æ–°ï¼Œç„¡éœ€åˆ·æ–°é é¢

---

## ä¿®è¨‚è¨˜éŒ„

### v1.1 (2026-01-06)

**ä¿®æ”¹å…§å®¹**:

- âœ… ç°¡åŒ–å·¥å…·é…ç½®ï¼šæ”¹ç‚ºæŒ‰é¡åˆ¥é¸æ“‡ï¼Œä¸å†éœ€è¦é¸æ“‡æ¯å€‹å…·é«”å·¥å…·
- âœ… æ›´æ–° UIï¼šé¡åˆ¥é¸æ“‡ç•Œé¢ï¼Œé¡¯ç¤ºæ¯å€‹é¡åˆ¥ä¸‹çš„å·¥å…·æ•¸é‡å’Œé è¦½
- âœ… ä¿æŒå‘å¾Œå…¼å®¹ï¼šä¿å­˜æ™‚ä»å°‡é¡åˆ¥è½‰æ›ç‚ºå·¥å…·IDåˆ—è¡¨å­˜å„²
- âœ… æ”¯æŒèˆŠæ•¸æ“šé·ç§»ï¼šå¾ localStorage è®€å–èˆŠçš„å·¥å…·IDæ•¸æ“šæ™‚ï¼Œè‡ªå‹•æ¨æ–·é¡åˆ¥

**æŠ€è¡“è®Šæ›´**:

- å°‡ `allowedTools` ç‹€æ…‹æ”¹ç‚º `allowedCategories`
- ç§»é™¤å·¥å…·æœç´¢å’Œéæ¿¾åŠŸèƒ½
- ç§»é™¤æ‰¹é‡æ“ä½œæŒ‰éˆ•ï¼ˆå…¨é¸/å–æ¶ˆç•¶å‰ï¼‰
- æ·»åŠ  `getToolsByCategories` å’Œ `getCategoriesFromTools` è½‰æ›å‡½æ•¸

### v1.0 (2026-01-06)

**æ–°å¢å…§å®¹**:

- âœ… å‰µå»ºå‰ç«¯åŠ©ç†ç®¡ç†ç³»çµ±æ–‡æª”
- âœ… è¨˜éŒ„ AssistantMaintenanceModal çµ„ä»¶åŠŸèƒ½
- âœ… è¨˜éŒ„ AssistantCard çµ„ä»¶åŠŸèƒ½
- âœ… è¨˜éŒ„æ•¸æ“šå­˜å„²çµæ§‹ï¼ˆlocalStorageï¼‰
- âœ… è¨˜éŒ„ API æ¥å£ï¼ˆå·¥å…·åˆ—è¡¨ç²å–ï¼‰
- âœ… è¨˜éŒ„äº‹ä»¶ç³»çµ±ï¼ˆassistantToolsUpdatedï¼‰
- âœ… è¨˜éŒ„ä½¿ç”¨æµç¨‹

**åŠŸèƒ½ç‹€æ…‹**:

- âœ… åŸºæœ¬è³‡è¨Šé…ç½®ï¼šå·²å¯¦ç¾
- âœ… è³‡æºé…ç½®ï¼ˆçŸ¥è­˜åº«ï¼‰ï¼šå·²å¯¦ç¾
- âœ… è³‡æºé…ç½®ï¼ˆå·¥å…·ï¼‰ï¼šå·²å¯¦ç¾
- âœ… è¡Œç‚ºé…ç½®ï¼šå·²å¯¦ç¾
- âœ… å¯è¦‹æ€§é…ç½®ï¼šå·²å¯¦ç¾
- âœ… æœ¬åœ°å­˜å„²ï¼šå·²å¯¦ç¾ï¼ˆlocalStorageï¼‰
- âš ï¸ å¾Œç«¯ APIï¼šæœªå¯¦ç¾ï¼ˆTODOï¼‰

**å·²çŸ¥å•é¡Œ**:

- âš ï¸ åŠ©ç†é…ç½®åƒ…ä¿å­˜åœ¨ localStorageï¼ŒæœªåŒæ­¥åˆ°å¾Œç«¯
- âš ï¸ åˆªé™¤åŠ©ç†åŠŸèƒ½æœªå¯¦ç¾å¾Œç«¯ API èª¿ç”¨
- âš ï¸ åŠ©ç†åˆ—è¡¨å¾å¾Œç«¯ç²å–ï¼Œä½†é…ç½®ä¿å­˜åœ¨å‰ç«¯

**æœªä¾†è¨ˆåŠƒ**:

- ğŸ”„ å¯¦ç¾å¾Œç«¯ API ä¾†æŒä¹…åŒ–åŠ©ç†é…ç½®
- ğŸ”„ å¯¦ç¾åŠ©ç†åˆªé™¤çš„å¾Œç«¯ API èª¿ç”¨
- ğŸ”„ å¯¦ç¾åŠ©ç†é…ç½®çš„åŒæ­¥æ©Ÿåˆ¶ï¼ˆå‰ç«¯ â†” å¾Œç«¯ï¼‰

---

## ç›¸é—œæ–‡æª”

- [å·¥å…·è¨»å†Šæ¸…å–®èªªæ˜](../tools/å·¥å…·è¨»å†Šæ¸…å–®èªªæ˜.md)
- [å·¥å…·APIæ–‡æª”](../tools/å·¥å…·APIæ–‡æ¡£.md)
- [IEEå‰ç«¯ç³»çµ±](./IEEå‰ç«¯ç³»ç»Ÿ.md)

---

**æœ€å¾Œæ›´æ–°æ—¥æœŸ**: 2026-01-06
**æ–‡æª”ç‰ˆæœ¬**: 1.1
**ç¶­è­·äºº**: Daniel Chung
