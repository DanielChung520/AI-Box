# 依赖说明

## Agent 核心依赖

AiDocAgent 是一个独立的 Agent 模块，只包含核心功能，不依赖主项目的其他脚本。

### 必需的文件

Agent 正常工作需要以下文件：

1. **核心 Agent 文件**
   - `src/notion-agent.js` - Agent 主类
   - `src/agent/` - 所有 Agent 模块

2. **Notion API 封装**
   - `src/notion-client.js` - Notion API 客户端
   - `src/notion-to-markdown.js` - Notion 转 Markdown
   - `src/markdown-to-notion.js` - Markdown 转 Notion

### NPM 依赖

```json
{
  "@notionhq/client": "^2.2.15",  // Notion API SDK
  "dotenv": "^16.4.5",            // 环境变量管理
  "cli-progress": "^3.12.0"       // 进度条显示（可选，但已包含）
}
```

### 不需要的文件

以下脚本**不在** AiDocAgent 中，因为它们不是 Agent 的核心依赖：

- ❌ `cli.js` - CLI 命令行工具（主项目的工具）
- ❌ `sync-page.js` - 页面同步脚本（主项目的工具）
- ❌ `find-page.js` - 查找页面脚本（主项目的工具）
- ❌ `list-pages.js` - 列出页面脚本（主项目的工具）
- ❌ `search-pages.js` - 搜索页面脚本（主项目的工具）
- ❌ `mermaid-to-png.js` - Mermaid 转换工具（主项目的工具）
- ❌ `md-to-pdf.js` - Markdown 转 PDF（主项目的工具）
- ❌ `md-to-docx.js` - Markdown 转 DOCX（主项目的工具）
- ❌ `notion-mcp-server.js` - MCP Server（主项目的工具）

这些脚本是主项目的独立工具，Agent 不直接使用它们。

### Agent 如何使用 Notion API

Agent 通过以下方式访问 Notion：

1. **直接使用 `notion-client.js`** 中的函数：
   - `findPageByTitle()` - 通过标题查找页面
   - `findPageByExactTitle()` - 精确匹配标题
   - `searchPages()` - 搜索页面
   - `getPageInfo()` - 获取页面信息
   - `getPageTitle()` - 获取页面标题

2. **使用转换函数**：
   - `pageToMarkdown()` - 将 Notion 页面转为 Markdown
   - `createNotionPage()` - 创建 Notion 页面
   - `updateNotionPage()` - 更新 Notion 页面

所有这些功能都已经包含在 AiDocAgent 目录中。

## 总结

AiDocAgent 是一个**自包含**的模块，只包含 Agent 运行所需的最小文件集。主项目的其他脚本（如 CLI 工具、转换工具等）是独立的工具，Agent 不依赖它们。

